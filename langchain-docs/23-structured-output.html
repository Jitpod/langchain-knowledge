<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LangChain ç»“æ„åŒ–è¾“å‡º - Pydantic æ¨¡å‹å’Œ JSON Schema éªŒè¯">
    <title>ç»“æ„åŒ–è¾“å‡º | LangChain 1.0 Python çŸ¥è¯†æ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <button class="mobile-menu-button" aria-label="æ‰“å¼€èœå•">â˜°</button>

    <div class="container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">ğŸ¦œ LangChain 1.0</h1>
                <p class="sidebar-subtitle">Python å®Œæ•´å­¦ä¹ æŒ‡å—</p>
            </div>

            <ul class="nav-menu">
                <li class="nav-section">
                    <div class="nav-section-title">å¼€å§‹</div>
                    <ul>
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <span class="nav-icon">ğŸ </span>
                                ä¸»é¡µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">åŸºç¡€ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="01-introduction.html" class="nav-link">
                                <span class="nav-icon">ğŸ“–</span>
                                LangChain ç®€ä»‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="02-architecture.html" class="nav-link">
                                <span class="nav-icon">ğŸ—ï¸</span>
                                æ ¸å¿ƒæ¶æ„
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="03-models.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤–</span>
                                æ¨¡å‹æ¥å£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="04-messages.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¬</span>
                                æ¶ˆæ¯ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="05-tools.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                å·¥å…·ç³»ç»Ÿ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">è¿›é˜¶ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="06-agents.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                Agent åŸºç¡€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="07-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="08-rag.html" class="nav-link">
                                <span class="nav-icon">ğŸ”</span>
                                RAG è¯¦è§£
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="09-lcel.html" class="nav-link">
                                <span class="nav-icon">ğŸ”—</span>
                                LCEL è¡¨è¾¾å¼
                            </a>
                        </li>
                    </ul>
                </li>

                                <li class="nav-section">
                    <div class="nav-section-title">é«˜çº§åº”ç”¨</div>
                    <ul>
                        <li class="nav-item">
                            <a href="10-runtime.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                Runtime ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="11-checkpointer.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¾</span>
                                æŒä¹…åŒ–ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="12-streaming.html" class="nav-link">
                                <span class="nav-icon">ğŸŒŠ</span>
                                æµå¼è¾“å‡º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="13-human-in-loop.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="14-long-term-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ—„ï¸</span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="15-langgraph.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                LangGraph
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="16-context-engineering.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                ä¸Šä¸‹æ–‡å·¥ç¨‹
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="17-mcp.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                MCP åè®®
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">å®æˆ˜ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="18-customer-service.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å®¢æœæœºå™¨äºº
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="19-best-practices.html" class="nav-link">
                                <span class="nav-icon">âœ¨</span>
                                æœ€ä½³å®è·µ
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">å‚è€ƒç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="20-api-reference.html" class="nav-link">
                                <span class="nav-icon">ğŸ“š</span>
                                API é€ŸæŸ¥è¡¨
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="21-troubleshooting.html" class="nav-link">
                                <span class="nav-icon">ğŸ›</span>
                                æ•…éšœæ’é™¤
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="22-migration.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                è¿ç§»æŒ‡å—
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">æ‰©å±•ç¯‡</div>
                    <ul>
                        <li class="nav-item active">
                            <a href="23-structured-output.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                ç»“æ„åŒ–è¾“å‡º
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">DeepAgents ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="24-deepagents-quickstart.html" class="nav-link">
                                <span class="nav-icon">ğŸš€</span>
                                å¿«é€Ÿå¼€å§‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="25-deepagents-customization.html" class="nav-link">
                                <span class="nav-icon">ğŸ¨</span>
                                å®šåˆ¶åŒ–
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="26-deepagents-harness.html" class="nav-link">
                                <span class="nav-icon">ğŸ›ï¸</span>
                                Harness ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="27-deepagents-backends.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                åç«¯é…ç½®
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="28-deepagents-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="29-deepagents-hitl.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="30-deepagents-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ§ </span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="31-deepagents-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">Multi-Agent ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="32-multi-agent-index.html" class="nav-link">
                                <span class="nav-icon">ğŸŒ</span>
                                æ¦‚è¿°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="33-multi-agent-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="34-multi-agent-handoffs.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                äº¤æ¥æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="35-multi-agent-skills.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                æŠ€èƒ½ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="36-multi-agent-router.html" class="nav-link">
                                <span class="nav-icon">ğŸ§­</span>
                                è·¯ç”±æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="37-multi-agent-workflow.html" class="nav-link">
                                <span class="nav-icon">ğŸ”€</span>
                                è‡ªå®šä¹‰å·¥ä½œæµ
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                <nav class="breadcrumb">
                    <span class="breadcrumb-item">
                        <a href="index.html" class="breadcrumb-link">ä¸»é¡µ</a>
                    </span>
                    <span class="breadcrumb-item">
                        æ‰©å±•ç¯‡
                    </span>
                    <span class="breadcrumb-item">
                        ç»“æ„åŒ–è¾“å‡º
                    </span>
                </nav>

                <!-- é¡µé¢æ ‡é¢˜ -->
                <header class="page-header">
                    <h1 class="page-title">ğŸ“Š LangChain ç»“æ„åŒ–è¾“å‡º</h1>
                    <p class="page-subtitle">
                        ä½¿ç”¨ Pydantic æ¨¡å‹å’Œ JSON Schema ä» LLM è·å–å¯é¢„æµ‹ã€ç±»å‹å®‰å…¨çš„ç»“æ„åŒ–æ•°æ®ï¼Œ
                        å‘Šåˆ«æ–‡æœ¬è§£æçš„ä¸ç¡®å®šæ€§ã€‚
                    </p>
                </header>

                <!-- ä»€ä¹ˆæ˜¯ç»“æ„åŒ–è¾“å‡º -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“š ä»€ä¹ˆæ˜¯ç»“æ„åŒ–è¾“å‡ºï¼Ÿ</h2>
                    <p>
                        <strong>ç»“æ„åŒ–è¾“å‡º</strong>ä½¿ Agent èƒ½å¤Ÿè¿”å›<strong>å¯é¢„æµ‹çš„ã€æœºå™¨å¯è¯»çš„æ•°æ®æ ¼å¼</strong>ï¼Œ
                        è€Œä¸æ˜¯éœ€è¦è§£æçš„è‡ªç„¶è¯­è¨€æ–‡æœ¬ã€‚ä½ å¯ä»¥è·å¾— JSON å¯¹è±¡ã€Pydantic æ¨¡å‹æˆ–æ•°æ®ç±»ï¼Œ
                        åº”ç”¨ç¨‹åºå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚
                    </p>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ’¡ æ ¸å¿ƒä¼˜åŠ¿</div>
                        <table style="margin-top: 0.5rem;">
                            <thead>
                                <tr>
                                    <th>ä¼˜åŠ¿</th>
                                    <th>è¯´æ˜</th>
                                    <th>ç¤ºä¾‹åœºæ™¯</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>ç±»å‹å®‰å…¨</strong></td>
                                    <td>ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ï¼ŒIDE è‡ªåŠ¨è¡¥å…¨</td>
                                    <td>æ•°æ®åº“æ’å…¥ã€API è°ƒç”¨</td>
                                </tr>
                                <tr>
                                    <td><strong>è‡ªåŠ¨éªŒè¯</strong></td>
                                    <td>Pydantic éªŒè¯å­—æ®µçº¦æŸ</td>
                                    <td>å¹´é¾„ 18-120ã€é‚®ç®±æ ¼å¼</td>
                                </tr>
                                <tr>
                                    <td><strong>æ¶ˆé™¤æ­§ä¹‰</strong></td>
                                    <td>æ— éœ€å¤æ‚çš„æ–‡æœ¬è§£æé€»è¾‘</td>
                                    <td>æå–å‘ç¥¨æ•°æ®</td>
                                </tr>
                                <tr>
                                    <td><strong>è·¨æä¾›å•†</strong></td>
                                    <td>OpenAIã€Anthropicã€Google ç»Ÿä¸€æ¥å£</td>
                                    <td>å¤šæ¨¡å‹å…¼å®¹</td>
                                </tr>
                                <tr>
                                    <td><strong>é”™è¯¯å¤„ç†</strong></td>
                                    <td>è‡ªåŠ¨é‡è¯•éªŒè¯å¤±è´¥</td>
                                    <td>æ ¼å¼é”™è¯¯è‡ªåŠ¨ä¿®æ­£</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
ç»“æ„åŒ–è¾“å‡ºåŸºç¡€ç¤ºä¾‹
"""
from pydantic import BaseModel
from langchain.agents import create_agent

# å®šä¹‰è¾“å‡ºç»“æ„
class ContactInfo(BaseModel):
    """è”ç³»äººä¿¡æ¯"""
    name: str
    email: str
    phone: str

# åˆ›å»º Agentï¼ˆä½¿ç”¨ response_format æŒ‡å®šè¾“å‡ºæ ¼å¼ï¼‰
agent = create_agent(
    model="gpt-4o",
    response_format=ContactInfo  # è‡ªåŠ¨é€‰æ‹©æœ€ä½³ç­–ç•¥
)

# è°ƒç”¨ Agent
result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "æå–è”ç³»äººä¿¡æ¯ï¼šå¼ ä¸‰ï¼Œé‚®ç®± zhangsan@example.comï¼Œç”µè¯ 13812345678"
    }]
})

# è·å–ç»“æ„åŒ–æ•°æ®
contact = result["structured_response"]
print(contact.name)   # å¼ ä¸‰
print(contact.email)  # zhangsan@example.com
print(contact.phone)  # 13812345678</code></pre>
                    </div>
                </section>

                <!-- ä¸‰ç§å“åº”æ ¼å¼ç­–ç•¥ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ¯ ä¸‰ç§å“åº”æ ¼å¼ç­–ç•¥</h2>
                    <p>
                        LangChain æä¾›ä¸‰ç§ç­–ç•¥æ¥å®ç°ç»“æ„åŒ–è¾“å‡ºï¼Œè‡ªåŠ¨é€‚é…ä¸åŒçš„æ¨¡å‹èƒ½åŠ›ï¼š
                    </p>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph TB
    User["ç”¨æˆ·è¯·æ±‚"] --> Agent["create_agent()"]
    Agent --> Strategy{"response_format<br/>ç­–ç•¥é€‰æ‹©"}

    Strategy -->|åŸç”Ÿæ”¯æŒ| Provider["ProviderStrategy<br/>ä½¿ç”¨æ¨¡å‹åŸç”Ÿ API"]
    Strategy -->|å·¥å…·è°ƒç”¨| Tool["ToolStrategy<br/>åŸºäºå·¥å…·è°ƒç”¨"]
    Strategy -->|è‡ªåŠ¨| Auto["Auto-Selection<br/>è‡ªåŠ¨é€‰æ‹©æœ€ä½³ç­–ç•¥"]

    Provider --> OpenAI["OpenAI<br/>Anthropic<br/>Grok"]
    Tool --> Universal["é€šç”¨æ–¹æ¡ˆ<br/>é€‚ç”¨æ‰€æœ‰æ¨¡å‹"]
    Auto --> Smart["æ™ºèƒ½é€‰æ‹©<br/>æ¨èæ–¹å¼"]

    OpenAI --> Output["ç»“æ„åŒ–è¾“å‡º<br/>Pydantic æ¨¡å‹"]
    Universal --> Output
    Smart --> Output

    style Provider fill:#10b981,color:#fff
    style Tool fill:#f59e0b,color:#fff
    style Auto fill:#3b82f6,color:#fff
    style Output fill:#8b5cf6,color:#fff
                        </div>
                    </div>

                    <h3 class="subsection-title">1. ProviderStrategyï¼ˆåŸç”Ÿç­–ç•¥ï¼‰</h3>
                    <p>
                        ä½¿ç”¨æ¨¡å‹æä¾›å•†çš„<strong>åŸç”Ÿ API</strong>ï¼ˆOpenAIã€Anthropicã€Grokï¼‰ï¼Œ
                        é€Ÿåº¦æ›´å¿«ã€æ›´å¯é ã€‚
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
ProviderStrategy - ä½¿ç”¨åŸç”Ÿ API
"""
from langchain.agents.structured_output import ProviderStrategy
from pydantic import BaseModel

class ContactInfo(BaseModel):
    name: str
    email: str

# æ˜¾å¼ä½¿ç”¨ ProviderStrategy
response_format = ProviderStrategy(schema=ContactInfo)

agent = create_agent(
    model="gpt-4o",  # æ”¯æŒåŸç”Ÿç»“æ„åŒ–è¾“å‡º
    response_format=response_format
)</code></pre>
                    </div>

                    <h3 class="subsection-title">2. ToolStrategyï¼ˆå·¥å…·ç­–ç•¥ï¼‰</h3>
                    <p>
                        åˆ©ç”¨<strong>å·¥å…·è°ƒç”¨</strong>æœºåˆ¶å®ç°ç»“æ„åŒ–è¾“å‡ºï¼Œ
                        é€‚ç”¨äºæ²¡æœ‰åŸç”Ÿæ”¯æŒçš„æ¨¡å‹ã€‚
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
ToolStrategy - åŸºäºå·¥å…·è°ƒç”¨
"""
from langchain.agents.structured_output import ToolStrategy

# ä½¿ç”¨ ToolStrategy
response_format = ToolStrategy(schema=ContactInfo)

agent = create_agent(
    model="any-model",  # ä»»ä½•æ”¯æŒå·¥å…·è°ƒç”¨çš„æ¨¡å‹
    response_format=response_format
)</code></pre>
                    </div>

                    <h3 class="subsection-title">3. Auto-Selectionï¼ˆè‡ªåŠ¨é€‰æ‹©ï¼Œæ¨èï¼‰</h3>
                    <p>
                        ç›´æ¥ä¼ å…¥ Schemaï¼ŒLangChain <strong>è‡ªåŠ¨é€‰æ‹©</strong>æœ€ä½³ç­–ç•¥ã€‚
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€ - æ¨è</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
Auto-Selection - æ¨èæ–¹å¼
"""
# âœ… æœ€ç®€å•çš„æ–¹å¼ï¼šç›´æ¥ä¼ å…¥ Pydantic æ¨¡å‹
agent = create_agent(
    model="gpt-4o",
    response_format=ContactInfo  # è‡ªåŠ¨é€‰æ‹©æœ€ä½³ç­–ç•¥
)

# LangChain è‡ªåŠ¨åˆ¤æ–­ï¼š
# - GPT-4o æ”¯æŒåŸç”Ÿ â†’ ä½¿ç”¨ ProviderStrategy
# - å…¶ä»–æ¨¡å‹ â†’ ä½¿ç”¨ ToolStrategy</code></pre>
                    </div>

                    <table>
                        <thead>
                            <tr>
                                <th>ç­–ç•¥</th>
                                <th>é€‚ç”¨åœºæ™¯</th>
                                <th>æ€§èƒ½</th>
                                <th>å…¼å®¹æ€§</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>ProviderStrategy</code></td>
                                <td>OpenAI, Anthropic, Grok</td>
                                <td>âš¡ å¿«é€Ÿ</td>
                                <td>ğŸŸ¡ æœ‰é™</td>
                            </tr>
                            <tr>
                                <td><code>ToolStrategy</code></td>
                                <td>æ‰€æœ‰æ”¯æŒå·¥å…·è°ƒç”¨çš„æ¨¡å‹</td>
                                <td>ğŸŸ¡ ä¸­ç­‰</td>
                                <td>âœ… å¹¿æ³›</td>
                            </tr>
                            <tr>
                                <td>Auto-Selection</td>
                                <td>æ¨èæ–¹å¼</td>
                                <td>âš¡ è‡ªé€‚åº”</td>
                                <td>âœ… æœ€ä½³</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- Schema å®šä¹‰æ–¹æ³• -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“ Schema å®šä¹‰æ–¹æ³•</h2>
                    <p>
                        LangChain æ”¯æŒä¸‰ç§ Schema å®šä¹‰æ–¹å¼ï¼Œ<strong>æ¨èä½¿ç”¨ Pydantic</strong>ï¼š
                    </p>

                    <h3 class="subsection-title">1. Pydantic Modelsï¼ˆæ¨èï¼‰</h3>
                    <p>
                        Pydantic æä¾›å¼ºå¤§çš„éªŒè¯ã€æ–‡æ¡£å’Œ IDE æ”¯æŒã€‚
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
Pydantic Models - å®Œæ•´ç¤ºä¾‹
"""
from pydantic import BaseModel, Field
from typing import Literal

class ProductReview(BaseModel):
    """äº§å“è¯„è®ºåˆ†æ"""

    # å¸¦çº¦æŸçš„å­—æ®µ
    rating: int | None = Field(
        description="è¯„åˆ† 1-5 æ˜Ÿ",
        ge=1,  # å¤§äºç­‰äº 1
        le=5   # å°äºç­‰äº 5
    )

    # ä½¿ç”¨ Literal é™åˆ¶é€‰é¡¹
    sentiment: Literal["positive", "negative", "neutral"] = Field(
        description="æƒ…æ„Ÿå€¾å‘"
    )

    # åˆ—è¡¨ç±»å‹
    key_points: list[str] = Field(
        description="å…³é”®è¦ç‚¹åˆ—è¡¨"
    )

    # å¯é€‰å­—æ®µ
    would_recommend: bool | None = Field(
        default=None,
        description="æ˜¯å¦æ¨èè´­ä¹°"
    )

# ä½¿ç”¨
agent = create_agent(
    model="gpt-4o",
    response_format=ProductReview
)

result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "åˆ†æè¯„è®ºï¼šè¿™ä¸ªäº§å“å¾ˆæ£’ï¼Œ5æ˜Ÿæ¨èï¼è´¨é‡å¥½ï¼Œä»·æ ¼å®æƒ ã€‚"
    }]
})

review = result["structured_response"]
print(f"è¯„åˆ†ï¼š{review.rating}")
print(f"æƒ…æ„Ÿï¼š{review.sentiment}")
print(f"è¦ç‚¹ï¼š{review.key_points}")</code></pre>
                    </div>

                    <h3 class="subsection-title">2. Dataclasses</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
Dataclasses - ç®€å•åœºæ™¯
"""
from dataclasses import dataclass

@dataclass
class EventDetails:
    event_name: str
    date: str
    location: str

agent = create_agent(
    model="gpt-4o",
    response_format=EventDetails
)</code></pre>
                    </div>

                    <h3 class="subsection-title">3. TypedDict</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
TypedDict - å­—å…¸ç±»å‹
"""
from typing import TypedDict, Literal

class MeetingAction(TypedDict):
    task: str
    assignee: str
    priority: Literal["low", "medium", "high"]

agent = create_agent(
    model="gpt-4o",
    response_format=MeetingAction
)</code></pre>
                    </div>
                </section>

                <!-- Union ç±»å‹å’Œå¤šè¾“å‡º -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”€ Union ç±»å‹ - å¤šç§è¾“å‡ºæ ¼å¼</h2>
                    <p>
                        ä½¿ç”¨ <code>Union</code> ç±»å‹è®© Agent æ ¹æ®è¾“å…¥<strong>è‡ªåŠ¨é€‰æ‹©</strong>åˆé€‚çš„è¾“å‡ºæ ¼å¼ï¼š
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
Union ç±»å‹ - æ™ºèƒ½è·¯ç”±
"""
from typing import Union
from pydantic import BaseModel
from langchain.agents.structured_output import ToolStrategy

class SendEmailRequest(BaseModel):
    """å‘é€é‚®ä»¶è¯·æ±‚"""
    recipient: str
    subject: str
    body: str

class ScheduleMeetingRequest(BaseModel):
    """å®‰æ’ä¼šè®®è¯·æ±‚"""
    attendees: list[str]
    title: str
    duration_minutes: int

# ä½¿ç”¨ Union ç±»å‹
response_format = ToolStrategy(
    schema=Union[SendEmailRequest, ScheduleMeetingRequest]
)

agent = create_agent(
    model="gpt-4o",
    response_format=response_format
)

# ç¤ºä¾‹ 1ï¼šå‘é€é‚®ä»¶
result1 = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "å‘é‚®ä»¶ç»™ bob@example.comï¼Œä¸»é¢˜æ˜¯'é¡¹ç›®æ›´æ–°'"
    }]
})

# Agent è‡ªåŠ¨é€‰æ‹© SendEmailRequest
email_request = result1["structured_response"]
print(type(email_request))  # SendEmailRequest

# ç¤ºä¾‹ 2ï¼šå®‰æ’ä¼šè®®
result2 = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "å®‰æ’ä¸€ä¸ª 30 åˆ†é’Ÿçš„ä¼šè®®ï¼Œé‚€è¯· Alice å’Œ Bob"
    }]
})

# Agent è‡ªåŠ¨é€‰æ‹© ScheduleMeetingRequest
meeting_request = result2["structured_response"]
print(type(meeting_request))  # ScheduleMeetingRequest</code></pre>
                    </div>

                    <div class="info-box warning">
                        <div class="info-box-title">âš ï¸ å¤šè¾“å‡ºè‡ªåŠ¨ä¿®æ­£</div>
                        <p>
                            å½“æ¨¡å‹é”™è¯¯è¿”å›<strong>å¤šä¸ªç»“æ„åŒ–è¾“å‡º</strong>æ—¶ï¼ŒAgent ä¼šè‡ªåŠ¨ï¼š
                        </p>
                        <ol>
                            <li>æ£€æµ‹åˆ° <code>MultipleStructuredOutputsError</code></li>
                            <li>æä¾›é”™è¯¯åé¦ˆç»™æ¨¡å‹</li>
                            <li>è‡ªåŠ¨é‡è¯•ï¼Œè¦æ±‚è¿”å›å•ä¸€è¾“å‡º</li>
                        </ol>
                    </div>
                </section>

                <!-- é”™è¯¯å¤„ç†å’ŒéªŒè¯ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ›¡ï¸ é”™è¯¯å¤„ç†å’ŒéªŒè¯</h2>
                    <p>
                        LangChain æä¾›<strong>çµæ´»çš„é”™è¯¯å¤„ç†æœºåˆ¶</strong>ï¼Œ
                        ç¡®ä¿ç»“æ„åŒ–è¾“å‡ºçš„å¯é æ€§ï¼š
                    </p>

                    <h3 class="subsection-title">1. é»˜è®¤é”™è¯¯å¤„ç†ï¼ˆæ¨èï¼‰</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
é»˜è®¤é”™è¯¯å¤„ç† - æ•è·æ‰€æœ‰éªŒè¯é”™è¯¯
"""
from langchain.agents.structured_output import ToolStrategy
from pydantic import BaseModel, Field

class ProductRating(BaseModel):
    rating: int = Field(ge=1, le=5)  # å¿…é¡»åœ¨ 1-5 ä¹‹é—´
    comment: str

response_format = ToolStrategy(
    schema=ProductRating,
    handle_errors=True  # é»˜è®¤å€¼ï¼Œæ•è·æ‰€æœ‰é”™è¯¯å¹¶è‡ªåŠ¨é‡è¯•
)

agent = create_agent(
    model="gpt-4o",
    response_format=response_format
)

# å½“æ¨¡å‹è¿”å› rating=6 æ—¶ï¼Œè‡ªåŠ¨é‡è¯•
result = agent.invoke({
    "messages": [{"role": "user", "content": "è¯„åˆ†è¿™ä¸ªäº§å“"}]
})</code></pre>
                    </div>

                    <h3 class="subsection-title">2. è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯
"""
response_format = ToolStrategy(
    schema=ProductRating,
    handle_errors="è¯„åˆ†å¿…é¡»åœ¨ 1-5 ä¹‹é—´ï¼Œå¹¶ä¸”å¿…é¡»æä¾›è¯„è®ºã€‚è¯·é‡æ–°ç”Ÿæˆã€‚"
)

# éªŒè¯å¤±è´¥æ—¶ï¼Œæ¨¡å‹ä¼šæ”¶åˆ°è¿™æ¡è‡ªå®šä¹‰æ¶ˆæ¯</code></pre>
                    </div>

                    <h3 class="subsection-title">3. ç‰¹å®šå¼‚å¸¸å¤„ç†</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
åªå¤„ç†ç‰¹å®šå¼‚å¸¸
"""
response_format = ToolStrategy(
    schema=ProductRating,
    handle_errors=(ValueError, TypeError)  # åªé‡è¯•è¿™äº›å¼‚å¸¸
)

# å…¶ä»–å¼‚å¸¸ä¼šä¼ æ’­åˆ°è°ƒç”¨æ–¹</code></pre>
                    </div>

                    <h3 class="subsection-title">4. è‡ªå®šä¹‰é”™è¯¯å¤„ç†å‡½æ•°</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
è‡ªå®šä¹‰é”™è¯¯å¤„ç†å‡½æ•°
"""
from langchain.agents.structured_output import (
    StructuredOutputValidationError,
    MultipleStructuredOutputsError
)

def custom_error_handler(error: Exception) -> str:
    """è‡ªå®šä¹‰é”™è¯¯å¤„ç†é€»è¾‘"""

    if isinstance(error, StructuredOutputValidationError):
        # å­—æ®µéªŒè¯å¤±è´¥
        return f"æ ¼å¼é”™è¯¯ï¼š{error}ã€‚è¯·æŒ‰ç…§æ­£ç¡®çš„æ ¼å¼é‡æ–°ç”Ÿæˆã€‚"

    elif isinstance(error, MultipleStructuredOutputsError):
        # è¿”å›äº†å¤šä¸ªè¾“å‡º
        return "ä½ è¿”å›äº†å¤šä¸ªè¾“å‡ºï¼Œä½†åªéœ€è¦ä¸€ä¸ªã€‚è¯·é€‰æ‹©æœ€ç›¸å…³çš„è¾“å‡ºã€‚"

    else:
        # å…¶ä»–é”™è¯¯
        return f"å‘ç”Ÿé”™è¯¯ï¼š{str(error)}ã€‚è¯·é‡è¯•ã€‚"

response_format = ToolStrategy(
    schema=Union[SendEmailRequest, ScheduleMeetingRequest],
    handle_errors=custom_error_handler
)

agent = create_agent(
    model="gpt-4o",
    response_format=response_format
)</code></pre>
                    </div>

                    <h3 class="subsection-title">5. ç¦ç”¨é”™è¯¯å¤„ç†ï¼ˆå¿«é€Ÿå¤±è´¥ï¼‰</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
ç¦ç”¨é”™è¯¯å¤„ç† - æ‰€æœ‰å¼‚å¸¸ç›´æ¥æŠ›å‡º
"""
response_format = ToolStrategy(
    schema=ProductRating,
    handle_errors=False  # ä¸è‡ªåŠ¨é‡è¯•
)

# éªŒè¯å¤±è´¥æ—¶ç«‹å³æŠ›å‡ºå¼‚å¸¸</code></pre>
                    </div>
                </section>

                <!-- å®æˆ˜ç”¨ä¾‹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸš€ å®æˆ˜ç”¨ä¾‹</h2>

                    <h3 class="subsection-title">ç”¨ä¾‹ 1ï¼šå‘ç¥¨æ•°æ®æå–</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§ - å®Œæ•´ç¤ºä¾‹</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
å®æˆ˜ç”¨ä¾‹ 1ï¼šå‘ç¥¨æ•°æ®æå–
"""
from pydantic import BaseModel, Field
from langchain.agents import create_agent

class InvoiceData(BaseModel):
    """å‘ç¥¨æ•°æ®ç»“æ„"""
    invoice_id: str = Field(description="å‘ç¥¨ç¼–å·")
    amount: float = Field(description="æ€»é‡‘é¢", gt=0)
    vendor: str = Field(description="ä¾›åº”å•†åç§°")
    date: str = Field(description="æ—¥æœŸï¼Œæ ¼å¼ YYYY-MM-DD")
    items: list[str] = Field(description="å•†å“åˆ—è¡¨")

agent = create_agent(
    model="gpt-4o",
    response_format=InvoiceData
)

# ä»æ–‡æœ¬ä¸­æå–å‘ç¥¨ä¿¡æ¯
invoice_text = """
å‘ç¥¨ç¼–å·ï¼šINV-2024-001
æ—¥æœŸï¼š2024-01-15
ä¾›åº”å•†ï¼šABC å…¬å¸
å•†å“ï¼šç¬”è®°æœ¬ç”µè„‘ x1ã€é¼ æ ‡ x2ã€é”®ç›˜ x1
æ€»é‡‘é¢ï¼š5,800 å…ƒ
"""

result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": f"æå–å‘ç¥¨ä¿¡æ¯ï¼š\n{invoice_text}"
    }]
})

invoice = result["structured_response"]
print(f"å‘ç¥¨å·ï¼š{invoice.invoice_id}")
print(f"é‡‘é¢ï¼š{invoice.amount}")
print(f"ä¾›åº”å•†ï¼š{invoice.vendor}")
print(f"å•†å“ï¼š{invoice.items}")

# ç›´æ¥æ’å…¥æ•°æ®åº“
# db.invoices.insert(invoice.model_dump())</code></pre>
                    </div>

                    <h3 class="subsection-title">ç”¨ä¾‹ 2ï¼šè¡¨å•è‡ªåŠ¨å¡«å……</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
å®æˆ˜ç”¨ä¾‹ 2ï¼šç”¨æˆ·æ³¨å†Œè¡¨å•è‡ªåŠ¨å¡«å……
"""
from pydantic import BaseModel, Field, EmailStr

class UserProfile(BaseModel):
    """ç”¨æˆ·èµ„æ–™"""
    first_name: str = Field(description="å")
    last_name: str = Field(description="å§“")
    email: EmailStr = Field(description="æœ‰æ•ˆçš„é‚®ç®±åœ°å€")
    age: int = Field(description="å¹´é¾„", ge=18, le=120)
    preferences: list[str] = Field(description="å…´è¶£çˆ±å¥½")

agent = create_agent(
    model="gpt-4o",
    response_format=UserProfile
)

# ä»å¯¹è¯ä¸­æå–ç”¨æˆ·ä¿¡æ¯
result = agent.invoke({
    "messages": [
        {"role": "user", "content": "æˆ‘å«æå"},
        {"role": "assistant", "content": "ä½ å¥½æåï¼"},
        {"role": "user", "content": "æˆ‘ 25 å²ï¼Œé‚®ç®±æ˜¯ lihua@example.com"},
        {"role": "user", "content": "æˆ‘å–œæ¬¢ç¼–ç¨‹ã€é˜…è¯»å’Œæ—…æ¸¸"}
    ]
})

profile = result["structured_response"]
# è‡ªåŠ¨å¡«å……è¡¨å•
form_data = profile.model_dump()
print(form_data)
# {
#     "first_name": "å",
#     "last_name": "æ",
#     "email": "lihua@example.com",
#     "age": 25,
#     "preferences": ["ç¼–ç¨‹", "é˜…è¯»", "æ—…æ¸¸"]
# }</code></pre>
                    </div>

                    <h3 class="subsection-title">ç”¨ä¾‹ 3ï¼šæ™ºèƒ½ API è·¯ç”±</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
å®æˆ˜ç”¨ä¾‹ 3ï¼šåŸºäºæ„å›¾çš„ API è·¯ç”±
"""
from typing import Union
from pydantic import BaseModel

class SearchQuery(BaseModel):
    """æœç´¢è¯·æ±‚"""
    query: str
    filters: dict = {}

class CreateOrder(BaseModel):
    """åˆ›å»ºè®¢å•"""
    product_id: str
    quantity: int

class CustomerSupport(BaseModel):
    """å®¢æœå’¨è¯¢"""
    category: str
    message: str

# Union ç±»å‹è‡ªåŠ¨è·¯ç”±
agent = create_agent(
    model="gpt-4o",
    response_format=Union[SearchQuery, CreateOrder, CustomerSupport]
)

# æ ¹æ®ç”¨æˆ·æ„å›¾è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ API
def handle_user_request(user_input: str):
    result = agent.invoke({
        "messages": [{"role": "user", "content": user_input}]
    })

    request = result["structured_response"]

    # æ ¹æ®ç±»å‹è°ƒç”¨ä¸åŒçš„ API
    if isinstance(request, SearchQuery):
        return search_api(request.query, request.filters)
    elif isinstance(request, CreateOrder):
        return order_api(request.product_id, request.quantity)
    elif isinstance(request, CustomerSupport):
        return support_api(request.category, request.message)

# ç¤ºä¾‹
handle_user_request("æœç´¢è“è‰²çš„è¡¬è¡«")  # â†’ SearchQuery
handle_user_request("è´­ä¹° 2 ä»¶ äº§å“ID-123")  # â†’ CreateOrder
handle_user_request("æˆ‘çš„è®¢å•è¿˜æ²¡åˆ°")  # â†’ CustomerSupport</code></pre>
                    </div>
                </section>

                <!-- æœ€ä½³å®è·µ -->
                <section class="content-section">
                    <h2 class="section-title">âœ¨ æœ€ä½³å®è·µ</h2>

                    <h3 class="subsection-title">1. Schema è®¾è®¡</h3>
                    <ul>
                        <li><strong>ä½¿ç”¨æè¿°æ€§çš„å­—æ®µæ–‡æ¡£</strong>ï¼šé€šè¿‡ <code>Field(description="...")</code> å¸®åŠ©æ¨¡å‹ç†è§£å­—æ®µå«ä¹‰</li>
                        <li><strong>æ·»åŠ çº¦æŸ</strong>ï¼šä½¿ç”¨ <code>ge</code>ã€<code>le</code>ã€<code>min_length</code> ç­‰çº¦æŸ</li>
                        <li><strong>ä½¿ç”¨ Literal ç±»å‹</strong>ï¼šé™åˆ¶æšä¸¾å€¼ï¼Œå¦‚ <code>Literal["low", "medium", "high"]</code></li>
                        <li><strong>è®¾ç½®å¯é€‰å­—æ®µ</strong>ï¼šä½¿ç”¨ <code>| None</code> å’Œ <code>default=None</code> æä¾›çµæ´»æ€§</li>
                    </ul>

                    <h3 class="subsection-title">2. é”™è¯¯å¤„ç†</h3>
                    <ul>
                        <li><strong>é»˜è®¤ <code>handle_errors=True</code> é€‚ç”¨äºå¤§å¤šæ•°åœºæ™¯</strong></li>
                        <li><strong>è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯</strong>ç”¨äºé¢†åŸŸç‰¹å®šçš„é”™è¯¯æç¤º</li>
                        <li><strong>ç¦ç”¨é‡è¯•</strong>ä»…åœ¨éœ€è¦å¿«é€Ÿå¤±è´¥æ—¶ä½¿ç”¨</li>
                    </ul>

                    <h3 class="subsection-title">3. æ€§èƒ½ä¼˜åŒ–</h3>
                    <ul>
                        <li><strong>ä¼˜å…ˆä½¿ç”¨åŸç”Ÿç­–ç•¥</strong>ï¼šProviderStrategy é€Ÿåº¦æ›´å¿«ã€æ›´å¯é </li>
                        <li><strong>å·¥å…·ç­–ç•¥</strong>é€‚ç”¨äºé€šç”¨åœºæ™¯ï¼Œä½†éœ€è¦é‡è¯•é€»è¾‘</li>
                        <li><strong>Union ç±»å‹</strong>ç”¨äºå¤æ‚åˆ†ç±»ä»»åŠ¡</li>
                    </ul>

                    <h3 class="subsection-title">4. OpenAI Strict Modeï¼ˆlangchain>=1.2ï¼‰</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
OpenAI Strict Mode - æ›´ä¸¥æ ¼çš„ Schema çº¦æŸ
"""
response_format = ProviderStrategy(
    schema=ProductReview,
    strict=True  # å¼ºåˆ¶ä¸¥æ ¼éµå®ˆ Schema
)

agent = create_agent(
    model="gpt-4o",
    response_format=response_format
)</code></pre>
                    </div>
                </section>

                <!-- å¸¸è§é—®é¢˜ -->
                <section class="content-section">
                    <h2 class="section-title">â“ å¸¸è§é—®é¢˜</h2>

                    <h3 class="subsection-subtitle">Q1: ç»“æ„åŒ–è¾“å‡ºæ”¯æŒå“ªäº›æ¨¡å‹ï¼Ÿ</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>æä¾›å•†</th>
                                <th>åŸç”Ÿæ”¯æŒï¼ˆProviderStrategyï¼‰</th>
                                <th>å·¥å…·æ”¯æŒï¼ˆToolStrategyï¼‰</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>OpenAI</td>
                                <td>âœ… GPT-4, GPT-3.5</td>
                                <td>âœ… æ‰€æœ‰æ¨¡å‹</td>
                            </tr>
                            <tr>
                                <td>Anthropic</td>
                                <td>âœ… Claude 3+</td>
                                <td>âœ… æ‰€æœ‰æ¨¡å‹</td>
                            </tr>
                            <tr>
                                <td>Google</td>
                                <td>âŒ</td>
                                <td>âœ… Gemini</td>
                            </tr>
                            <tr>
                                <td>Grok</td>
                                <td>âœ… Grok</td>
                                <td>âœ… æ‰€æœ‰æ¨¡å‹</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 class="subsection-subtitle">Q2: å¦‚ä½•è°ƒè¯•ç»“æ„åŒ–è¾“å‡ºï¼Ÿ</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># 1. æŸ¥çœ‹å®Œæ•´çš„æ¶ˆæ¯å†å²
result = agent.invoke({...})
for msg in result["messages"]:
    print(msg)

# 2. å¯ç”¨ LangSmith è¿½è¸ª
import os
os.environ["LANGCHAIN_TRACING_V2"] = "true"</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q3: Union ç±»å‹çš„æœ€ä½³å®è·µï¼Ÿ</h3>
                    <p>
                        Union ç±»å‹é€‚ç”¨äº<strong>æ„å›¾åˆ†ç±»</strong>åœºæ™¯ï¼Œä½†ä¸è¦æ»¥ç”¨ï¼š
                    </p>
                    <ul>
                        <li>âœ… å¥½ï¼š2-3 ç§æ˜ç¡®åŒºåˆ†çš„ç±»å‹ï¼ˆå¦‚ Email vs Meetingï¼‰</li>
                        <li>âŒ åï¼š5+ ç§ç±»å‹ï¼ˆå®¹æ˜“æ··æ·†ï¼Œå»ºè®®æ‹†åˆ†ï¼‰</li>
                    </ul>

                    <h3 class="subsection-subtitle">Q4: ç»“æ„åŒ–è¾“å‡ºä¼šå¢åŠ æˆæœ¬å—ï¼Ÿ</h3>
                    <p>
                        <strong>ProviderStrategy</strong>ï¼šå‡ ä¹æ— é¢å¤–æˆæœ¬<br/>
                        <strong>ToolStrategy</strong>ï¼šéœ€è¦é¢å¤–çš„å·¥å…·è°ƒç”¨è½®æ¬¡ï¼Œå¯èƒ½å¢åŠ  10-20% æˆæœ¬
                    </p>

                    <h3 class="subsection-subtitle">Q5: å¦‚ä½•å¤„ç†åµŒå¥—çš„ç»“æ„åŒ–è¾“å‡ºï¼Ÿ</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">class Address(BaseModel):
    street: str
    city: str
    country: str

class Person(BaseModel):
    name: str
    addresses: list[Address]  # åµŒå¥—æ¨¡å‹

agent = create_agent(
    model="gpt-4o",
    response_format=Person
)</code></pre>
                    </div>
                </section>

                <!-- å‚è€ƒèµ„æº -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“– å‚è€ƒèµ„æº</h2>
                    <ul>
                        <li>
                            <a href="https://docs.langchain.com/oss/python/langchain/structured-output" target="_blank">
                                LangChain ç»“æ„åŒ–è¾“å‡ºå®˜æ–¹æ–‡æ¡£
                            </a>
                        </li>
                        <li>
                            <a href="https://docs.pydantic.dev/" target="_blank">
                                Pydantic å®˜æ–¹æ–‡æ¡£
                            </a>
                        </li>
                        <li>
                            <a href="06-agents.html">
                                Agent åŸºç¡€ - create_agent() è¯¦è§£
                            </a>
                        </li>
                        <li>
                            <a href="https://platform.openai.com/docs/guides/structured-outputs" target="_blank">
                                OpenAI Structured Outputs æŒ‡å—
                            </a>
                        </li>
                    </ul>
                </section>

                <!-- é¡µé¢å¯¼èˆª -->
                                <nav class="page-navigation">
                    <a href="22-migration.html" class="nav-button prev">
                        â† ä¸Šä¸€é¡µ:è¿ç§»æŒ‡å—
                    </a>
                    <a href="24-deepagents-quickstart.html" class="nav-button next">
                        ä¸‹ä¸€é¡µ:å¿«é€Ÿå¼€å§‹ â†’
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" aria-label="è¿”å›é¡¶éƒ¨">â†‘</button>

    <!-- JavaScript -->
    <script src="assets/js/mermaid-init.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</body>
</html>
