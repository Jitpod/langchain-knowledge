<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LangChain Expression Language (LCEL) - å£°æ˜å¼ç»„åˆå’Œé“¾å¼è°ƒç”¨">
    <title>LCEL è¡¨è¾¾å¼ | LangChain 1.0 Python çŸ¥è¯†æ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <button class="mobile-menu-button" aria-label="æ‰“å¼€èœå•">â˜°</button>

    <div class="container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">ğŸ¦œ LangChain 1.0</h1>
                <p class="sidebar-subtitle">Python å®Œæ•´å­¦ä¹ æŒ‡å—</p>
            </div>

            <ul class="nav-menu">
                <li class="nav-section">
                    <div class="nav-section-title">å¼€å§‹</div>
                    <ul>
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <span class="nav-icon">ğŸ </span>
                                ä¸»é¡µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">åŸºç¡€ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="01-introduction.html" class="nav-link">
                                <span class="nav-icon">ğŸ“–</span>
                                LangChain ç®€ä»‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="02-architecture.html" class="nav-link">
                                <span class="nav-icon">ğŸ—ï¸</span>
                                æ ¸å¿ƒæ¶æ„
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="03-models.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤–</span>
                                æ¨¡å‹æ¥å£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="04-messages.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¬</span>
                                æ¶ˆæ¯ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="05-tools.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                å·¥å…·ç³»ç»Ÿ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">è¿›é˜¶ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="06-agents.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                Agent åŸºç¡€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="07-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="08-rag.html" class="nav-link">
                                <span class="nav-icon">ğŸ”</span>
                                RAG è¯¦è§£
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a href="09-lcel.html" class="nav-link">
                                <span class="nav-icon">ğŸ”—</span>
                                LCEL è¡¨è¾¾å¼
                            </a>
                        </li>
                    </ul>
                </li>

                                <li class="nav-section">
                    <div class="nav-section-title">é«˜çº§åº”ç”¨</div>
                    <ul>
                        <li class="nav-item">
                            <a href="10-runtime.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                Runtime ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="11-checkpointer.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¾</span>
                                æŒä¹…åŒ–ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="12-streaming.html" class="nav-link">
                                <span class="nav-icon">ğŸŒŠ</span>
                                æµå¼è¾“å‡º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="13-human-in-loop.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="14-long-term-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ—„ï¸</span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="15-langgraph.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                LangGraph
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="16-context-engineering.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                ä¸Šä¸‹æ–‡å·¥ç¨‹
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="17-mcp.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                MCP åè®®
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">å®æˆ˜ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="18-customer-service.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å®¢æœæœºå™¨äºº
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="19-best-practices.html" class="nav-link">
                                <span class="nav-icon">âœ¨</span>
                                æœ€ä½³å®è·µ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="38-chat.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¬</span>
                                åœ¨çº¿å¯¹è¯åŠ©æ‰‹
                                <span class="nav-badge">NEW</span>
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">å‚è€ƒç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="20-api-reference.html" class="nav-link">
                                <span class="nav-icon">ğŸ“š</span>
                                API é€ŸæŸ¥è¡¨
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="21-troubleshooting.html" class="nav-link">
                                <span class="nav-icon">ğŸ›</span>
                                æ•…éšœæ’é™¤
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="22-migration.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                è¿ç§»æŒ‡å—
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">æ‰©å±•ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="23-structured-output.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                ç»“æ„åŒ–è¾“å‡º
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">DeepAgents ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="24-deepagents-quickstart.html" class="nav-link">
                                <span class="nav-icon">ğŸš€</span>
                                å¿«é€Ÿå¼€å§‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="25-deepagents-customization.html" class="nav-link">
                                <span class="nav-icon">ğŸ¨</span>
                                å®šåˆ¶åŒ–
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="26-deepagents-harness.html" class="nav-link">
                                <span class="nav-icon">ğŸ›ï¸</span>
                                Harness ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="27-deepagents-backends.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                åç«¯é…ç½®
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="28-deepagents-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="29-deepagents-hitl.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="30-deepagents-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ§ </span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="31-deepagents-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">Multi-Agent ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="32-multi-agent-index.html" class="nav-link">
                                <span class="nav-icon">ğŸŒ</span>
                                æ¦‚è¿°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="33-multi-agent-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="34-multi-agent-handoffs.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                äº¤æ¥æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="35-multi-agent-skills.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                æŠ€èƒ½ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="36-multi-agent-router.html" class="nav-link">
                                <span class="nav-icon">ğŸ§­</span>
                                è·¯ç”±æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="37-multi-agent-workflow.html" class="nav-link">
                                <span class="nav-icon">ğŸ”€</span>
                                è‡ªå®šä¹‰å·¥ä½œæµ
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                <nav class="breadcrumb">
                    <span class="breadcrumb-item">
                        <a href="index.html" class="breadcrumb-link">ä¸»é¡µ</a>
                    </span>
                    <span class="breadcrumb-item">
                        è¿›é˜¶ç¯‡
                    </span>
                    <span class="breadcrumb-item">
                        LCEL è¡¨è¾¾å¼
                    </span>
                </nav>

                <!-- é¡µé¢æ ‡é¢˜ -->
                <header class="page-header">
                    <h1 class="page-title">ğŸ”— LangChain Expression Language (LCEL)</h1>
                    <p class="page-subtitle">
                        å£°æ˜å¼ç»„åˆè¯­è¨€ï¼Œä½¿ç”¨ç®¡é“æ“ä½œç¬¦æ„å»ºå¼ºå¤§çš„æ•°æ®å¤„ç†é“¾å’Œ AI å·¥ä½œæµã€‚
                    </p>
                </header>

                <!-- ä»€ä¹ˆæ˜¯ LCEL -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“š ä»€ä¹ˆæ˜¯ LCELï¼Ÿ</h2>
                    <p>
                        <strong>LCEL (LangChain Expression Language)</strong> æ˜¯ LangChain çš„å£°æ˜å¼ç»„åˆè¯­è¨€ï¼Œ
                        å…è®¸ä½ ä½¿ç”¨<strong>ç®¡é“æ“ä½œç¬¦ <code>|</code></strong> è½»æ¾ç»„åˆå„ç§ç»„ä»¶ã€‚
                    </p>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ’¡ LCEL çš„æ ¸å¿ƒä¼˜åŠ¿</div>
                        <table style="margin-top: 0.5rem;">
                            <thead>
                                <tr>
                                    <th>ç‰¹æ€§</th>
                                    <th>è¯´æ˜</th>
                                    <th>ç¤ºä¾‹</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>ç®€æ´è¯­æ³•</strong></td>
                                    <td>ä½¿ç”¨ | æ“ä½œç¬¦é“¾å¼ç»„åˆ</td>
                                    <td><code>prompt | model | parser</code></td>
                                </tr>
                                <tr>
                                    <td><strong>æµå¼ä¼˜å…ˆ</strong></td>
                                    <td>è‡ªåŠ¨æ”¯æŒæµå¼è¾“å‡º</td>
                                    <td>æ— éœ€é¢å¤–é…ç½®å³å¯æµå¼å¤„ç†</td>
                                </tr>
                                <tr>
                                    <td><strong>å¹¶è¡Œæ‰§è¡Œ</strong></td>
                                    <td>RunnableParallel å¹¶å‘å¤„ç†</td>
                                    <td>åŒæ—¶è°ƒç”¨å¤šä¸ªæ¨¡å‹æˆ–å·¥å…·</td>
                                </tr>
                                <tr>
                                    <td><strong>ç±»å‹å®‰å…¨</strong></td>
                                    <td>ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥</td>
                                    <td>IDE è‡ªåŠ¨è¡¥å…¨å’Œé”™è¯¯æç¤º</td>
                                </tr>
                                <tr>
                                    <td><strong>å¯è¿½è¸ªæ€§</strong></td>
                                    <td>LangSmith è‡ªåŠ¨è¿½è¸ª</td>
                                    <td>æ— éœ€æ‰‹åŠ¨æ’æ¡©</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
LCEL åŸºç¡€ç¤ºä¾‹ - ç®€å•çš„é“¾å¼è°ƒç”¨
"""
from langchain_core.prompts import ChatPromptTemplate
from langchain import init_chat_model

# åˆ›å»ºæç¤ºè¯æ¨¡æ¿
prompt = ChatPromptTemplate.from_template("ç¿»è¯‘æˆè‹±æ–‡ï¼š{text}")

# åˆ›å»ºæ¨¡å‹
model = init_chat_model("gpt-4o", model_provider="openai")

# ä½¿ç”¨ç®¡é“æ“ä½œç¬¦ç»„åˆ
chain = prompt | model

# è°ƒç”¨é“¾
result = chain.invoke({"text": "ä½ å¥½ä¸–ç•Œ"})
print(result.content)
# è¾“å‡ºï¼šHello World</code></pre>
                    </div>
                </section>

                <!-- LCEL vs ä¼ ç»Ÿé“¾ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ†š LCEL vs ä¼ ç»Ÿé“¾</h2>
                    <p>
                        LCEL åœ¨ LangChain 1.0 ä¸­<strong>æ›¿ä»£äº†ä¼ ç»Ÿçš„ LLMChain</strong>ï¼Œ
                        æä¾›æ›´ç®€æ´ã€æ›´å¼ºå¤§çš„ç»„åˆæ–¹å¼ï¼š
                    </p>

                    <table>
                        <thead>
                            <tr>
                                <th>å¯¹æ¯”é¡¹</th>
                                <th>ä¼ ç»Ÿé“¾ï¼ˆ0.xï¼‰</th>
                                <th>LCELï¼ˆ1.0ï¼‰</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>è¯­æ³•</strong></td>
                                <td>æ˜¾å¼ç±»å®ä¾‹åŒ–</td>
                                <td>ç®¡é“æ“ä½œç¬¦ <code>|</code></td>
                            </tr>
                            <tr>
                                <td><strong>æµå¼è¾“å‡º</strong></td>
                                <td>éœ€è¦æ‰‹åŠ¨é…ç½®</td>
                                <td>è‡ªåŠ¨æ”¯æŒ</td>
                            </tr>
                            <tr>
                                <td><strong>å¹¶è¡Œæ‰§è¡Œ</strong></td>
                                <td>ä¸æ”¯æŒ</td>
                                <td>RunnableParallel</td>
                            </tr>
                            <tr>
                                <td><strong>ä»£ç é‡</strong></td>
                                <td>è¾ƒå¤šï¼ˆ5-10 è¡Œï¼‰</td>
                                <td>æç®€ï¼ˆ1-3 è¡Œï¼‰</td>
                            </tr>
                            <tr>
                                <td><strong>è°ƒè¯•è¿½è¸ª</strong></td>
                                <td>æ‰‹åŠ¨é…ç½®å›è°ƒ</td>
                                <td>è‡ªåŠ¨ LangSmith é›†æˆ</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
å¯¹æ¯”ï¼šä¼ ç»Ÿé“¾ vs LCEL
"""
from langchain_core.prompts import ChatPromptTemplate
from langchain import init_chat_model

model = init_chat_model("gpt-4o", model_provider="openai")
prompt = ChatPromptTemplate.from_template("æ€»ç»“ï¼š{text}")

# âŒ ä¼ ç»Ÿæ–¹å¼ï¼ˆ0.xï¼Œå·²åºŸå¼ƒï¼‰
from langchain_classic.chains import LLMChain

chain = LLMChain(llm=model, prompt=prompt)
result = chain.run(text="LangChain æ˜¯ä¸€ä¸ª...")  # å¤æ‚ä¸”ä¸çµæ´»

# âœ… LCEL æ–¹å¼ï¼ˆ1.0ï¼Œæ¨èï¼‰
chain = prompt | model
result = chain.invoke({"text": "LangChain æ˜¯ä¸€ä¸ª..."})  # ç®€æ´ä¸”å¼ºå¤§</code></pre>
                    </div>
                </section>

                <!-- ç®¡é“æ“ä½œç¬¦è¯¦è§£ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”€ ç®¡é“æ“ä½œç¬¦ | è¯¦è§£</h2>
                    <p>
                        ç®¡é“æ“ä½œç¬¦ <code>|</code> æ˜¯ LCEL çš„æ ¸å¿ƒï¼Œå®ƒå°†å‰ä¸€ä¸ªç»„ä»¶çš„<strong>è¾“å‡º</strong>
                        ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç»„ä»¶çš„<strong>è¾“å…¥</strong>ã€‚
                    </p>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph LR
    Input["è¾“å…¥<br/>dict: text"] --> Prompt["ChatPromptTemplate<br/>prompt"]
    Prompt --> Model["ChatModel<br/>model"]
    Model --> Parser["OutputParser<br/>parser"]
    Parser --> Output["è¾“å‡º<br/>è§£æåçš„ç»“æœ"]

    Input -.->|invoke| Prompt
    Prompt -.->|messages| Model
    Model -.->|AIMessage| Parser
    Parser -.->|parsed data| Output

    style Input fill:#e0e0e0,color:#000
    style Prompt fill:#3b82f6,color:#fff
    style Model fill:#10b981,color:#fff
    style Parser fill:#f59e0b,color:#fff
    style Output fill:#8b5cf6,color:#fff
                        </div>
                    </div>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
ç®¡é“æ“ä½œç¬¦ - å¤šæ­¥éª¤é“¾
"""
from langchain_core.prompts import ChatPromptTemplate
from langchain_core.output_parsers import StrOutputParser
from langchain import init_chat_model

# æ­¥éª¤ 1ï¼šæç¤ºè¯
prompt = ChatPromptTemplate.from_template(
    "å°†ä»¥ä¸‹æ–‡æœ¬ç¿»è¯‘æˆ{language}ï¼š\n\n{text}"
)

# æ­¥éª¤ 2ï¼šæ¨¡å‹
model = init_chat_model("gpt-4o", model_provider="openai")

# æ­¥éª¤ 3ï¼šè¾“å‡ºè§£æå™¨
parser = StrOutputParser()

# ç»„åˆæˆé“¾ï¼ˆ3 ä¸ªæ­¥éª¤ï¼‰
translation_chain = prompt | model | parser

# æ‰§è¡Œé“¾
result = translation_chain.invoke({
    "language": "è‹±æ–‡",
    "text": "ä»Šå¤©å¤©æ°”ä¸é”™"
})

print(result)
# è¾“å‡ºï¼šThe weather is nice today</code></pre>
                    </div>

                    <div class="info-box tip">
                        <div class="info-box-title">âœ¨ ç®¡é“æ“ä½œç¬¦çš„é­”æ³•</div>
                        <p>
                            ç®¡é“æ“ä½œç¬¦èƒŒåçš„åŸç†æ˜¯ <strong>Runnable åè®®</strong>ã€‚
                            æ‰€æœ‰å®ç°äº† <code>Runnable</code> æ¥å£çš„ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨ <code>|</code> ç»„åˆã€‚
                        </p>
                        <ul>
                            <li><code>ChatPromptTemplate</code> â†’ Runnable</li>
                            <li><code>ChatModel</code> â†’ Runnable</li>
                            <li><code>OutputParser</code> â†’ Runnable</li>
                            <li><code>RunnableLambda</code> â†’ è‡ªå®šä¹‰ Runnable</li>
                        </ul>
                    </div>
                </section>

                <!-- RunnableLambda è‡ªå®šä¹‰é€»è¾‘ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”§ RunnableLambda - è‡ªå®šä¹‰é€»è¾‘</h2>
                    <p>
                        <code>RunnableLambda</code> å…è®¸ä½ åœ¨é“¾ä¸­<strong>æ’å…¥è‡ªå®šä¹‰ Python å‡½æ•°</strong>ï¼Œ
                        ç”¨äºæ•°æ®è½¬æ¢ã€æ¡ä»¶é€»è¾‘æˆ–å‰¯ä½œç”¨æ“ä½œã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
RunnableLambda - åœ¨é“¾ä¸­æ’å…¥è‡ªå®šä¹‰å‡½æ•°
"""
from langchain_core.runnables import RunnableLambda
from langchain_core.prompts import ChatPromptTemplate
from langchain import init_chat_model

model = init_chat_model("gpt-4o", model_provider="openai")

# è‡ªå®šä¹‰å‡½æ•°ï¼šå°†æ¨¡å‹è¾“å‡ºè½¬æ¢ä¸ºå¤§å†™
def to_uppercase(ai_message):
    """å°† AIMessage çš„ content è½¬æ¢ä¸ºå¤§å†™"""
    return ai_message.content.upper()

# è‡ªå®šä¹‰å‡½æ•°ï¼šæ·»åŠ å‰ç¼€
def add_prefix(text):
    """æ·»åŠ å‰ç¼€"""
    return f"ğŸ“Œ å¤„ç†ç»“æœï¼š{text}"

# æ„å»ºé“¾
prompt = ChatPromptTemplate.from_template("ç”¨ä¸€å¥è¯ä»‹ç»ï¼š{topic}")

chain = (
    prompt
    | model
    | RunnableLambda(to_uppercase)     # è½¬å¤§å†™
    | RunnableLambda(add_prefix)       # æ·»åŠ å‰ç¼€
)

result = chain.invoke({"topic": "Python"})
print(result)
# è¾“å‡ºï¼šğŸ“Œ å¤„ç†ç»“æœï¼šPYTHON IS A HIGH-LEVEL PROGRAMMING LANGUAGE...</code></pre>
                    </div>

                    <h3 class="subsection-title">RunnableLambda å¸¸è§ç”¨é€”</h3>
                    <ul>
                        <li><strong>æ•°æ®è½¬æ¢</strong>ï¼šæ ¼å¼åŒ–ã€æ¸…æ´—ã€æå–å­—æ®µ</li>
                        <li><strong>æ—¥å¿—è®°å½•</strong>ï¼šæ‰“å°ä¸­é—´ç»“æœç”¨äºè°ƒè¯•</li>
                        <li><strong>æ¡ä»¶åˆ†æ”¯</strong>ï¼šæ ¹æ®è¾“å…¥é€‰æ‹©ä¸åŒçš„å¤„ç†è·¯å¾„</li>
                        <li><strong>å‰¯ä½œç”¨</strong>ï¼šä¿å­˜åˆ°æ•°æ®åº“ã€å‘é€é€šçŸ¥</li>
                    </ul>
                </section>

                <!-- RunnablePassthrough æ•°æ®ä¼ é€’ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”„ RunnablePassthrough - æ•°æ®ä¼ é€’</h2>
                    <p>
                        <code>RunnablePassthrough</code> ç”¨äºåœ¨é“¾ä¸­<strong>é€ä¼ æ•°æ®</strong>ï¼Œ
                        å¸¸ç”¨äºéœ€è¦ä¿ç•™åŸå§‹è¾“å…¥æˆ–åˆå¹¶å¤šä¸ªæ•°æ®æºçš„åœºæ™¯ã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
RunnablePassthrough - ä¿ç•™åŸå§‹è¾“å…¥
"""
from langchain_core.runnables import RunnablePassthrough
from langchain_core.prompts import ChatPromptTemplate
from langchain import init_chat_model

model = init_chat_model("gpt-4o", model_provider="openai")

# åœºæ™¯ï¼šæˆ‘ä»¬æƒ³åœ¨æœ€ç»ˆç»“æœä¸­åŒæ—¶åŒ…å«åŸå§‹é—®é¢˜å’Œ AI å›ç­”
prompt = ChatPromptTemplate.from_template("å›ç­”é—®é¢˜ï¼š{question}")

chain = (
    # ä½¿ç”¨å­—å…¸ä¿ç•™åŸå§‹è¾“å…¥
    {
        "question": RunnablePassthrough(),  # é€ä¼ åŸå§‹é—®é¢˜
        "answer": prompt | model            # ç”Ÿæˆç­”æ¡ˆ
    }
)

result = chain.invoke("ä»€ä¹ˆæ˜¯é‡å­è®¡ç®—ï¼Ÿ")
print(f"é—®é¢˜ï¼š{result['question']}")
print(f"ç­”æ¡ˆï¼š{result['answer'].content}")

# è¾“å‡ºï¼š
# é—®é¢˜ï¼šä»€ä¹ˆæ˜¯é‡å­è®¡ç®—ï¼Ÿ
# ç­”æ¡ˆï¼šé‡å­è®¡ç®—æ˜¯åˆ©ç”¨é‡å­åŠ›å­¦åŸç†...</code></pre>
                    </div>

                    <div class="info-box tip">
                        <div class="info-box-title">ğŸ’¡ RunnablePassthrough å…¸å‹ç”¨æ³•</div>
                        <p>
                            <strong>æœ€å¸¸è§çš„ç”¨æ³•</strong>æ˜¯åœ¨ RAG åœºæ™¯ä¸­ï¼ŒåŒæ—¶ä¿ç•™ç”¨æˆ·é—®é¢˜å’Œæ£€ç´¢åˆ°çš„æ–‡æ¡£ï¼š
                        </p>
                        <pre><code>chain = {
    "context": retriever,              # æ£€ç´¢æ–‡æ¡£
    "question": RunnablePassthrough()  # ä¿ç•™åŸå§‹é—®é¢˜
} | prompt | model</code></pre>
                    </div>
                </section>

                <!-- RunnableParallel å¹¶è¡Œæ‰§è¡Œ -->
                <section class="content-section">
                    <h2 class="section-title">âš¡ RunnableParallel - å¹¶è¡Œæ‰§è¡Œ</h2>
                    <p>
                        <code>RunnableParallel</code> å…è®¸<strong>å¹¶å‘æ‰§è¡Œå¤šä¸ª Runnable</strong>ï¼Œ
                        æ˜¾è‘—æå‡æ€§èƒ½ï¼Œç‰¹åˆ«é€‚ç”¨äºï¼š
                    </p>
                    <ul>
                        <li>åŒæ—¶è°ƒç”¨å¤šä¸ª LLMï¼ˆå¯¹æ¯”ä¸åŒæ¨¡å‹çš„è¾“å‡ºï¼‰</li>
                        <li>å¹¶è¡Œæ£€ç´¢å¤šä¸ªæ•°æ®æº</li>
                        <li>åŒæ—¶æ‰§è¡Œå¤šä¸ªç‹¬ç«‹çš„æ•°æ®è½¬æ¢</li>
                    </ul>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph TB
    Input["è¾“å…¥æ•°æ®"] --> Parallel["RunnableParallel"]

    Parallel --> Task1["ä»»åŠ¡ 1<br/>ç¿»è¯‘"]
    Parallel --> Task2["ä»»åŠ¡ 2<br/>æ€»ç»“"]
    Parallel --> Task3["ä»»åŠ¡ 3<br/>å…³é”®è¯æå–"]

    Task1 --> Output1["è¾“å‡º 1"]
    Task2 --> Output2["è¾“å‡º 2"]
    Task3 --> Output3["è¾“å‡º 3"]

    Output1 --> Merge["åˆå¹¶ç»“æœ"]
    Output2 --> Merge
    Output3 --> Merge

    Merge --> Final["æœ€ç»ˆè¾“å‡º<br/>åŒ…å«æ‰€æœ‰ç»“æœ"]

    style Parallel fill:#f59e0b,color:#fff
    style Merge fill:#8b5cf6,color:#fff
                        </div>
                    </div>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
RunnableParallel - å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡
"""
from langchain_core.runnables import RunnableParallel
from langchain_core.prompts import ChatPromptTemplate
from langchain import init_chat_model

model = init_chat_model("gpt-4o", model_provider="openai")

# å®šä¹‰ 3 ä¸ªç‹¬ç«‹çš„é“¾
translate_chain = (
    ChatPromptTemplate.from_template("ç¿»è¯‘æˆè‹±æ–‡ï¼š{text}")
    | model
)

summarize_chain = (
    ChatPromptTemplate.from_template("ç”¨ä¸€å¥è¯æ€»ç»“ï¼š{text}")
    | model
)

keywords_chain = (
    ChatPromptTemplate.from_template("æå– 3 ä¸ªå…³é”®è¯ï¼š{text}")
    | model
)

# ä½¿ç”¨ RunnableParallel å¹¶è¡Œæ‰§è¡Œ
parallel_chain = RunnableParallel(
    translation=translate_chain,
    summary=summarize_chain,
    keywords=keywords_chain
)

# æ‰§è¡Œï¼ˆ3 ä¸ªä»»åŠ¡å¹¶å‘ï¼‰
result = parallel_chain.invoke({
    "text": "äººå·¥æ™ºèƒ½æ­£åœ¨æ”¹å˜ä¸–ç•Œï¼Œä»åŒ»ç–—åˆ°æ•™è‚²ï¼ŒAI çš„åº”ç”¨æ— å¤„ä¸åœ¨ã€‚"
})

print("ç¿»è¯‘ï¼š", result["translation"].content)
print("æ€»ç»“ï¼š", result["summary"].content)
print("å…³é”®è¯ï¼š", result["keywords"].content)

# è¾“å‡ºç¤ºä¾‹ï¼š
# ç¿»è¯‘ï¼šArtificial intelligence is changing the world...
# æ€»ç»“ï¼šAI å¹¿æ³›åº”ç”¨äºåŒ»ç–—å’Œæ•™è‚²ç­‰é¢†åŸŸ
# å…³é”®è¯ï¼šäººå·¥æ™ºèƒ½ã€åŒ»ç–—ã€æ•™è‚²</code></pre>
                    </div>

                    <div class="info-box warning">
                        <div class="info-box-title">âš ï¸ å¹¶è¡Œæ‰§è¡Œçš„æ³¨æ„äº‹é¡¹</div>
                        <ul>
                            <li><strong>æˆæœ¬å¢åŠ </strong>ï¼šå¹¶è¡Œè°ƒç”¨å¤šä¸ª LLM ä¼šåŒæ—¶æ¶ˆè€— Token</li>
                            <li><strong>é€Ÿç‡é™åˆ¶</strong>ï¼šæ³¨æ„ API çš„å¹¶å‘é™åˆ¶ï¼ˆæ¯åˆ†é’Ÿè¯·æ±‚æ•°ï¼‰</li>
                            <li><strong>é”™è¯¯å¤„ç†</strong>ï¼šä»»ä½•ä¸€ä¸ªä»»åŠ¡å¤±è´¥éƒ½ä¼šå¯¼è‡´æ•´ä½“å¤±è´¥</li>
                        </ul>
                    </div>
                </section>

                <!-- å¤æ‚ LCEL é“¾ç¤ºä¾‹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ—ï¸ å¤æ‚ LCEL é“¾å®æˆ˜</h2>
                    <p>
                        å°†æ‰€æœ‰æŠ€æœ¯ç»„åˆèµ·æ¥ï¼Œæ„å»ºä¸€ä¸ª<strong>å®Œæ•´çš„ RAG é—®ç­”é“¾</strong>ï¼š
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§ - å®Œæ•´ç¤ºä¾‹</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
å¤æ‚ LCEL é“¾ - å®Œæ•´çš„ RAG é—®ç­”ç³»ç»Ÿ
"""
from langchain_core.runnables import RunnablePassthrough, RunnableParallel
from langchain_core.prompts import ChatPromptTemplate
from langchain_core.output_parsers import StrOutputParser
from langchain import init_chat_model
from langchain_chroma import Chroma
from langchain_openai import OpenAIEmbeddings

# 1. åˆå§‹åŒ–ç»„ä»¶
model = init_chat_model("gpt-4o", model_provider="openai")
embeddings = OpenAIEmbeddings(model="text-embedding-3-small")

# 2. åˆ›å»ºå‘é‡å­˜å‚¨ï¼ˆå‡è®¾å·²æœ‰æ•°æ®ï¼‰
vectorstore = Chroma(
    collection_name="knowledge_base",
    embedding_function=embeddings
)
retriever = vectorstore.as_retriever(search_kwargs={"k": 3})

# 3. å®šä¹‰æç¤ºè¯æ¨¡æ¿
rag_prompt = ChatPromptTemplate.from_template("""
åŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡å›ç­”é—®é¢˜ã€‚å¦‚æœä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·è¯´"æˆ‘ä¸çŸ¥é“"ã€‚

ä¸Šä¸‹æ–‡ï¼š
{context}

é—®é¢˜ï¼š{question}

ç­”æ¡ˆï¼š
""")

# 4. è‡ªå®šä¹‰å‡½æ•°ï¼šæ ¼å¼åŒ–æ£€ç´¢åˆ°çš„æ–‡æ¡£
def format_docs(docs):
    """å°† Document åˆ—è¡¨æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²"""
    return "\n\n".join([doc.page_content for doc in docs])

# 5. æ„å»ºå®Œæ•´çš„ LCEL é“¾
rag_chain = (
    # æ­¥éª¤ 1ï¼šå¹¶è¡Œå‡†å¤‡æ•°æ®
    RunnableParallel(
        context=retriever | format_docs,     # æ£€ç´¢å¹¶æ ¼å¼åŒ–æ–‡æ¡£
        question=RunnablePassthrough()       # é€ä¼ åŸå§‹é—®é¢˜
    )
    # æ­¥éª¤ 2ï¼šç”Ÿæˆæç¤ºè¯
    | rag_prompt
    # æ­¥éª¤ 3ï¼šè°ƒç”¨æ¨¡å‹
    | model
    # æ­¥éª¤ 4ï¼šè§£æè¾“å‡º
    | StrOutputParser()
)

# 6. ä½¿ç”¨é“¾
question = "ä»€ä¹ˆæ˜¯ LangChainï¼Ÿ"
answer = rag_chain.invoke(question)

print(f"é—®é¢˜ï¼š{question}")
print(f"ç­”æ¡ˆï¼š{answer}")

# 7. æµå¼è¾“å‡ºï¼ˆLCEL è‡ªåŠ¨æ”¯æŒï¼‰
print("\næµå¼è¾“å‡ºï¼š")
for chunk in rag_chain.stream(question):
    print(chunk, end="", flush=True)</code></pre>
                    </div>

                    <h3 class="subsection-title">é“¾çš„æ‰§è¡Œæµç¨‹</h3>
                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph TB
    Q["é—®é¢˜ï¼šä»€ä¹ˆæ˜¯ LangChain"] --> Parallel["RunnableParallel"]

    Parallel --> R1["æ£€ç´¢å™¨<br/>retriever"]
    Parallel --> R2["é€ä¼ é—®é¢˜<br/>RunnablePassthrough"]

    R1 --> Format["æ ¼å¼åŒ–æ–‡æ¡£<br/>format_docs"]
    Format --> Context["context"]
    R2 --> Question["question"]

    Context --> Prompt["RAG Prompt<br/>rag_prompt"]
    Question --> Prompt

    Prompt --> Model["GPT-4o<br/>model"]
    Model --> Parser["StrOutputParser<br/>parser"]
    Parser --> Answer["ç­”æ¡ˆ"]

    style Parallel fill:#f59e0b,color:#fff
    style Model fill:#10b981,color:#fff
    style Answer fill:#8b5cf6,color:#fff
                        </div>
                    </div>
                </section>

                <!-- LCEL æœ€ä½³å®è·µ -->
                <section class="content-section">
                    <h2 class="section-title">âœ¨ LCEL æœ€ä½³å®è·µ</h2>

                    <h3 class="subsection-title">1. ä¼˜å…ˆä½¿ç”¨ LCEL è€Œéä¼ ç»Ÿé“¾</h3>
                    <p>
                        åœ¨ LangChain 1.0 ä¸­ï¼Œ<strong>å§‹ç»ˆä½¿ç”¨ LCEL</strong> æ¥ç»„åˆç»„ä»¶ï¼Œ
                        é¿å…ä½¿ç”¨å·²åºŸå¼ƒçš„ <code>LLMChain</code>ã€‚
                    </p>

                    <h3 class="subsection-title">2. å–„ç”¨å¹¶è¡Œæ‰§è¡Œ</h3>
                    <p>
                        å½“å¤šä¸ªä»»åŠ¡ä¹‹é—´<strong>æ²¡æœ‰ä¾èµ–å…³ç³»</strong>æ—¶ï¼Œä½¿ç”¨ <code>RunnableParallel</code> å¹¶è¡Œæ‰§è¡Œï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># âœ… å¥½çš„åšæ³•ï¼šå¹¶è¡Œæ‰§è¡Œç‹¬ç«‹ä»»åŠ¡
parallel = RunnableParallel(
    task1=chain1,
    task2=chain2,
    task3=chain3
)

# âŒ ä¸å¥½çš„åšæ³•ï¼šä¸²è¡Œæ‰§è¡Œï¼ˆæµªè´¹æ—¶é—´ï¼‰
result1 = chain1.invoke(input)
result2 = chain2.invoke(input)
result3 = chain3.invoke(input)</code></pre>
                    </div>

                    <h3 class="subsection-title">3. ä½¿ç”¨ RunnableLambda æ·»åŠ è°ƒè¯•æ—¥å¿—</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">def debug_log(x):
    """æ‰“å°ä¸­é—´ç»“æœç”¨äºè°ƒè¯•"""
    print(f"ğŸ” Debug: {x}")
    return x

# åœ¨é“¾ä¸­æ’å…¥è°ƒè¯•æ—¥å¿—
chain = (
    prompt
    | RunnableLambda(debug_log)  # æŸ¥çœ‹æç¤ºè¯
    | model
    | RunnableLambda(debug_log)  # æŸ¥çœ‹æ¨¡å‹è¾“å‡º
    | parser
)</code></pre>
                    </div>

                    <h3 class="subsection-title">4. ä¿æŒé“¾çš„å¯è¯»æ€§</h3>
                    <p>
                        å¯¹äºå¤æ‚çš„é“¾ï¼Œä½¿ç”¨<strong>å˜é‡</strong>å’Œ<strong>æ³¨é‡Š</strong>æå‡å¯è¯»æ€§ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># âœ… å¥½çš„åšæ³•ï¼šæ‹†åˆ†ä¸ºå¤šä¸ªæ­¥éª¤
retrieval_step = retriever | format_docs
prompt_step = rag_prompt
generation_step = model | parser

full_chain = (
    {"context": retrieval_step, "question": RunnablePassthrough()}
    | prompt_step
    | generation_step
)

# âŒ ä¸å¥½çš„åšæ³•ï¼šä¸€è¡Œå†™å®Œï¼ˆéš¾ä»¥ç†è§£å’Œç»´æŠ¤ï¼‰
chain = ({"context": retriever | (lambda docs: "\n".join([d.page_content for d in docs])), "question": RunnablePassthrough()} | rag_prompt | model | StrOutputParser())</code></pre>
                    </div>
                </section>

                <!-- å¸¸è§é—®é¢˜ -->
                <section class="content-section">
                    <h2 class="section-title">â“ å¸¸è§é—®é¢˜</h2>

                    <h3 class="subsection-subtitle">Q1: LCEL å’Œ Agent æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3>
                    <p>
                        <code>create_agent()</code> å†…éƒ¨ä½¿ç”¨ <strong>LangGraph</strong>ï¼ˆä¸æ˜¯ LCELï¼‰æ¥ç¼–æ’å·¥å…·è°ƒç”¨ã€‚
                        ä½†ä½ å¯ä»¥åœ¨ Agent çš„å·¥å…·å†…éƒ¨ä½¿ç”¨ LCEL é“¾ã€‚
                    </p>

                    <h3 class="subsection-subtitle">Q2: å¦‚ä½•åœ¨ LCEL é“¾ä¸­å¤„ç†é”™è¯¯ï¼Ÿ</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">def safe_invoke(chain, input_data):
    """å¸¦é”™è¯¯å¤„ç†çš„é“¾è°ƒç”¨"""
    try:
        return chain.invoke(input_data)
    except Exception as e:
        print(f"é“¾æ‰§è¡Œå¤±è´¥ï¼š{e}")
        return None

result = safe_invoke(chain, {"text": "..."})</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q3: LCEL é“¾å¯ä»¥ä¿å­˜å’ŒåŠ è½½å—ï¼Ÿ</h3>
                    <p>
                        <strong>ä¸æ¨è</strong>ã€‚LCEL é“¾æ˜¯ä»£ç ï¼Œå»ºè®®é€šè¿‡<strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼ˆGitï¼‰ç®¡ç†ï¼Œ
                        è€Œä¸æ˜¯åºåˆ—åŒ–ä¿å­˜ã€‚
                    </p>

                    <h3 class="subsection-subtitle">Q4: RunnableParallel ä¼šç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆå—ï¼Ÿ</h3>
                    <p>
                        <strong>æ˜¯çš„</strong>ã€‚<code>RunnableParallel</code> ä¼šç­‰å¾…æ‰€æœ‰å­ä»»åŠ¡å®Œæˆåæ‰è¿”å›ç»“æœã€‚
                        å¦‚æœä»»ä½•ä¸€ä¸ªä»»åŠ¡å¤±è´¥ï¼Œæ•´ä¸ªå¹¶è¡Œæ‰§è¡Œä¼šå¤±è´¥ã€‚
                    </p>

                    <h3 class="subsection-subtitle">Q5: å¦‚ä½•åœ¨ LCEL ä¸­ä½¿ç”¨æ¡ä»¶åˆ†æ”¯ï¼Ÿ</h3>
                    <p>
                        ä½¿ç”¨ <code>RunnableLambda</code> ç»“åˆæ¡ä»¶é€»è¾‘ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">def route_based_on_length(text):
    """æ ¹æ®æ–‡æœ¬é•¿åº¦é€‰æ‹©ä¸åŒçš„å¤„ç†è·¯å¾„"""
    if len(text) > 100:
        return long_text_chain.invoke(text)
    else:
        return short_text_chain.invoke(text)

chain = RunnableLambda(route_based_on_length)</code></pre>
                    </div>
                </section>

                <!-- å‚è€ƒèµ„æº -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“– å‚è€ƒèµ„æº</h2>
                    <ul>
                        <li>
                            <a href="https://docs.langchain.com/oss/python/langchain/overview" target="_blank">
                                LangChain å®˜æ–¹æ–‡æ¡£
                            </a>
                        </li>
                        <li>
                            <a href="38-migration.html">
                                è¿ç§»æŒ‡å— - LCEL æ›¿ä»£ä¼ ç»Ÿé“¾
                            </a>
                        </li>
                        <li>
                            <a href="08-rag.html">
                                RAG è¯¦è§£ - LCEL åœ¨ RAG ä¸­çš„åº”ç”¨
                            </a>
                        </li>
                        <li>
                            <a href="https://reference.langchain.com/python/langchain/core/runnables.html" target="_blank">
                                Runnable API å‚è€ƒ
                            </a>
                        </li>
                    </ul>
                </section>

                <!-- é¡µé¢å¯¼èˆª -->
                                <nav class="page-navigation">
                    <a href="08-rag.html" class="nav-button prev">
                        â† ä¸Šä¸€é¡µ:RAG è¯¦è§£
                    </a>
                    <a href="10-runtime.html" class="nav-button next">
                        ä¸‹ä¸€é¡µ:Runtime ç³»ç»Ÿ â†’
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" aria-label="è¿”å›é¡¶éƒ¨">â†‘</button>

    <!-- JavaScript -->
    <script src="assets/js/mermaid-init.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</body>
</html>
