<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LangChain 1.0 æ ¸å¿ƒæ¶æ„ - æ·±å…¥ç†è§£ LangChain çš„è®¾è®¡å“²å­¦å’Œæ¨¡å—ç»„ç»‡">
    <title>æ ¸å¿ƒæ¶æ„ | LangChain 1.0 Python çŸ¥è¯†æ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <button class="mobile-menu-button" aria-label="æ‰“å¼€èœå•">â˜°</button>

    <div class="container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">ğŸ¦œ LangChain 1.0</h1>
                <p class="sidebar-subtitle">Python å®Œæ•´å­¦ä¹ æŒ‡å—</p>
            </div>

            <ul class="nav-menu">
                <li class="nav-section">
                    <div class="nav-section-title">å¼€å§‹</div>
                    <ul>
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <span class="nav-icon">ğŸ </span>
                                ä¸»é¡µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">åŸºç¡€ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="01-introduction.html" class="nav-link">
                                <span class="nav-icon">ğŸ“–</span>
                                LangChain ç®€ä»‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="02-architecture.html" class="nav-link">
                                <span class="nav-icon">ğŸ—ï¸</span>
                                æ ¸å¿ƒæ¶æ„
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="03-models.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤–</span>
                                æ¨¡å‹æ¥å£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="04-messages.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¬</span>
                                æ¶ˆæ¯ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="05-tools.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                å·¥å…·ç³»ç»Ÿ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">è¿›é˜¶ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="06-agents.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                Agent åŸºç¡€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="07-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="08-rag.html" class="nav-link">
                                <span class="nav-icon">ğŸ”</span>
                                RAG è¯¦è§£
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="09-lcel.html" class="nav-link">
                                <span class="nav-icon">ğŸ”—</span>
                                LCEL è¡¨è¾¾å¼
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">é«˜çº§åº”ç”¨</div>
                    <ul>
                        <li class="nav-item">
                            <a href="10-runtime.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                Runtime ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="11-checkpointer.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¾</span>
                                æŒä¹…åŒ–ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="12-streaming.html" class="nav-link">
                                <span class="nav-icon">ğŸŒŠ</span>
                                æµå¼è¾“å‡º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="13-human-in-loop.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="14-long-term-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ—„ï¸</span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="15-langgraph.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                LangGraph
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">å®æˆ˜ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="16-customer-service.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å®¢æœæœºå™¨äºº
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="17-best-practices.html" class="nav-link">
                                <span class="nav-icon">âœ¨</span>
                                æœ€ä½³å®è·µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">å‚è€ƒç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="18-api-reference.html" class="nav-link">
                                <span class="nav-icon">ğŸ“š</span>
                                API é€ŸæŸ¥è¡¨
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="19-troubleshooting.html" class="nav-link">
                                <span class="nav-icon">ğŸ›</span>
                                æ•…éšœæ’é™¤
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="20-migration.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                è¿ç§»æŒ‡å—
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">æ‰©å±•ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="21-structured-output.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                ç»“æ„åŒ–è¾“å‡º
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">DeepAgents ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="22-deepagents-quickstart.html" class="nav-link">
                                <span class="nav-icon">ğŸš€</span>
                                å¿«é€Ÿå¼€å§‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="23-deepagents-customization.html" class="nav-link">
                                <span class="nav-icon">ğŸ¨</span>
                                å®šåˆ¶åŒ–
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="24-deepagents-harness.html" class="nav-link">
                                <span class="nav-icon">ğŸ›ï¸</span>
                                Harness ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="25-deepagents-backends.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                åç«¯é…ç½®
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="26-deepagents-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="27-deepagents-hitl.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="28-deepagents-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ§ </span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="29-deepagents-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">Multi-Agent ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="30-multi-agent-index.html" class="nav-link">
                                <span class="nav-icon">ğŸŒ</span>
                                æ¦‚è¿°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="31-multi-agent-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="32-multi-agent-handoffs.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                äº¤æ¥æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="33-multi-agent-skills.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                æŠ€èƒ½ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="34-multi-agent-router.html" class="nav-link">
                                <span class="nav-icon">ğŸ§­</span>
                                è·¯ç”±æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="35-multi-agent-workflow.html" class="nav-link">
                                <span class="nav-icon">ğŸ”€</span>
                                è‡ªå®šä¹‰å·¥ä½œæµ
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                <nav class="breadcrumb">
                    <span class="breadcrumb-item">
                        <a href="index.html" class="breadcrumb-link">ä¸»é¡µ</a>
                    </span>
                    <span class="breadcrumb-item">
                        åŸºç¡€ç¯‡
                    </span>
                    <span class="breadcrumb-item">
                        LangChain ç®€ä»‹
                    </span>
                </nav>

                <!-- é¡µé¢æ ‡é¢˜ -->
                <header class="page-header">
                    <h1 class="page-title">ğŸš€ LangChain 1.0 å¿«é€Ÿå¼€å§‹</h1>
                    <p class="page-subtitle">
                        ä»é›¶å¼€å§‹å­¦ä¹  LangChain 1.0ï¼Œæ„å»ºä½ çš„ç¬¬ä¸€ä¸ª AI Agentã€‚
                        10 åˆ†é’Ÿå†…ä» Hello World åˆ°ç”Ÿäº§çº§ Agentã€‚
                    </p>
                </header>

                <!-- ä»€ä¹ˆæ˜¯ LangChain -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“š ä»€ä¹ˆæ˜¯ LangChainï¼Ÿ</h2>
                    <p>
                        <strong>LangChain</strong> æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œç”¨äºæ„å»ºåŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„ AI åº”ç”¨ç¨‹åºã€‚
                        å®ƒæä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–çš„æ¥å£å’Œå·¥å…·ï¼Œè®©ä½ èƒ½å¤Ÿå¿«é€Ÿæ„å»ºæ™ºèƒ½ Agentã€èŠå¤©æœºå™¨äººã€RAG ç³»ç»Ÿç­‰åº”ç”¨ã€‚
                    </p>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ’¡ æ ¸å¿ƒç†å¿µ</div>
                        <ul>
                            <li><strong>æ¨¡å‹æ— å…³</strong>ï¼šæ”¯æŒ OpenAIã€Anthropicã€Google ç­‰å¤šå®¶ LLM æä¾›å•†</li>
                            <li><strong>å·¥å…·é›†æˆ</strong>ï¼šAgent å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰å·¥å…·ä¸å¤–éƒ¨ç³»ç»Ÿäº¤äº’</li>
                            <li><strong>è®°å¿†ç®¡ç†</strong>ï¼šæ”¯æŒçŸ­æœŸå’Œé•¿æœŸè®°å¿†ï¼Œå®ç°ä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯¹è¯</li>
                            <li><strong>ç”Ÿäº§å°±ç»ª</strong>ï¼šå†…ç½®æŒä¹…åŒ–ã€æµå¼è¾“å‡ºã€é”™è¯¯å¤„ç†ç­‰ä¼ä¸šçº§ç‰¹æ€§</li>
                        </ul>
                    </div>

                    <h3 class="subsection-title">LangChain 1.0 çš„æ ¸å¿ƒå˜åŒ–</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>æ–¹é¢</th>
                                <th>LangChain 0.x</th>
                                <th>LangChain 1.0</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Agent åˆ›å»º</strong></td>
                                <td>å¤šä¸ªå‡½æ•°ï¼ŒAPI ä¸ç»Ÿä¸€</td>
                                <td>ç»Ÿä¸€çš„ <code>create_agent()</code></td>
                            </tr>
                            <tr>
                                <td><strong>è¿è¡Œæ—¶</strong></td>
                                <td>åŸºäº Python æ‰§è¡Œ</td>
                                <td>åŸºäº LangGraph è¿è¡Œæ—¶</td>
                            </tr>
                            <tr>
                                <td><strong>ä¸­é—´ä»¶</strong></td>
                                <td>ä¸æ”¯æŒ</td>
                                <td>å®Œæ•´çš„ä¸­é—´ä»¶ç³»ç»Ÿ</td>
                            </tr>
                            <tr>
                                <td><strong>åŒ…ç»“æ„</strong></td>
                                <td>å•ä¸€å¤§åŒ…</td>
                                <td>ç²¾ç®€æ ¸å¿ƒ + langchain-classic</td>
                            </tr>
                            <tr>
                                <td><strong>Python ç‰ˆæœ¬</strong></td>
                                <td>3.8+</td>
                                <td>3.10+ ï¼ˆå¼ºåˆ¶è¦æ±‚ï¼‰</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- LangChain æ¶æ„å›¾ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ—ï¸ LangChain 1.0 æ¶æ„</h2>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph TB
    subgraph "LangChain 1.0 æ ¸å¿ƒå±‚"
        A[create_agent] --> B[Agent Runtime]
        B --> C[Tools]
        B --> D[Models]
        B --> E[Memory]
        B --> F[Middleware]
    end

    subgraph "LangGraph è¿è¡Œæ—¶å±‚"
        B --> G[Persistence]
        B --> H[Streaming]
        B --> I[Human-in-the-Loop]
    end

    subgraph "æ¨¡å‹æä¾›å•†å±‚"
        D --> J[OpenAI]
        D --> K[Anthropic]
        D --> L[Google]
        D --> M[å…¶ä»–]
    end

    style A fill:#2563eb,color:#fff
    style B fill:#10b981,color:#fff
    style G fill:#f59e0b,color:#fff
    style H fill:#f59e0b,color:#fff
    style I fill:#f59e0b,color:#fff
                        </div>
                    </div>

                    <p>
                        LangChain 1.0 æ„å»ºåœ¨ <strong>LangGraph</strong> ä¹‹ä¸Šï¼Œæä¾›äº†ï¼š
                    </p>
                    <ul>
                        <li><strong>é«˜å±‚æŠ½è±¡</strong>ï¼šç®€åŒ–çš„ Agent åˆ›å»ºå’Œé…ç½®</li>
                        <li><strong>çµæ´»è¿è¡Œæ—¶</strong>ï¼šæŒä¹…åŒ–ã€æµå¼è¾“å‡ºã€çŠ¶æ€ç®¡ç†</li>
                        <li><strong>å¯æ‰©å±•æ€§</strong>ï¼šé€šè¿‡ä¸­é—´ä»¶å’Œå·¥å…·æ‰©å±•åŠŸèƒ½</li>
                    </ul>
                </section>

                <!-- ç¯å¢ƒå‡†å¤‡ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ› ï¸ ç¯å¢ƒå‡†å¤‡</h2>

                    <h3 class="subsection-title">ç³»ç»Ÿè¦æ±‚</h3>
                    <div class="info-box warning">
                        <div class="info-box-title">âš ï¸ é‡è¦æç¤º</div>
                        <p>
                            LangChain 1.0 <strong>å¼ºåˆ¶è¦æ±‚ Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬</strong>ã€‚
                            è¯·ç¡®ä¿ä½ çš„ Python ç‰ˆæœ¬ç¬¦åˆè¦æ±‚ã€‚
                        </p>
                    </div>

                    <h3 class="subsection-title">å®‰è£… LangChain</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Bash</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-bash"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python3.10 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£… LangChain 1.0
pip install -U langchain

# éªŒè¯å®‰è£…
python -c "import langchain; print(f'LangChain version: {langchain.__version__}')"</code></pre>
                    </div>

                    <h3 class="subsection-title">å®‰è£…æ¨¡å‹é›†æˆåŒ…</h3>
                    <p>æ ¹æ®ä½ ä½¿ç”¨çš„ LLM æä¾›å•†ï¼Œå®‰è£…å¯¹åº”çš„é›†æˆåŒ…ï¼š</p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Bash</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-bash"># Anthropic (Claude)
pip install langchain-anthropic

# OpenAI (GPT)
pip install langchain-openai

# Google (Gemini)
pip install langchain-google-genai

# æˆ–è€…ä¸€æ¬¡æ€§å®‰è£…å¤šä¸ª
pip install langchain-anthropic langchain-openai langchain-google-genai</code></pre>
                    </div>

                    <h3 class="subsection-title">é…ç½® API Key</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">import os

# æ–¹å¼ 1ï¼šç›´æ¥åœ¨ä»£ç ä¸­è®¾ç½®ï¼ˆä¸æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰
os.environ["ANTHROPIC_API_KEY"] = "your-api-key-here"
os.environ["OPENAI_API_KEY"] = "your-api-key-here"

# æ–¹å¼ 2ï¼šä» .env æ–‡ä»¶åŠ è½½ï¼ˆæ¨èï¼‰
from dotenv import load_dotenv
load_dotenv()  # è‡ªåŠ¨åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡</code></pre>
                    </div>

                    <div class="info-box tip">
                        <div class="info-box-title">ğŸ’¡ æœ€ä½³å®è·µ</div>
                        <p>
                            åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.env</code> æ–‡ä»¶å­˜å‚¨ API Keyï¼š
                        </p>
                        <pre style="background-color: #1e293b; padding: 1rem; border-radius: 0.5rem; margin-top: 0.5rem;"><code>ANTHROPIC_API_KEY=sk-ant-xxx
OPENAI_API_KEY=sk-xxx
GOOGLE_API_KEY=xxx</code></pre>
                        <p style="margin-top: 0.5rem;">
                            <strong>è®°å¾—å°† .env æ·»åŠ åˆ° .gitignoreï¼</strong>
                        </p>
                    </div>
                </section>

                <!-- Hello World ç¤ºä¾‹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ‘‹ Hello World - ä½ çš„ç¬¬ä¸€ä¸ª Agent</h2>
                    <p>è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„ Agent å¼€å§‹ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªå¤©æ°”æŸ¥è¯¢å·¥å…·ï¼š</p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
æœ€ç®€å•çš„ LangChain Agent ç¤ºä¾‹
åŠŸèƒ½ï¼šä½¿ç”¨è‡ªå®šä¹‰å·¥å…·æŸ¥è¯¢å¤©æ°”
"""
from langchain.agents import create_agent

# å®šä¹‰ä¸€ä¸ªç®€å•çš„å·¥å…·å‡½æ•°
def get_weather(city: str) -> str:
    """è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯"""
    return f"{city} ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œé˜³å…‰æ˜åªšï¼"

# åˆ›å»º Agent
agent = create_agent(
    model="claude-sonnet-4-5-20250929",  # æŒ‡å®šæ¨¡å‹
    tools=[get_weather],                  # æä¾›å·¥å…·åˆ—è¡¨
    system_prompt="ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„å¤©æ°”åŠ©æ‰‹",  # ç³»ç»Ÿæç¤ºè¯
)

# è°ƒç”¨ Agent
response = agent.invoke({
    "messages": [{"role": "user", "content": "æ—§é‡‘å±±ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"}]
})

# æ‰“å°ç»“æœ
print(response["messages"][-1].content)</code></pre>
                    </div>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ” ä»£ç è§£æ</div>
                        <ul>
                            <li><code>create_agent()</code>ï¼šLangChain 1.0 çš„æ ¸å¿ƒå‡½æ•°ï¼Œç”¨äºåˆ›å»º Agent</li>
                            <li><code>model</code>ï¼šæŒ‡å®šè¦ä½¿ç”¨çš„ LLM æ¨¡å‹</li>
                            <li><code>tools</code>ï¼šAgent å¯ä»¥è°ƒç”¨çš„å·¥å…·åˆ—è¡¨</li>
                            <li><code>system_prompt</code>ï¼šå®šä¹‰ Agent çš„è¡Œä¸ºå’Œè§’è‰²</li>
                            <li><code>invoke()</code>ï¼šæ‰§è¡Œ Agentï¼Œä¼ å…¥ç”¨æˆ·æ¶ˆæ¯</li>
                        </ul>
                    </div>

                    <h3 class="subsection-subtitle">é¢„æœŸè¾“å‡º</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Text</span>
                        </div>
                        <pre><code>æ ¹æ®å¤©æ°”æŸ¥è¯¢ç»“æœï¼Œæ—§é‡‘å±±ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œé˜³å…‰æ˜åªšï¼é€‚åˆå¤–å‡ºæ´»åŠ¨ã€‚</code></pre>
                    </div>
                </section>

                <!-- ç”Ÿäº§çº§ Agent -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ­ ç”Ÿäº§çº§ Agent - å®Œæ•´ç¤ºä¾‹</h2>
                    <p>
                        ç°åœ¨è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ç”Ÿäº§çº§ Agentï¼ŒåŒ…å«ä»¥ä¸‹ç‰¹æ€§ï¼š
                    </p>
                    <ul>
                        <li>âœ… ä½¿ç”¨ <code>@tool</code> è£…é¥°å™¨å®šä¹‰å·¥å…·</li>
                        <li>âœ… è¿è¡Œæ—¶ä¸Šä¸‹æ–‡æ³¨å…¥</li>
                        <li>âœ… ç»“æ„åŒ–è¾“å‡ºæ ¼å¼</li>
                        <li>âœ… å¯¹è¯è®°å¿†ç®¡ç†</li>
                        <li>âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†</li>
                    </ul>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
ç”Ÿäº§çº§ LangChain Agent ç¤ºä¾‹
åŠŸèƒ½ï¼šæ™ºèƒ½å¤©æ°”åŠ©æ‰‹ï¼Œæ”¯æŒç”¨æˆ·ä½ç½®è¯†åˆ«ã€ç»“æ„åŒ–è¾“å‡ºã€å¯¹è¯è®°å¿†
"""
import os
from dataclasses import dataclass
from langchain.tools import tool, ToolRuntime
from langchain.chat_models import init_chat_model
from langchain.agents import create_agent
from langchain.agents.structured_output import ToolStrategy
from langgraph.checkpoint.memory import InMemorySaver

# ==================== ç¬¬1æ­¥ï¼šå®šä¹‰ä¸Šä¸‹æ–‡ ====================
@dataclass
class UserContext:
    """ç”¨æˆ·ä¸Šä¸‹æ–‡ï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯"""
    user_id: str

# ==================== ç¬¬2æ­¥ï¼šå®šä¹‰å·¥å…· ====================
@tool
def get_user_location(runtime: ToolRuntime[UserContext]) -> str:
    """è·å–ç”¨æˆ·çš„å½“å‰ä½ç½®"""
    user_id = runtime.context.user_id
    # æ¨¡æ‹Ÿä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·ä½ç½®
    locations = {"1": "ä½›ç½—é‡Œè¾¾", "2": "æ—§é‡‘å±±", "3": "åŒ—äº¬"}
    return locations.get(user_id, "æœªçŸ¥ä½ç½®")

@tool
def get_weather_for_location(city: str) -> str:
    """æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯

    Args:
        city: åŸå¸‚åç§°

    Returns:
        å¤©æ°”ä¿¡æ¯æè¿°
    """
    # æ¨¡æ‹Ÿå¤©æ°” API è°ƒç”¨
    weather_data = {
        "ä½›ç½—é‡Œè¾¾": "ç‚çƒ­æ½®æ¹¿ï¼Œæ¸©åº¦ 32Â°C",
        "æ—§é‡‘å±±": "å‡‰çˆ½å¤šé›¾ï¼Œæ¸©åº¦ 18Â°C",
        "åŒ—äº¬": "æ™´æœ—å¹²ç‡¥ï¼Œæ¸©åº¦ 25Â°C"
    }
    return weather_data.get(city, f"{city} å¤©æ°”æ™´æœ—")

# ==================== ç¬¬3æ­¥ï¼šå®šä¹‰è¾“å‡ºæ ¼å¼ ====================
@dataclass
class WeatherResponse:
    """ç»“æ„åŒ–çš„å¤©æ°”å“åº”æ ¼å¼"""
    punny_response: str                    # å¹½é»˜çš„å›å¤
    weather_conditions: str | None = None  # å¤©æ°”çŠ¶å†µï¼ˆå¯é€‰ï¼‰

# ==================== ç¬¬4æ­¥ï¼šé…ç½®æ¨¡å‹ ====================
# è®¾ç½® API Key
os.environ["ANTHROPIC_API_KEY"] = "your-api-key-here"

# åˆå§‹åŒ–æ¨¡å‹
model = init_chat_model(
    "claude-sonnet-4-5-20250929",
    temperature=0.5,     # æ§åˆ¶åˆ›é€ æ€§
    timeout=10,          # è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
    max_tokens=1000      # æœ€å¤§è¾“å‡ºé•¿åº¦
)

# ==================== ç¬¬5æ­¥ï¼šé…ç½®è®°å¿† ====================
# ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æ•°æ®åº“ï¼‰
checkpointer = InMemorySaver()

# ==================== ç¬¬6æ­¥ï¼šå®šä¹‰ç³»ç»Ÿæç¤ºè¯ ====================
SYSTEM_PROMPT = """ä½ æ˜¯ä¸€ä¸ªå‹å¥½ä¸”å¹½é»˜çš„å¤©æ°”åŠ©æ‰‹ã€‚

ä½ çš„èŒè´£ï¼š
1. ä½¿ç”¨ get_user_location å·¥å…·è·å–ç”¨æˆ·ä½ç½®
2. ä½¿ç”¨ get_weather_for_location å·¥å…·æŸ¥è¯¢å¤©æ°”
3. ç”¨è½»æ¾å¹½é»˜çš„è¯­æ°”å›å¤ç”¨æˆ·
4. å¿…é¡»è¿”å›ç»“æ„åŒ–çš„ WeatherResponse æ ¼å¼

å›å¤é£æ ¼ï¼šç®€æ´ã€å‹å¥½ã€å¸¦ç‚¹ä¿çš®è¯ã€‚"""

# ==================== ç¬¬7æ­¥ï¼šåˆ›å»º Agent ====================
agent = create_agent(
    model=model,
    system_prompt=SYSTEM_PROMPT,
    tools=[get_user_location, get_weather_for_location],
    context_schema=UserContext,              # ä¸Šä¸‹æ–‡ç±»å‹
    response_format=ToolStrategy(WeatherResponse),  # è¾“å‡ºæ ¼å¼
    checkpointer=checkpointer                # è®°å¿†ç®¡ç†
)

# ==================== ç¬¬8æ­¥ï¼šä½¿ç”¨ Agent ====================
if __name__ == "__main__":
    # é…ç½®ï¼šæŒ‡å®šå¯¹è¯çº¿ç¨‹ ID
    config = {"configurable": {"thread_id": "user_session_001"}}

    # ç¬¬ä¸€æ¬¡å¯¹è¯
    print("=== ç¬¬ä¸€æ¬¡å¯¹è¯ ===")
    response1 = agent.invoke(
        {"messages": [{"role": "user", "content": "å¤–é¢å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"}]},
        config=config,
        context=UserContext(user_id="2")  # ç”¨æˆ· ID ä¸º 2ï¼ˆæ—§é‡‘å±±ï¼‰
    )
    print(response1["messages"][-1].content)

    # ç¬¬äºŒæ¬¡å¯¹è¯ï¼ˆAgent ä¼šè®°ä½ä¸Šä¸‹æ–‡ï¼‰
    print("\n=== ç¬¬äºŒæ¬¡å¯¹è¯ ===")
    response2 = agent.invoke(
        {"messages": [{"role": "user", "content": "éœ€è¦å¸¦ä¼å—ï¼Ÿ"}]},
        config=config,  # ä½¿ç”¨ç›¸åŒçš„ thread_id
        context=UserContext(user_id="2")
    )
    print(response2["messages"][-1].content)</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">ä»£ç æ¶æ„è¯´æ˜</h3>
                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph LR
    A[ç”¨æˆ·è¯·æ±‚] --> B[Agent]
    B --> C{éœ€è¦å·¥å…·ï¼Ÿ}
    C -->|æ˜¯| D[è°ƒç”¨å·¥å…·]
    D --> E[get_user_location]
    D --> F[get_weather_for_location]
    E --> G[è·å–ç»“æœ]
    F --> G
    G --> B
    C -->|å¦| H[ç”Ÿæˆå“åº”]
    B --> H
    H --> I[è¿”å›ç»“æ„åŒ–ç»“æœ]

    style B fill:#2563eb,color:#fff
    style I fill:#10b981,color:#fff
                        </div>
                    </div>

                    <h3 class="subsection-subtitle">å…³é”®ç‰¹æ€§è§£æ</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>ç‰¹æ€§</th>
                                <th>ä½œç”¨</th>
                                <th>ä»£ç ä½ç½®</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>è¿è¡Œæ—¶ä¸Šä¸‹æ–‡</strong></td>
                                <td>æ³¨å…¥ç”¨æˆ·ä¿¡æ¯åˆ°å·¥å…·</td>
                                <td><code>ToolRuntime[UserContext]</code></td>
                            </tr>
                            <tr>
                                <td><strong>ç»“æ„åŒ–è¾“å‡º</strong></td>
                                <td>ç¡®ä¿å“åº”æ ¼å¼ä¸€è‡´</td>
                                <td><code>ToolStrategy(WeatherResponse)</code></td>
                            </tr>
                            <tr>
                                <td><strong>å¯¹è¯è®°å¿†</strong></td>
                                <td>è·¨å¯¹è¯ä¿æŒä¸Šä¸‹æ–‡</td>
                                <td><code>InMemorySaver()</code></td>
                            </tr>
                            <tr>
                                <td><strong>çº¿ç¨‹éš”ç¦»</strong></td>
                                <td>åŒºåˆ†ä¸åŒç”¨æˆ·ä¼šè¯</td>
                                <td><code>thread_id</code></td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- å¸¸è§é—®é¢˜ -->
                <section class="content-section">
                    <h2 class="section-title">â“ å¸¸è§é—®é¢˜</h2>

                    <h3 class="subsection-subtitle">Q1: å¦‚ä½•åˆ‡æ¢ä¸åŒçš„ LLM æä¾›å•†ï¼Ÿ</h3>
                    <p>åªéœ€ä¿®æ”¹æ¨¡å‹æ ‡è¯†ç¬¦å’Œå¯¹åº”çš„ API Keyï¼š</p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># OpenAI
model = init_chat_model("gpt-4", model_provider="openai")

# Anthropic (Claude)
model = init_chat_model("claude-sonnet-4-5-20250929", model_provider="anthropic")

# Google (Gemini)
model = init_chat_model("gemini-2.0-flash", model_provider="google-genai")</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q2: InMemorySaver é€‚åˆç”Ÿäº§ç¯å¢ƒå—ï¼Ÿ</h3>
                    <p>
                        <strong>ä¸é€‚åˆ</strong>ã€‚InMemorySaver ä»…ç”¨äºå¼€å‘å’Œæµ‹è¯•ã€‚
                        ç”Ÿäº§ç¯å¢ƒåº”è¯¥ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ SQLite
from langgraph.checkpoint.sqlite import SqliteSaver
checkpointer = SqliteSaver.from_conn_string("checkpoints.db")

# ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ PostgreSQL
from langgraph.checkpoint.postgres import PostgresSaver
checkpointer = PostgresSaver.from_conn_string("postgresql://...")</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q3: å¦‚ä½•æŸ¥çœ‹ Agent çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ</h3>
                    <p>é›†æˆ LangSmith è¿›è¡Œè°ƒè¯•å’Œç›‘æ§ï¼š</p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">import os

# é…ç½® LangSmith
os.environ["LANGSMITH_API_KEY"] = "your-langsmith-key"
os.environ["LANGSMITH_TRACING"] = "true"
os.environ["LANGSMITH_PROJECT"] = "my-project"

# ä¹‹åè¿è¡Œçš„ Agent ä¼šè‡ªåŠ¨å‘é€è¿½è¸ªæ•°æ®åˆ° LangSmith</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q4: å·¥å…·å‡½æ•°å¿…é¡»ä½¿ç”¨ @tool è£…é¥°å™¨å—ï¼Ÿ</h3>
                    <p>
                        ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†<strong>å¼ºçƒˆæ¨è</strong>ã€‚<code>@tool</code> è£…é¥°å™¨æä¾›ï¼š
                    </p>
                    <ul>
                        <li>è‡ªåŠ¨ç”Ÿæˆå·¥å…·æè¿°ï¼ˆä»æ–‡æ¡£å­—ç¬¦ä¸²ï¼‰</li>
                        <li>ç±»å‹æ£€æŸ¥å’ŒéªŒè¯</li>
                        <li>è¿è¡Œæ—¶ä¸Šä¸‹æ–‡æ³¨å…¥</li>
                        <li>æ›´å¥½çš„é”™è¯¯æç¤º</li>
                    </ul>
                </section>

                <!-- ä¸‹ä¸€æ­¥å­¦ä¹  -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“– ä¸‹ä¸€æ­¥å­¦ä¹ </h2>
                    <div class="info-box tip">
                        <div class="info-box-title">ğŸ¯ æ¨èå­¦ä¹ è·¯å¾„</div>
                        <ul>
                            <li><a href="03-models.html">æ¨¡å‹æ¥å£</a> - æ·±å…¥äº†è§£ <code>init_chat_model()</code> å’Œå¤šæä¾›å•†æ”¯æŒ</li>
                            <li><a href="05-tools.html">å·¥å…·ç³»ç»Ÿ</a> - æŒæ¡ <code>@tool</code> è£…é¥°å™¨å’Œè‡ªå®šä¹‰å·¥å…·å¼€å‘</li>
                            <li><a href="06-agents.html">Agent åŸºç¡€</a> - å­¦ä¹  <code>create_agent()</code> çš„é«˜çº§ç”¨æ³•</li>
                            <li><a href="08-rag.html">RAG è¯¦è§£</a> - æ„å»ºæ£€ç´¢å¢å¼ºç”Ÿæˆç³»ç»Ÿ</li>
                            <li><a href="11-customer-service.html">å®¢æœæœºå™¨äººå®æˆ˜</a> - å®Œæ•´çš„ä¼ä¸šçº§é¡¹ç›®</li>
                        </ul>
                    </div>
                </section>

                <!-- å‚è€ƒèµ„æº -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”— å‚è€ƒèµ„æº</h2>
                    <ul>
                        <li>
                            <a href="https://docs.langchain.com/oss/python/langchain/quickstart" target="_blank">
                                LangChain å®˜æ–¹ Quick Start
                            </a>
                        </li>
                        <li>
                            <a href="https://docs.langchain.com/oss/python/langchain/agents" target="_blank">
                                Agents å®˜æ–¹æ–‡æ¡£
                            </a>
                        </li>
                        <li>
                            <a href="https://python.langchain.com/docs/get_started/introduction" target="_blank">
                                LangChain Python æ–‡æ¡£
                            </a>
                        </li>
                        <li>
                            <a href="https://smith.langchain.com/" target="_blank">
                                LangSmith - ç›‘æ§å’Œè°ƒè¯•å¹³å°
                            </a>
                        </li>
                    </ul>
                </section>

                <!-- é¡µé¢å¯¼èˆª -->
                                <nav class="page-navigation">
                    <a href="index.html" class="nav-button prev">
                        â† ä¸Šä¸€é¡µï¼šä¸»é¡µ
                    </a>
                    <a href="02-architecture.html" class="nav-button next">
                        ä¸‹ä¸€é¡µï¼šæ ¸å¿ƒæ¶æ„ â†’
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" aria-label="è¿”å›é¡¶éƒ¨">â†‘</button>

    <!-- JavaScript -->
    <script src="assets/js/mermaid-init.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</body>
</html>
