<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LangChain 1.0 æ ¸å¿ƒæ¶æ„ - æ·±å…¥ç†è§£ LangChain çš„è®¾è®¡å“²å­¦å’Œæ¨¡å—ç»„ç»‡">
    <title>æ ¸å¿ƒæ¶æ„ | LangChain 1.0 Python çŸ¥è¯†æ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <button class="mobile-menu-button" aria-label="æ‰“å¼€èœå•">â˜°</button>

    <div class="container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">ğŸ¦œ LangChain 1.0</h1>
                <p class="sidebar-subtitle">Python å®Œæ•´å­¦ä¹ æŒ‡å—</p>
            </div>

            <ul class="nav-menu">
                <li class="nav-section">
                    <div class="nav-section-title">å¼€å§‹</div>
                    <ul>
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <span class="nav-icon">ğŸ </span>
                                ä¸»é¡µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">åŸºç¡€ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="01-introduction.html" class="nav-link">
                                <span class="nav-icon">ğŸ“–</span>
                                LangChain ç®€ä»‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="02-architecture.html" class="nav-link">
                                <span class="nav-icon">ğŸ—ï¸</span>
                                æ ¸å¿ƒæ¶æ„
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="03-models.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤–</span>
                                æ¨¡å‹æ¥å£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="04-messages.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¬</span>
                                æ¶ˆæ¯ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="05-tools.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                å·¥å…·ç³»ç»Ÿ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">è¿›é˜¶ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="06-agents.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                Agent åŸºç¡€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="07-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="08-rag.html" class="nav-link">
                                <span class="nav-icon">ğŸ”</span>
                                RAG è¯¦è§£
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="09-lcel.html" class="nav-link">
                                <span class="nav-icon">ğŸ”—</span>
                                LCEL è¡¨è¾¾å¼
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">é«˜çº§åº”ç”¨</div>
                    <ul>
                        <li class="nav-item">
                            <a href="10-runtime.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                Runtime ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="11-checkpointer.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¾</span>
                                æŒä¹…åŒ–ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="12-streaming.html" class="nav-link">
                                <span class="nav-icon">ğŸŒŠ</span>
                                æµå¼è¾“å‡º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="13-human-in-loop.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="14-long-term-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ—„ï¸</span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="15-langgraph.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                LangGraph
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">å®æˆ˜ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="16-customer-service.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å®¢æœæœºå™¨äºº
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="17-best-practices.html" class="nav-link">
                                <span class="nav-icon">âœ¨</span>
                                æœ€ä½³å®è·µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">å‚è€ƒç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="18-api-reference.html" class="nav-link">
                                <span class="nav-icon">ğŸ“š</span>
                                API é€ŸæŸ¥è¡¨
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="19-troubleshooting.html" class="nav-link">
                                <span class="nav-icon">ğŸ›</span>
                                æ•…éšœæ’é™¤
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="20-migration.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                è¿ç§»æŒ‡å—
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">æ‰©å±•ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="21-structured-output.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                ç»“æ„åŒ–è¾“å‡º
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">DeepAgents ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="22-deepagents-quickstart.html" class="nav-link">
                                <span class="nav-icon">ğŸš€</span>
                                å¿«é€Ÿå¼€å§‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="23-deepagents-customization.html" class="nav-link">
                                <span class="nav-icon">ğŸ¨</span>
                                å®šåˆ¶åŒ–
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="24-deepagents-harness.html" class="nav-link">
                                <span class="nav-icon">ğŸ›ï¸</span>
                                Harness ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="25-deepagents-backends.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                åç«¯é…ç½®
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="26-deepagents-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="27-deepagents-hitl.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="28-deepagents-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ§ </span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="29-deepagents-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">Multi-Agent ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="30-multi-agent-index.html" class="nav-link">
                                <span class="nav-icon">ğŸŒ</span>
                                æ¦‚è¿°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="31-multi-agent-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="32-multi-agent-handoffs.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                äº¤æ¥æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="33-multi-agent-skills.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                æŠ€èƒ½ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="34-multi-agent-router.html" class="nav-link">
                                <span class="nav-icon">ğŸ§­</span>
                                è·¯ç”±æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="35-multi-agent-workflow.html" class="nav-link">
                                <span class="nav-icon">ğŸ”€</span>
                                è‡ªå®šä¹‰å·¥ä½œæµ
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                <nav class="breadcrumb">
                    <span class="breadcrumb-item">
                        <a href="index.html" class="breadcrumb-link">ä¸»é¡µ</a>
                    </span>
                    <span class="breadcrumb-item">
                        è¿›é˜¶ç¯‡
                    </span>
                    <span class="breadcrumb-item">
                        RAG è¯¦è§£
                    </span>
                </nav>

                <!-- é¡µé¢æ ‡é¢˜ -->
                <header class="page-header">
                    <h1 class="page-title">ğŸ” RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰è¯¦è§£</h1>
                    <p class="page-subtitle">
                        æ·±å…¥ç†è§£ RAG æŠ€æœ¯åŸç†ï¼ŒæŒæ¡æ–‡æ¡£åŠ è½½ã€æ–‡æœ¬åˆ†å‰²ã€å‘é‡å­˜å‚¨å’Œæ£€ç´¢ç­–ç•¥ï¼Œ
                        æ„å»ºé«˜è´¨é‡çš„é—®ç­”ç³»ç»Ÿã€‚
                    </p>
                </header>

                <!-- RAG ç®€ä»‹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“š ä»€ä¹ˆæ˜¯ RAGï¼Ÿ</h2>
                    <p>
                        RAGï¼ˆRetrieval Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ˜¯ä¸€ç§å°†<strong>ä¿¡æ¯æ£€ç´¢</strong>
                        ä¸<strong>å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆ</strong>ç›¸ç»“åˆçš„æŠ€æœ¯ï¼Œç”¨äºæ„å»ºèƒ½å¤Ÿå›ç­”ç‰¹å®šé¢†åŸŸé—®é¢˜çš„ AI åº”ç”¨ã€‚
                    </p>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ’¡ æ ¸å¿ƒæ€æƒ³</div>
                        <p>
                            RAG é€šè¿‡åœ¨ç”Ÿæˆç­”æ¡ˆä¹‹å‰å…ˆä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œè®© LLM èƒ½å¤ŸåŸºäºæœ€æ–°ã€æœ€å‡†ç¡®çš„æ•°æ®ç”Ÿæˆå›ç­”ï¼Œ
                            è€Œä¸ä»…ä»…ä¾èµ–è®­ç»ƒæ—¶çš„çŸ¥è¯†ã€‚è¿™è§£å†³äº† LLM çš„ä¸¤å¤§é—®é¢˜ï¼š
                        </p>
                        <ul>
                            <li><strong>çŸ¥è¯†è¿‡æ—¶</strong>ï¼šLLM çš„çŸ¥è¯†æˆªæ­¢äºè®­ç»ƒæ—¶é—´</li>
                            <li><strong>å¹»è§‰é—®é¢˜</strong>ï¼šLLM å¯èƒ½ç”Ÿæˆä¸å‡†ç¡®çš„ä¿¡æ¯</li>
                        </ul>
                    </div>
                </section>

                <!-- RAG æ¶æ„å›¾ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ—ï¸ RAG ç³»ç»Ÿæ¶æ„</h2>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph TB
    subgraph "ç¦»çº¿é˜¶æ®µï¼ˆç´¢å¼•ï¼‰"
        A[åŸå§‹æ–‡æ¡£] --> B[Document Loader]
        B --> C[Text Splitter]
        C --> D[æ–‡æ¡£å— Chunks]
        D --> E[Embeddings æ¨¡å‹]
        E --> F[Vector Store]
    end

    subgraph "åœ¨çº¿é˜¶æ®µï¼ˆæŸ¥è¯¢ï¼‰"
        G[ç”¨æˆ·é—®é¢˜] --> H[Embeddings æ¨¡å‹]
        H --> I[æŸ¥è¯¢å‘é‡]
        I --> F
        F --> J[æ£€ç´¢ç›¸å…³æ–‡æ¡£]
        J --> K[LLM + Prompt]
        G --> K
        K --> L[ç”Ÿæˆç­”æ¡ˆ]
    end

    style A fill:#e1f5ff
    style G fill:#e1f5ff
    style L fill:#c8e6c9
    style F fill:#fff9c4
                        </div>
                    </div>

                    <p>RAG ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªä¸»è¦é˜¶æ®µï¼š</p>
                    <ul>
                        <li><strong>ç¦»çº¿é˜¶æ®µï¼ˆç´¢å¼•ï¼‰</strong>ï¼šå‡†å¤‡çŸ¥è¯†åº“ï¼Œå°†æ–‡æ¡£å‘é‡åŒ–å¹¶å­˜å‚¨</li>
                        <li><strong>åœ¨çº¿é˜¶æ®µï¼ˆæŸ¥è¯¢ï¼‰</strong>ï¼šæ¥æ”¶ç”¨æˆ·é—®é¢˜ï¼Œæ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œç”Ÿæˆç­”æ¡ˆ</li>
                    </ul>
                </section>

                <!-- ä¸¤ç§å®ç°æ–¹å¼å¯¹æ¯” -->
                <section class="content-section">
                    <h2 class="section-title">âš–ï¸ ä¸¤ç§å®ç°æ–¹å¼å¯¹æ¯”</h2>

                    <table>
                        <thead>
                            <tr>
                                <th>ç‰¹æ€§</th>
                                <th>Agentic RAGï¼ˆæ¨èï¼‰</th>
                                <th>Two-Step Chain</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>å·¥ä½œæ–¹å¼</strong></td>
                                <td>Agent è‡ªä¸»å†³å®šä½•æ—¶æ£€ç´¢</td>
                                <td>å›ºå®šå…ˆæ£€ç´¢åç”Ÿæˆ</td>
                            </tr>
                            <tr>
                                <td><strong>çµæ´»æ€§</strong></td>
                                <td>âœ… é«˜ - å¯å¤šæ¬¡æ£€ç´¢</td>
                                <td>âŒ ä½ - ä»…æ£€ç´¢ä¸€æ¬¡</td>
                            </tr>
                            <tr>
                                <td><strong>æŸ¥è¯¢ä¼˜åŒ–</strong></td>
                                <td>âœ… å¯æ ¹æ®ä¸Šä¸‹æ–‡ä¼˜åŒ–æŸ¥è¯¢</td>
                                <td>âŒ ç›´æ¥ä½¿ç”¨ç”¨æˆ·é—®é¢˜</td>
                            </tr>
                            <tr>
                                <td><strong>æˆæœ¬</strong></td>
                                <td>âš ï¸ è¾ƒé«˜ï¼ˆæ¯æ¬¡æ£€ç´¢2ä¸ªLLMè°ƒç”¨ï¼‰</td>
                                <td>âœ… è¾ƒä½ï¼ˆ1ä¸ªLLMè°ƒç”¨ï¼‰</td>
                            </tr>
                            <tr>
                                <td><strong>å»¶è¿Ÿ</strong></td>
                                <td>âš ï¸ è¾ƒé«˜</td>
                                <td>âœ… è¾ƒä½</td>
                            </tr>
                            <tr>
                                <td><strong>é€‚ç”¨åœºæ™¯</strong></td>
                                <td>å¤æ‚é—®é¢˜ã€å¤šè½®å¯¹è¯</td>
                                <td>ç®€å•é—®ç­”ã€å¿«é€Ÿå“åº”</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box tip">
                        <div class="info-box-title">âœ… æ¨èé€‰æ‹©</div>
                        <p>
                            å¯¹äºå¤§å¤šæ•°ä¼ä¸šåº”ç”¨ï¼Œæ¨èä½¿ç”¨ <strong>Agentic RAG</strong>ï¼Œå› ä¸ºï¼š
                        </p>
                        <ul>
                            <li>èƒ½å¤Ÿå¤„ç†å¤æ‚çš„å¤šæ­¥é—®é¢˜</li>
                            <li>å¯ä»¥æ ¹æ®éœ€è¦å¤šæ¬¡æ£€ç´¢ä¿¡æ¯</li>
                            <li>æ›´æ™ºèƒ½åœ°ç†è§£ç”¨æˆ·æ„å›¾</li>
                            <li>æ”¯æŒå¤šè½®å¯¹è¯å’Œä¸Šä¸‹æ–‡ç†è§£</li>
                        </ul>
                    </div>
                </section>

                <!-- å®Œæ•´å®ç°æ­¥éª¤ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸš€ å®Œæ•´å®ç°æ­¥éª¤</h2>

                    <h3 class="subsection-title">ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Bash</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-bash"># å®‰è£…å¿…è¦çš„åŒ…
pip install -U langchain langchain-openai langchain-chroma
pip install langchain-community langchain-text-splitters
pip install bs4  # ç”¨äºç½‘é¡µåŠ è½½</code></pre>
                    </div>

                    <h3 class="subsection-title">ç¬¬äºŒæ­¥ï¼šæ–‡æ¡£åŠ è½½ï¼ˆLoadï¼‰</h3>
                    <p>ä½¿ç”¨ Document Loaders åŠ è½½å„ç§æ ¼å¼çš„æ–‡æ¡£ï¼š</p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">import bs4
from langchain_community.document_loaders import WebBaseLoader, PyPDFLoader, TextLoader

# æ–¹å¼1ï¼šåŠ è½½ç½‘é¡µ
web_loader = WebBaseLoader(
    web_paths=("https://lilianweng.github.io/posts/2023-06-23-agent/",),
    bs_kwargs=dict(
        parse_only=bs4.SoupStrainer(
            class_=("post-content", "post-title", "post-header")
        )
    ),
)
web_docs = web_loader.load()

# æ–¹å¼2ï¼šåŠ è½½ PDF
pdf_loader = PyPDFLoader("document.pdf")
pdf_docs = pdf_loader.load()

# æ–¹å¼3ï¼šåŠ è½½æ–‡æœ¬æ–‡ä»¶
text_loader = TextLoader("document.txt", encoding="utf-8")
text_docs = text_loader.load()

print(f"åŠ è½½äº† {len(web_docs)} ä¸ªæ–‡æ¡£")
print(f"ç¬¬ä¸€ä¸ªæ–‡æ¡£å†…å®¹é•¿åº¦: {len(web_docs[0].page_content)} å­—ç¬¦")</code></pre>
                    </div>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ“ å¸¸ç”¨ Document Loaders</div>
                        <table style="margin-top: 0.5rem;">
                            <thead>
                                <tr>
                                    <th>åŠ è½½å™¨</th>
                                    <th>ç”¨é€”</th>
                                    <th>å¯¼å…¥è·¯å¾„</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>WebBaseLoader</code></td>
                                    <td>ç½‘é¡µå†…å®¹</td>
                                    <td><code>langchain_community.document_loaders</code></td>
                                </tr>
                                <tr>
                                    <td><code>PyPDFLoader</code></td>
                                    <td>PDF æ–‡ä»¶</td>
                                    <td><code>langchain_community.document_loaders</code></td>
                                </tr>
                                <tr>
                                    <td><code>CSVLoader</code></td>
                                    <td>CSV æ–‡ä»¶</td>
                                    <td><code>langchain_community.document_loaders</code></td>
                                </tr>
                                <tr>
                                    <td><code>UnstructuredMarkdownLoader</code></td>
                                    <td>Markdown æ–‡ä»¶</td>
                                    <td><code>langchain_community.document_loaders</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3 class="subsection-title">ç¬¬ä¸‰æ­¥ï¼šæ–‡æœ¬åˆ†å‰²ï¼ˆSplitï¼‰</h3>
                    <p>å°†é•¿æ–‡æ¡£åˆ‡åˆ†æˆé€‚åˆå‘é‡åŒ–çš„å°å—ï¼š</p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">from langchain_text_splitters import RecursiveCharacterTextSplitter

# åˆ›å»ºæ–‡æœ¬åˆ†å‰²å™¨
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=1000,        # æ¯ä¸ªå—çš„å­—ç¬¦æ•°
    chunk_overlap=200,      # å—ä¹‹é—´çš„é‡å å­—ç¬¦æ•°
    length_function=len,    # è®¡ç®—é•¿åº¦çš„å‡½æ•°
    is_separator_regex=False,
)

# åˆ†å‰²æ–‡æ¡£
all_splits = text_splitter.split_documents(web_docs)

print(f"æ–‡æ¡£è¢«åˆ†å‰²æˆ {len(all_splits)} ä¸ªå—")
print(f"ç¬¬ä¸€ä¸ªå—é•¿åº¦: {len(all_splits[0].page_content)} å­—ç¬¦")
print(f"ç¬¬ä¸€ä¸ªå—å†…å®¹é¢„è§ˆ: {all_splits[0].page_content[:200]}...")</code></pre>
                    </div>

                    <div class="info-box tip">
                        <div class="info-box-title">ğŸ’¡ åˆ†å‰²ç­–ç•¥é€‰æ‹©</div>
                        <ul>
                            <li><strong>RecursiveCharacterTextSplitter</strong>ï¼ˆæ¨èï¼‰ï¼šé€’å½’åœ°å°è¯•å¤šç§åˆ†éš”ç¬¦</li>
                            <li><strong>CharacterTextSplitter</strong>ï¼šåŸºäºå›ºå®šå­—ç¬¦æ•°åˆ†å‰²</li>
                            <li><strong>TokenTextSplitter</strong>ï¼šåŸºäº Token æ•°é‡åˆ†å‰²</li>
                            <li><strong>MarkdownHeaderTextSplitter</strong>ï¼šåŸºäº Markdown æ ‡é¢˜åˆ†å‰²</li>
                        </ul>
                        <p style="margin-top: 0.5rem;">
                            <strong>chunk_size å»ºè®®å€¼</strong>ï¼š500-1500 å­—ç¬¦<br>
                            <strong>chunk_overlap å»ºè®®å€¼</strong>ï¼šchunk_size çš„ 10-20%
                        </p>
                    </div>

                    <h3 class="subsection-title">ç¬¬å››æ­¥ï¼šå‘é‡åŒ–å’Œå­˜å‚¨ï¼ˆStoreï¼‰</h3>
                    <p>å°†æ–‡æœ¬å—è½¬æ¢ä¸ºå‘é‡å¹¶å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ï¼š</p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">import os
from langchain_openai import OpenAIEmbeddings
from langchain_chroma import Chroma

# è®¾ç½® API Key
os.environ["OPENAI_API_KEY"] = "your-api-key-here"

# åˆå§‹åŒ– Embeddings æ¨¡å‹
embeddings = OpenAIEmbeddings(model="text-embedding-3-small")

# åˆ›å»ºå‘é‡å­˜å‚¨å¹¶æ·»åŠ æ–‡æ¡£
vector_store = Chroma.from_documents(
    documents=all_splits,
    embedding=embeddings,
    persist_directory="./chroma_db"  # æŒä¹…åŒ–å­˜å‚¨è·¯å¾„
)

print(f"å‘é‡å­˜å‚¨åˆ›å»ºå®Œæˆï¼ŒåŒ…å« {len(all_splits)} ä¸ªæ–‡æ¡£å—")</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Vector Stores å¯¹æ¯”</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Vector Store</th>
                                <th>ç‰¹ç‚¹</th>
                                <th>é€‚ç”¨åœºæ™¯</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Chroma</strong></td>
                                <td>è½»é‡çº§ã€æ˜“ç”¨ã€æ”¯æŒæŒä¹…åŒ–</td>
                                <td>æœ¬åœ°å¼€å‘ã€åŸå‹éªŒè¯ã€ä¸­å°å‹åº”ç”¨</td>
                            </tr>
                            <tr>
                                <td><strong>FAISS</strong></td>
                                <td>é«˜æ€§èƒ½ã€å†…å­˜å­˜å‚¨ã€GPU åŠ é€Ÿ</td>
                                <td>å¤§è§„æ¨¡æ•°æ®ã€éœ€è¦æè‡´æ€§èƒ½</td>
                            </tr>
                            <tr>
                                <td><strong>Pinecone</strong></td>
                                <td>äº‘æ‰˜ç®¡ã€é«˜å¯ç”¨ã€æ˜“æ‰©å±•</td>
                                <td>ç”Ÿäº§ç¯å¢ƒã€éœ€è¦äº‘æœåŠ¡</td>
                            </tr>
                            <tr>
                                <td><strong>Qdrant</strong></td>
                                <td>å¼€æºã€åŠŸèƒ½å¼ºå¤§ã€å¯è‡ªæ‰˜ç®¡</td>
                                <td>ä¼ä¸šçº§åº”ç”¨ã€éœ€è¦è‡ªä¸»æ§åˆ¶</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 class="subsection-title">ç¬¬äº”æ­¥ï¼šåˆ›å»ºæ£€ç´¢å·¥å…·</h3>
                    <p>ä½¿ç”¨ <code>@tool</code> è£…é¥°å™¨åˆ›å»ºæ£€ç´¢å·¥å…·ï¼Œä¾› Agent ä½¿ç”¨ï¼š</p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">from langchain.tools import tool

@tool(response_format="content_and_artifact")
def retrieve_context(query: str):
    """ä»çŸ¥è¯†åº“æ£€ç´¢ç›¸å…³ä¿¡æ¯æ¥å›ç­”ç”¨æˆ·é—®é¢˜ã€‚

    Args:
        query: ç”¨æˆ·çš„æŸ¥è¯¢é—®é¢˜

    Returns:
        æ£€ç´¢åˆ°çš„ç›¸å…³æ–‡æ¡£å†…å®¹å’ŒåŸå§‹æ–‡æ¡£å¯¹è±¡
    """
    # ä½¿ç”¨ç›¸ä¼¼åº¦æœç´¢æ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼ˆè¿”å›æœ€ç›¸å…³çš„ k=2 ä¸ªæ–‡æ¡£ï¼‰
    retrieved_docs = vector_store.similarity_search(query, k=2)

    # æ ¼å¼åŒ–æ£€ç´¢ç»“æœ
    serialized = "\n\n".join(
        f"æ¥æº: {doc.metadata}\nå†…å®¹: {doc.page_content}"
        for doc in retrieved_docs
    )

    return serialized, retrieved_docs

# æµ‹è¯•æ£€ç´¢å·¥å…·
test_query = "ä»€ä¹ˆæ˜¯ Agentï¼Ÿ"
result, docs = retrieve_context.invoke({"query": test_query})
print(f"æ£€ç´¢ç»“æœ:\n{result}")</code></pre>
                    </div>

                    <h3 class="subsection-title">ç¬¬å…­æ­¥ï¼šæ„å»º RAG Agent</h3>
                    <p>ä½¿ç”¨ LangChain 1.0 çš„ <code>create_agent()</code> å‡½æ•°åˆ›å»º Agentic RAGï¼š</p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">from langchain.agents import create_agent
from langchain.chat_models import init_chat_model

# åˆå§‹åŒ–æ¨¡å‹
model = init_chat_model("gpt-4", model_provider="openai")

# å®šä¹‰ç³»ç»Ÿæç¤ºè¯
system_prompt = """ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Œå¯ä»¥è®¿é—®çŸ¥è¯†åº“æ¥å›ç­”é—®é¢˜ã€‚

ä½¿ç”¨æ£€ç´¢å·¥å…· retrieve_context æ¥æŸ¥æ‰¾ç›¸å…³ä¿¡æ¯ã€‚å½“ç”¨æˆ·æé—®æ—¶ï¼š
1. å…ˆä½¿ç”¨æ£€ç´¢å·¥å…·æŸ¥æ‰¾ç›¸å…³ä¿¡æ¯
2. åŸºäºæ£€ç´¢åˆ°çš„ä¿¡æ¯ç”Ÿæˆå‡†ç¡®çš„ç­”æ¡ˆ
3. å¦‚æœæ£€ç´¢ä¸åˆ°ç›¸å…³ä¿¡æ¯ï¼Œè¯šå®åœ°å‘ŠçŸ¥ç”¨æˆ·
4. åœ¨å›ç­”ä¸­å¼•ç”¨ä¿¡æ¯æ¥æº

å§‹ç»ˆä¿æŒä¸“ä¸šã€å‡†ç¡®å’Œæœ‰å¸®åŠ©ã€‚"""

# åˆ›å»º Agent
agent = create_agent(
    model=model,
    tools=[retrieve_context],
    system_prompt=system_prompt
)

# ä½¿ç”¨ Agent å›ç­”é—®é¢˜
response = agent.invoke({
    "messages": [{"role": "user", "content": "è¯·ä»‹ç»ä¸€ä¸‹ LangChain ä¸­çš„ Agent"}]
})

print(response["messages"][-1].content)</code></pre>
                    </div>
                </section>

                <!-- å®Œæ•´å¯è¿è¡Œç¤ºä¾‹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ’» å®Œæ•´å¯è¿è¡Œç¤ºä¾‹</h2>
                    <p>å°†ä»¥ä¸Šæ­¥éª¤æ•´åˆæˆä¸€ä¸ªå®Œæ•´çš„ RAG ç³»ç»Ÿï¼š</p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§ - å®Œæ•´é¡¹ç›®</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
å®Œæ•´çš„ RAG ç³»ç»Ÿå®ç°ç¤ºä¾‹
é€‚ç”¨äº LangChain 1.0
"""
import os
import bs4
from langchain_community.document_loaders import WebBaseLoader
from langchain_text_splitters import RecursiveCharacterTextSplitter
from langchain_openai import OpenAIEmbeddings
from langchain_chroma import Chroma
from langchain.tools import tool
from langchain.agents import create_agent
from langchain.chat_models import init_chat_model

# ==================== é…ç½® ====================
os.environ["OPENAI_API_KEY"] = "your-api-key-here"

# ==================== ç¬¬1æ­¥ï¼šåŠ è½½æ–‡æ¡£ ====================
print("æ­£åœ¨åŠ è½½æ–‡æ¡£...")
loader = WebBaseLoader(
    web_paths=("https://python.langchain.com/docs/tutorials/agents/",),
    bs_kwargs=dict(parse_only=bs4.SoupStrainer(class_=("main",)))
)
docs = loader.load()
print(f"âœ“ åŠ è½½äº† {len(docs)} ä¸ªæ–‡æ¡£")

# ==================== ç¬¬2æ­¥ï¼šåˆ†å‰²æ–‡æœ¬ ====================
print("æ­£åœ¨åˆ†å‰²æ–‡æœ¬...")
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=1000,
    chunk_overlap=200
)
all_splits = text_splitter.split_documents(docs)
print(f"âœ“ åˆ†å‰²æˆ {len(all_splits)} ä¸ªæ–‡æœ¬å—")

# ==================== ç¬¬3æ­¥ï¼šåˆ›å»ºå‘é‡å­˜å‚¨ ====================
print("æ­£åœ¨åˆ›å»ºå‘é‡å­˜å‚¨...")
embeddings = OpenAIEmbeddings(model="text-embedding-3-small")
vector_store = Chroma.from_documents(
    documents=all_splits,
    embedding=embeddings,
    persist_directory="./chroma_langchain_docs"
)
print(f"âœ“ å‘é‡å­˜å‚¨åˆ›å»ºå®Œæˆ")

# ==================== ç¬¬4æ­¥ï¼šåˆ›å»ºæ£€ç´¢å·¥å…· ====================
@tool(response_format="content_and_artifact")
def retrieve_context(query: str):
    """ä» LangChain æ–‡æ¡£ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ã€‚"""
    retrieved_docs = vector_store.similarity_search(query, k=3)
    serialized = "\n\n".join(
        f"ã€æ–‡æ¡£ {i+1}ã€‘\n{doc.page_content}"
        for i, doc in enumerate(retrieved_docs)
    )
    return serialized, retrieved_docs

# ==================== ç¬¬5æ­¥ï¼šåˆ›å»º RAG Agent ====================
print("æ­£åœ¨åˆ›å»º RAG Agent...")
model = init_chat_model("gpt-4o-mini", model_provider="openai")

system_prompt = """ä½ æ˜¯ LangChain æ–‡æ¡£åŠ©æ‰‹ã€‚ä½¿ç”¨ retrieve_context å·¥å…·æŸ¥æ‰¾ç›¸å…³ä¿¡æ¯ã€‚

å›ç­”è¦æ±‚ï¼š
- å…ˆæ£€ç´¢ç›¸å…³ä¿¡æ¯å†å›ç­”
- åŸºäºæ£€ç´¢å†…å®¹ç”Ÿæˆå‡†ç¡®ç­”æ¡ˆ
- å¦‚æœä¿¡æ¯ä¸è¶³ï¼Œè¯´æ˜éœ€è¦æ›´å¤šä¸Šä¸‹æ–‡
- ç”¨ä¸­æ–‡å›ç­”ï¼Œä¿æŒä¸“ä¸šå’Œå‹å¥½"""

agent = create_agent(
    model=model,
    tools=[retrieve_context],
    system_prompt=system_prompt
)
print("âœ“ RAG Agent åˆ›å»ºå®Œæˆ\n")

# ==================== ç¬¬6æ­¥ï¼šäº¤äº’å¼é—®ç­” ====================
def ask_question(question: str):
    """å‘ RAG Agent æé—®"""
    print(f"\n{'='*60}")
    print(f"é—®é¢˜: {question}")
    print('='*60)

    response = agent.invoke({
        "messages": [{"role": "user", "content": question}]
    })

    answer = response["messages"][-1].content
    print(f"\nå›ç­”:\n{answer}\n")
    return answer

# ç¤ºä¾‹é—®ç­”
if __name__ == "__main__":
    questions = [
        "ä»€ä¹ˆæ˜¯ LangChain Agentï¼Ÿ",
        "å¦‚ä½•åˆ›å»ºä¸€ä¸ª Agentï¼Ÿ",
        "LangChain æ”¯æŒå“ªäº›æ¨¡å‹æä¾›å•†ï¼Ÿ"
    ]

    for q in questions:
        ask_question(q)</code></pre>
                    </div>

                    <div class="info-box tip">
                        <div class="info-box-title">ğŸ’¾ é¡¹ç›®æ–‡ä»¶ä½ç½®</div>
                        <p>
                            å®Œæ•´çš„ RAG ç¤ºä¾‹é¡¹ç›®ä»£ç ä½äºï¼š
                            <code>projects/rag-example/main.py</code>
                        </p>
                        <p>
                            åŒ…å« requirements.txt å’Œè¯¦ç»†çš„ README è¯´æ˜ã€‚
                        </p>
                    </div>
                </section>

                <!-- æ€§èƒ½ä¼˜åŒ–æŠ€å·§ -->
                <section class="content-section">
                    <h2 class="section-title">âš¡ æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2>

                    <h3 class="subsection-title">1. Chunk Size ä¼˜åŒ–</h3>
                    <p>æ ¹æ®åº”ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„åˆ†å—å¤§å°ï¼š</p>
                    <ul>
                        <li><strong>å°å—ï¼ˆ300-500ï¼‰</strong>ï¼šç²¾ç¡®åŒ¹é…ï¼Œé€‚åˆé—®ç­”</li>
                        <li><strong>ä¸­å—ï¼ˆ800-1200ï¼‰</strong>ï¼šå¹³è¡¡æ€§èƒ½ï¼Œé€šç”¨åœºæ™¯ï¼ˆæ¨èï¼‰</li>
                        <li><strong>å¤§å—ï¼ˆ1500-2000ï¼‰</strong>ï¼šä¿ç•™ä¸Šä¸‹æ–‡ï¼Œé€‚åˆæ‘˜è¦</li>
                    </ul>

                    <h3 class="subsection-title">2. æ£€ç´¢ä¼˜åŒ–</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># ä½¿ç”¨ MMRï¼ˆæœ€å¤§è¾¹é™…ç›¸å…³æ€§ï¼‰æ£€ç´¢ï¼Œé¿å…ç»“æœé‡å¤
retrieved_docs = vector_store.max_marginal_relevance_search(
    query="ç”¨æˆ·é—®é¢˜",
    k=4,              # è¿”å›4ä¸ªç»“æœ
    fetch_k=20,       # å…ˆè·å–20ä¸ªå€™é€‰
    lambda_mult=0.5   # å¹³è¡¡ç›¸å…³æ€§å’Œå¤šæ ·æ€§
)

# ä½¿ç”¨ç›¸ä¼¼åº¦é˜ˆå€¼è¿‡æ»¤ä½è´¨é‡ç»“æœ
retrieved_docs = vector_store.similarity_search_with_score(
    query="ç”¨æˆ·é—®é¢˜",
    k=5
)
filtered_docs = [doc for doc, score in retrieved_docs if score > 0.7]</code></pre>
                    </div>

                    <h3 class="subsection-title">3. Embeddings æ¨¡å‹é€‰æ‹©</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>æ¨¡å‹</th>
                                <th>ç»´åº¦</th>
                                <th>æ€§èƒ½</th>
                                <th>æˆæœ¬</th>
                                <th>æ¨èåœºæ™¯</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>text-embedding-3-small</td>
                                <td>1536</td>
                                <td>å¿«é€Ÿ</td>
                                <td>ä½</td>
                                <td>é€šç”¨åº”ç”¨ï¼ˆæ¨èï¼‰</td>
                            </tr>
                            <tr>
                                <td>text-embedding-3-large</td>
                                <td>3072</td>
                                <td>æœ€ä½³</td>
                                <td>é«˜</td>
                                <td>é«˜ç²¾åº¦è¦æ±‚</td>
                            </tr>
                            <tr>
                                <td>HuggingFace æ¨¡å‹</td>
                                <td>768+</td>
                                <td>ä¸­ç­‰</td>
                                <td>å…è´¹</td>
                                <td>é¢„ç®—æœ‰é™</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 class="subsection-title">4. ç¼“å­˜ç­–ç•¥</h3>
                    <p>å¯¹äºé¢‘ç¹è®¿é—®çš„æ–‡æ¡£ï¼Œä½¿ç”¨ç¼“å­˜å‡å°‘é‡å¤è®¡ç®—ï¼š</p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">from functools import lru_cache

@lru_cache(maxsize=100)
def cached_retrieve(query: str, k: int = 3):
    """ç¼“å­˜æ£€ç´¢ç»“æœ"""
    return vector_store.similarity_search(query, k=k)

# ä½¿ç”¨ç¼“å­˜çš„æ£€ç´¢
results = cached_retrieve("ä»€ä¹ˆæ˜¯ Agentï¼Ÿ")</code></pre>
                    </div>
                </section>

                <!-- å¸¸è§é—®é¢˜ -->
                <section class="content-section">
                    <h2 class="section-title">â“ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>

                    <h3 class="subsection-subtitle">Q1: æ£€ç´¢ç»“æœä¸å‡†ç¡®æ€ä¹ˆåŠï¼Ÿ</h3>
                    <ul>
                        <li>ä¼˜åŒ– chunk_size å’Œ chunk_overlap</li>
                        <li>ä½¿ç”¨æ›´å¥½çš„ embeddings æ¨¡å‹</li>
                        <li>å¢åŠ  k å€¼ï¼ˆæ£€ç´¢æ›´å¤šæ–‡æ¡£ï¼‰</li>
                        <li>æ”¹è¿›æŸ¥è¯¢é‡å†™ï¼ˆè®© Agent ä¼˜åŒ–ç”¨æˆ·é—®é¢˜ï¼‰</li>
                    </ul>

                    <h3 class="subsection-subtitle">Q2: å¦‚ä½•å¤„ç†å¤šè¯­è¨€æ–‡æ¡£ï¼Ÿ</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># ä½¿ç”¨æ”¯æŒå¤šè¯­è¨€çš„ embeddings æ¨¡å‹
from langchain_openai import OpenAIEmbeddings

embeddings = OpenAIEmbeddings(
    model="text-embedding-3-large"  # æ”¯æŒå¤šè¯­è¨€
)</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q3: å‘é‡æ•°æ®åº“å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ</h3>
                    <ul>
                        <li>å®šæœŸæ¸…ç†è¿‡æ—¶æ–‡æ¡£</li>
                        <li>ä½¿ç”¨æ›´å°çš„ chunk_size</li>
                        <li>è€ƒè™‘ä½¿ç”¨åˆ†å¸ƒå¼å‘é‡æ•°æ®åº“ï¼ˆå¦‚ Pinecone, Qdrantï¼‰</li>
                        <li>å®æ–½æ–‡æ¡£è¿‡æœŸç­–ç•¥</li>
                    </ul>

                    <h3 class="subsection-subtitle">Q4: å¦‚ä½•è¯„ä¼° RAG ç³»ç»Ÿè´¨é‡ï¼Ÿ</h3>
                    <p>å…³é”®æŒ‡æ ‡ï¼š</p>
                    <ul>
                        <li><strong>æ£€ç´¢å‡†ç¡®ç‡</strong>ï¼šæ£€ç´¢åˆ°çš„æ–‡æ¡£æ˜¯å¦ç›¸å…³</li>
                        <li><strong>ç­”æ¡ˆè´¨é‡</strong>ï¼šç”Ÿæˆçš„ç­”æ¡ˆæ˜¯å¦å‡†ç¡®</li>
                        <li><strong>å“åº”æ—¶é—´</strong>ï¼šç«¯åˆ°ç«¯å»¶è¿Ÿ</li>
                        <li><strong>æˆæœ¬</strong>ï¼šAPI è°ƒç”¨è´¹ç”¨</li>
                    </ul>
                </section>

                <!-- è¿›é˜¶è¯é¢˜ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“ è¿›é˜¶è¯é¢˜</h2>

                    <h3 class="subsection-title">æ··åˆæ£€ç´¢ï¼ˆHybrid Searchï¼‰</h3>
                    <p>ç»“åˆå…³é”®è¯æœç´¢å’Œè¯­ä¹‰æœç´¢ï¼Œæé«˜æ£€ç´¢è´¨é‡ï¼š</p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">from langchain.retrievers import EnsembleRetriever
from langchain.retrievers import BM25Retriever

# åˆ›å»ºå¤šä¸ªæ£€ç´¢å™¨
vector_retriever = vector_store.as_retriever(search_kwargs={"k": 3})
bm25_retriever = BM25Retriever.from_documents(all_splits)
bm25_retriever.k = 3

# ç»„åˆæ£€ç´¢å™¨
ensemble_retriever = EnsembleRetriever(
    retrievers=[vector_retriever, bm25_retriever],
    weights=[0.6, 0.4]  # è¯­ä¹‰æœç´¢60%ï¼Œå…³é”®è¯æœç´¢40%
)

# ä½¿ç”¨æ··åˆæ£€ç´¢
results = ensemble_retriever.get_relevant_documents("ç”¨æˆ·é—®é¢˜")</code></pre>
                    </div>

                    <h3 class="subsection-title">Re-rankingï¼ˆé‡æ’åºï¼‰</h3>
                    <p>ä½¿ç”¨ä¸“é—¨çš„æ¨¡å‹å¯¹æ£€ç´¢ç»“æœé‡æ–°æ’åºï¼š</p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">from langchain.retrievers import ContextualCompressionRetriever
from langchain.retrievers.document_compressors import CohereRerank

# ä½¿ç”¨ Cohere é‡æ’åºæ¨¡å‹
compressor = CohereRerank(model="rerank-english-v2.0")

compression_retriever = ContextualCompressionRetriever(
    base_compressor=compressor,
    base_retriever=vector_retriever
)

# è·å–é‡æ’åºåçš„ç»“æœ
compressed_docs = compression_retriever.get_relevant_documents("ç”¨æˆ·é—®é¢˜")</code></pre>
                    </div>
                </section>

                <!-- å‚è€ƒèµ„æº -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“– å‚è€ƒèµ„æº</h2>
                    <ul>
                        <li>
                            <a href="https://docs.langchain.com/oss/python/langchain/rag" target="_blank">
                                LangChain å®˜æ–¹ RAG æ•™ç¨‹
                            </a>
                        </li>
                        <li>
                            <a href="https://python.langchain.com/docs/integrations/vectorstores/" target="_blank">
                                Vector Stores é›†æˆæ–‡æ¡£
                            </a>
                        </li>
                        <li>
                            <a href="https://python.langchain.com/docs/modules/data_connection/document_loaders/" target="_blank">
                                Document Loaders å®Œæ•´åˆ—è¡¨
                            </a>
                        </li>
                        <li>
                            <a href="https://python.langchain.com/docs/modules/data_connection/document_transformers/" target="_blank">
                                Text Splitters æ–‡æ¡£
                            </a>
                        </li>
                    </ul>
                </section>

                <!-- é¡µé¢å¯¼èˆª -->
                <nav class="page-navigation">
                    <a href="07-middleware.html" class="nav-button prev">
                        â† ä¸Šä¸€é¡µï¼šä¸­é—´ä»¶ç³»ç»Ÿ
                    </a>
                    <a href="09-lcel.html" class="nav-button next">
                        ä¸‹ä¸€é¡µï¼šLCEL è¡¨è¾¾å¼ â†’
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" aria-label="è¿”å›é¡¶éƒ¨">â†‘</button>

    <!-- JavaScript -->
    <script src="assets/js/mermaid-init.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</body>
</html>
