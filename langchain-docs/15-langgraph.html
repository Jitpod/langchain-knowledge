<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LangGraph è¯¦è§£ - çŠ¶æ€å›¾å’Œå·¥ä½œæµç¼–æ’æ¡†æ¶">
    <title>LangGraph | LangChain 1.0 Python çŸ¥è¯†æ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <button class="mobile-menu-button" aria-label="æ‰“å¼€èœå•">â˜°</button>

    <div class="container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">ğŸ¦œ LangChain 1.0</h1>
                <p class="sidebar-subtitle">Python å®Œæ•´å­¦ä¹ æŒ‡å—</p>
            </div>

            <ul class="nav-menu">
                <li class="nav-section">
                    <div class="nav-section-title">å¼€å§‹</div>
                    <ul>
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <span class="nav-icon">ğŸ </span>
                                ä¸»é¡µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">åŸºç¡€ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="01-introduction.html" class="nav-link">
                                <span class="nav-icon">ğŸ“–</span>
                                LangChain ç®€ä»‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="02-architecture.html" class="nav-link">
                                <span class="nav-icon">ğŸ—ï¸</span>
                                æ ¸å¿ƒæ¶æ„
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="03-models.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤–</span>
                                æ¨¡å‹æ¥å£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="04-messages.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¬</span>
                                æ¶ˆæ¯ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="05-tools.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                å·¥å…·ç³»ç»Ÿ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">è¿›é˜¶ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="06-agents.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                Agent åŸºç¡€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="07-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="08-rag.html" class="nav-link">
                                <span class="nav-icon">ğŸ”</span>
                                RAG è¯¦è§£
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="09-lcel.html" class="nav-link">
                                <span class="nav-icon">ğŸ”—</span>
                                LCEL è¡¨è¾¾å¼
                            </a>
                        </li>
                    </ul>
                </li>

                                <li class="nav-section">
                    <div class="nav-section-title">é«˜çº§åº”ç”¨</div>
                    <ul>
                        <li class="nav-item">
                            <a href="10-runtime.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                Runtime ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="11-checkpointer.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¾</span>
                                æŒä¹…åŒ–ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="12-streaming.html" class="nav-link">
                                <span class="nav-icon">ğŸŒŠ</span>
                                æµå¼è¾“å‡º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="13-human-in-loop.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="14-long-term-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ—„ï¸</span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a href="15-langgraph.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                LangGraph
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="16-context-engineering.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                ä¸Šä¸‹æ–‡å·¥ç¨‹
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="17-mcp.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                MCP åè®®
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">å®æˆ˜ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="18-customer-service.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å®¢æœæœºå™¨äºº
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="19-best-practices.html" class="nav-link">
                                <span class="nav-icon">âœ¨</span>
                                æœ€ä½³å®è·µ
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">å‚è€ƒç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="20-api-reference.html" class="nav-link">
                                <span class="nav-icon">ğŸ“š</span>
                                API é€ŸæŸ¥è¡¨
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="21-troubleshooting.html" class="nav-link">
                                <span class="nav-icon">ğŸ›</span>
                                æ•…éšœæ’é™¤
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="22-migration.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                è¿ç§»æŒ‡å—
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">æ‰©å±•ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="23-structured-output.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                ç»“æ„åŒ–è¾“å‡º
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">DeepAgents ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="24-deepagents-quickstart.html" class="nav-link">
                                <span class="nav-icon">ğŸš€</span>
                                å¿«é€Ÿå¼€å§‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="25-deepagents-customization.html" class="nav-link">
                                <span class="nav-icon">ğŸ¨</span>
                                å®šåˆ¶åŒ–
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="26-deepagents-harness.html" class="nav-link">
                                <span class="nav-icon">ğŸ›ï¸</span>
                                Harness ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="27-deepagents-backends.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                åç«¯é…ç½®
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="28-deepagents-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="29-deepagents-hitl.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="30-deepagents-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ§ </span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="31-deepagents-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶
                            </a>
                        </li>
                    </ul>
                </li>


                                <li class="nav-section">
                    <div class="nav-section-title">Multi-Agent ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="32-multi-agent-index.html" class="nav-link">
                                <span class="nav-icon">ğŸŒ</span>
                                æ¦‚è¿°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="33-multi-agent-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="34-multi-agent-handoffs.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                äº¤æ¥æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="35-multi-agent-skills.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                æŠ€èƒ½ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="36-multi-agent-router.html" class="nav-link">
                                <span class="nav-icon">ğŸ§­</span>
                                è·¯ç”±æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="37-multi-agent-workflow.html" class="nav-link">
                                <span class="nav-icon">ğŸ”€</span>
                                è‡ªå®šä¹‰å·¥ä½œæµ
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                <nav class="breadcrumb">
                    <span class="breadcrumb-item">
                        <a href="index.html" class="breadcrumb-link">ä¸»é¡µ</a>
                    </span>
                    <span class="breadcrumb-item">
                        é«˜çº§åº”ç”¨
                    </span>
                    <span class="breadcrumb-item">
                        LangGraph
                    </span>
                </nav>

                <!-- é¡µé¢æ ‡é¢˜ -->
                <header class="page-header">
                    <h1 class="page-title">ğŸ“Š LangGraph çŠ¶æ€å›¾ä¸å·¥ä½œæµ</h1>
                    <p class="page-subtitle">
                        æŒæ¡ LangGraph ä½çº§ç¼–æ’æ¡†æ¶ï¼Œæ„å»ºå¤æ‚çš„æœ‰çŠ¶æ€ Agent å·¥ä½œæµï¼Œ
                        å®ç°æŒä¹…åŒ–æ‰§è¡Œã€äººå·¥å¹²é¢„å’Œé•¿æœŸè¿è¡Œçš„æ™ºèƒ½ç³»ç»Ÿã€‚
                    </p>
                </header>

                <!-- LangGraph ç®€ä»‹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“š ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ</h2>
                    <p>
                        <strong>LangGraph</strong> æ˜¯ç”± LangChain Inc å¼€å‘çš„<strong>ä½çº§ç¼–æ’æ¡†æ¶å’Œè¿è¡Œæ—¶</strong>ï¼Œ
                        ä¸“é—¨ç”¨äºæ„å»ºã€ç®¡ç†å’Œéƒ¨ç½²<strong>é•¿æœŸè¿è¡Œçš„æœ‰çŠ¶æ€ Agent</strong>ã€‚
                        å®ƒè¢« Klarnaã€Replit å’Œ Elastic ç­‰å…¬å¸é‡‡ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚
                    </p>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ’¡ LangGraph æ ¸å¿ƒå®šä½</div>
                        <p>
                            LangGraph ä¸“æ³¨äº<strong>ä»£ç†ç¼–æ’</strong>è€Œéæç¤ºæˆ–æ¶æ„æŠ½è±¡ã€‚
                            å®ƒæä¾›äº†å¯¹ Agent å·¥ä½œæµçš„<strong>ç²¾ç»†æ§åˆ¶</strong>ï¼Œé€‚åˆéœ€è¦å¤æ‚ä»»åŠ¡å¤„ç†çš„åº”ç”¨ã€‚
                        </p>
                        <ul style="margin-top: 0.5rem;">
                            <li><strong>vs create_agent()</strong>ï¼šcreate_agent() æ˜¯é«˜çº§æŠ½è±¡ï¼Œè‡ªåŠ¨ç”Ÿæˆå·¥ä½œæµï¼›LangGraph éœ€è¦æ‰‹åŠ¨å®šä¹‰æ¯ä¸ªèŠ‚ç‚¹å’Œè¾¹</li>
                            <li><strong>çµæ´»æ€§</strong>ï¼šLangGraph æä¾›æ›´å¤§çš„çµæ´»æ€§ï¼Œä½†éœ€è¦æ›´å¤šä»£ç </li>
                            <li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤æ‚çš„å¤šæ­¥éª¤å·¥ä½œæµã€éœ€è¦ç²¾ç¡®æ§åˆ¶æ‰§è¡Œæµç¨‹çš„åº”ç”¨</li>
                        </ul>
                    </div>

                    <h3 class="subsection-title">äº”å¤§æ ¸å¿ƒä¼˜åŠ¿</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>ä¼˜åŠ¿</th>
                                <th>è¯´æ˜</th>
                                <th>åº”ç”¨åœºæ™¯</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>æŒä¹…åŒ–æ‰§è¡Œ</strong></td>
                                <td>Agent å¯åœ¨æ•…éšœä¸­æ¢å¤ï¼Œä»ä¸­æ–­ç‚¹ç»§ç»­</td>
                                <td>é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ã€éœ€è¦å®¹é”™çš„ç³»ç»Ÿ</td>
                            </tr>
                            <tr>
                                <td><strong>äººå·¥å¹²é¢„</strong></td>
                                <td>åœ¨ä»»ä½•ç‚¹æ£€æŸ¥å’Œä¿®æ”¹ Agent çŠ¶æ€</td>
                                <td>éœ€è¦å®¡æ‰¹çš„æ“ä½œã€è°ƒè¯•å¤æ‚æµç¨‹</td>
                            </tr>
                            <tr>
                                <td><strong>ç»¼åˆè®°å¿†</strong></td>
                                <td>æ”¯æŒçŸ­æœŸå·¥ä½œè®°å¿†å’Œè·¨ä¼šè¯é•¿æœŸè®°å¿†</td>
                                <td>å¤šè½®å¯¹è¯ã€ç”¨æˆ·åå¥½ç®¡ç†</td>
                            </tr>
                            <tr>
                                <td><strong>LangSmith è°ƒè¯•</strong></td>
                                <td>å¯è§†åŒ–å·¥å…·è¿½è¸ªæ‰§è¡Œè·¯å¾„å’ŒçŠ¶æ€è½¬æ¢</td>
                                <td>å¼€å‘è°ƒè¯•ã€æ€§èƒ½ä¼˜åŒ–</td>
                            </tr>
                            <tr>
                                <td><strong>ç”Ÿäº§å°±ç»ªéƒ¨ç½²</strong></td>
                                <td>å¯æ‰©å±•åŸºç¡€è®¾æ–½æ”¯æŒæœ‰çŠ¶æ€å·¥ä½œæµ</td>
                                <td>ä¼ä¸šçº§åº”ç”¨ã€å¤§è§„æ¨¡éƒ¨ç½²</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- æ ¸å¿ƒæ¶æ„ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ—ï¸ LangGraph æ ¸å¿ƒæ¶æ„</h2>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph TB
    START((START)) --> A[Node A: å¤„ç†è¾“å…¥]
    A --> B{æ¡ä»¶åˆ¤æ–­}

    B -->|æ¡ä»¶1| C[Node C: è·¯å¾„1]
    B -->|æ¡ä»¶2| D[Node D: è·¯å¾„2]
    B -->|å…¶ä»–| E[Node E: é»˜è®¤è·¯å¾„]

    C --> F[Node F: åˆå¹¶ç»“æœ]
    D --> F
    E --> F

    F --> G{éœ€è¦ç»§ç»­ï¼Ÿ}
    G -->|æ˜¯| A
    G -->|å¦| END((END))

    subgraph "çŠ¶æ€ï¼ˆStateï¼‰"
        S1[messages: list]
        S2[step_count: int]
        S3[result: str]
    end

    A -.æ›´æ–°.-> S1
    B -.è¯»å–.-> S2
    F -.æ›´æ–°.-> S3

    style START fill:#10b981,color:#fff
    style END fill:#ef4444,color:#fff
    style B fill:#f59e0b,color:#fff
    style G fill:#f59e0b,color:#fff
    style S1 fill:#e0e7ff
    style S2 fill:#e0e7ff
    style S3 fill:#e0e7ff
                        </div>
                    </div>

                    <h3 class="subsection-title">ä¸‰å¤§æ ¸å¿ƒç»„ä»¶</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>ç»„ä»¶</th>
                                <th>ä½œç”¨</th>
                                <th>ç±»æ¯”</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Stateï¼ˆçŠ¶æ€ï¼‰</strong></td>
                                <td>å…±äº«æ•°æ®ç»“æ„ï¼Œè¡¨ç¤ºåº”ç”¨çš„å½“å‰å¿«ç…§</td>
                                <td>æ•°æ®åº“ï¼Œå­˜å‚¨æ‰€æœ‰ä¿¡æ¯</td>
                            </tr>
                            <tr>
                                <td><strong>Nodesï¼ˆèŠ‚ç‚¹ï¼‰</strong></td>
                                <td>ç¼–ç  Agent é€»è¾‘çš„å‡½æ•°ï¼Œæ‰§è¡Œè®¡ç®—å¹¶è¿”å›æ›´æ–°</td>
                                <td>å·¥äººï¼Œå®Œæˆå…·ä½“ä»»åŠ¡</td>
                            </tr>
                            <tr>
                                <td><strong>Edgesï¼ˆè¾¹ï¼‰</strong></td>
                                <td>ç¡®å®šä¸‹ä¸€ä¸ªæ‰§è¡ŒèŠ‚ç‚¹çš„å‡½æ•°</td>
                                <td>è·¯æ ‡ï¼ŒæŒ‡æ˜ä¸‹ä¸€æ­¥æ–¹å‘</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box tip">
                        <div class="info-box-title">âœ… æ ¸å¿ƒåŸåˆ™</div>
                        <p style="font-size: 1.1em; margin: 0;">
                            <strong>"Nodes do the work, edges tell what to do next."</strong>
                        </p>
                        <p style="margin-top: 0.5rem;">
                            èŠ‚ç‚¹è´Ÿè´£æ‰§è¡Œå…·ä½“å·¥ä½œï¼Œè¾¹è´Ÿè´£å†³ç­–ä¸‹ä¸€æ­¥ã€‚
                        </p>
                    </div>
                </section>

                <!-- StateGraph åŸºç¡€ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ¯ StateGraph åŸºç¡€ä½¿ç”¨</h2>
                    <p>
                        <code>StateGraph</code> æ˜¯ LangGraph çš„ä¸»è¦å›¾å®ç°ï¼Œ
                        é€šè¿‡ç”¨æˆ·å®šä¹‰çš„ State å¯¹è±¡è¿›è¡Œå‚æ•°åŒ–ã€‚
                    </p>

                    <h3 class="subsection-title">æœ€ç®€å•çš„ç¤ºä¾‹</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
StateGraph æœ€ç®€ç¤ºä¾‹
åŠŸèƒ½ï¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„çŠ¶æ€å›¾
"""
from langgraph.graph import StateGraph, MessagesState, START, END

def mock_llm(state: MessagesState):
    """æ¨¡æ‹Ÿ LLM èŠ‚ç‚¹"""
    return {"messages": [{"role": "ai", "content": "hello world"}]}

# åˆ›å»ºçŠ¶æ€å›¾
graph = StateGraph(MessagesState)

# æ·»åŠ èŠ‚ç‚¹
graph.add_node("mock_llm", mock_llm)

# æ·»åŠ è¾¹
graph.add_edge(START, "mock_llm")  # ä» START åˆ° mock_llm
graph.add_edge("mock_llm", END)    # ä» mock_llm åˆ° END

# ç¼–è¯‘å›¾
compiled_graph = graph.compile()

# æ‰§è¡Œå›¾
result = compiled_graph.invoke({
    "messages": [{"role": "user", "content": "hi!"}]
})

print(result["messages"][-1]["content"])  # è¾“å‡ºï¼šhello world</code></pre>
                    </div>

                    <h3 class="subsection-title">å®šä¹‰è‡ªå®šä¹‰çŠ¶æ€</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
è‡ªå®šä¹‰çŠ¶æ€ç¤ºä¾‹
åŠŸèƒ½ï¼šå®šä¹‰åŒ…å«å¤šä¸ªå­—æ®µçš„çŠ¶æ€
"""
from typing_extensions import TypedDict
from typing import Annotated
from operator import add

class CustomState(TypedDict):
    # ç®€å•å­—æ®µï¼ˆè¦†ç›–æ¨¡å¼ï¼‰
    current_step: str
    result: str

    # åˆ—è¡¨å­—æ®µï¼ˆè¿½åŠ æ¨¡å¼ï¼‰
    messages: Annotated[list, add]  # ä½¿ç”¨ add reducer è¿½åŠ å…ƒç´ 

    # è®¡æ•°å™¨ï¼ˆåŠ æ³•æ¨¡å¼ï¼‰
    step_count: Annotated[int, lambda x, y: x + y]

# ä½¿ç”¨è‡ªå®šä¹‰çŠ¶æ€åˆ›å»ºå›¾
graph = StateGraph(CustomState)</code></pre>
                    </div>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ’¡ çŠ¶æ€æ›´æ–°æœºåˆ¶</div>
                        <ul>
                            <li><strong>é»˜è®¤è¡Œä¸º</strong>ï¼šè¦†ç›–ï¼ˆåé¢çš„å€¼æ›¿æ¢å‰é¢çš„å€¼ï¼‰</li>
                            <li><strong>Reducer å‡½æ•°</strong>ï¼šä½¿ç”¨ <code>Annotated[type, reducer]</code> å®šä¹‰åˆå¹¶é€»è¾‘</li>
                            <li><strong>å¸¸ç”¨ Reducer</strong>ï¼š
                                <ul>
                                    <li><code>add</code> - åˆ—è¡¨è¿½åŠ </li>
                                    <li><code>lambda x, y: x + y</code> - æ•°å€¼ç›¸åŠ </li>
                                    <li>è‡ªå®šä¹‰å‡½æ•° - ä»»æ„åˆå¹¶é€»è¾‘</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- èŠ‚ç‚¹å’Œè¾¹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”— èŠ‚ç‚¹å’Œè¾¹è¯¦è§£</h2>

                    <h3 class="subsection-title">æ·»åŠ èŠ‚ç‚¹</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
èŠ‚ç‚¹å®šä¹‰ç¤ºä¾‹
åŠŸèƒ½ï¼šåˆ›å»ºå¤šä¸ªèŠ‚ç‚¹å¤„ç†ä¸åŒä»»åŠ¡
"""
from langgraph.graph import StateGraph, MessagesState

def input_processor(state: MessagesState):
    """è¾“å…¥å¤„ç†èŠ‚ç‚¹"""
    user_message = state["messages"][-1]["content"]
    return {"messages": [{"role": "system", "content": f"å¤„ç†è¾“å…¥: {user_message}"}]}

def llm_caller(state: MessagesState):
    """LLM è°ƒç”¨èŠ‚ç‚¹"""
    # å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šè°ƒç”¨çœŸå®çš„ LLM
    return {"messages": [{"role": "ai", "content": "è¿™æ˜¯ AI çš„å›ç­”"}]}

def output_formatter(state: MessagesState):
    """è¾“å‡ºæ ¼å¼åŒ–èŠ‚ç‚¹"""
    ai_message = state["messages"][-1]["content"]
    formatted = f"ã€AIå›å¤ã€‘{ai_message}"
    return {"messages": [{"role": "ai", "content": formatted}]}

# åˆ›å»ºå›¾å¹¶æ·»åŠ èŠ‚ç‚¹
graph = StateGraph(MessagesState)

graph.add_node("input_processor", input_processor)
graph.add_node("llm_caller", llm_caller)
graph.add_node("output_formatter", output_formatter)</code></pre>
                    </div>

                    <h3 class="subsection-title">æ™®é€šè¾¹ï¼ˆNormal Edgesï¼‰</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
æ™®é€šè¾¹ç¤ºä¾‹
åŠŸèƒ½ï¼šå®šä¹‰å›ºå®šçš„æ‰§è¡Œé¡ºåº
"""
from langgraph.graph import START, END

# å®šä¹‰æ‰§è¡Œæµç¨‹
graph.add_edge(START, "input_processor")      # å¼€å§‹ -> è¾“å…¥å¤„ç†
graph.add_edge("input_processor", "llm_caller")  # è¾“å…¥å¤„ç† -> LLMè°ƒç”¨
graph.add_edge("llm_caller", "output_formatter") # LLMè°ƒç”¨ -> è¾“å‡ºæ ¼å¼åŒ–
graph.add_edge("output_formatter", END)       # è¾“å‡ºæ ¼å¼åŒ– -> ç»“æŸ

# ç¼–è¯‘å’Œæ‰§è¡Œ
compiled_graph = graph.compile()
result = compiled_graph.invoke({
    "messages": [{"role": "user", "content": "ä½ å¥½"}]
})</code></pre>
                    </div>

                    <h3 class="subsection-title">æ¡ä»¶è¾¹ï¼ˆConditional Edgesï¼‰</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
æ¡ä»¶è¾¹ç¤ºä¾‹
åŠŸèƒ½ï¼šæ ¹æ®çŠ¶æ€åŠ¨æ€é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
"""
from langgraph.graph import StateGraph, MessagesState, START, END
from typing import Literal

class CustomState(MessagesState):
    intent: str  # ç”¨æˆ·æ„å›¾

def classify_intent(state: CustomState):
    """æ„å›¾åˆ†ç±»èŠ‚ç‚¹"""
    user_message = state["messages"][-1]["content"]

    # ç®€å•çš„æ„å›¾è¯†åˆ«
    if "å¤©æ°”" in user_message:
        intent = "weather"
    elif "è®¢å•" in user_message:
        intent = "order"
    else:
        intent = "general"

    return {"intent": intent}

def handle_weather(state: CustomState):
    """å¤„ç†å¤©æ°”æŸ¥è¯¢"""
    return {"messages": [{"role": "ai", "content": "ä»Šå¤©å¤©æ°”æ™´æœ—"}]}

def handle_order(state: CustomState):
    """å¤„ç†è®¢å•æŸ¥è¯¢"""
    return {"messages": [{"role": "ai", "content": "æ‚¨çš„è®¢å•æ­£åœ¨é…é€ä¸­"}]}

def handle_general(state: CustomState):
    """å¤„ç†ä¸€èˆ¬é—®é¢˜"""
    return {"messages": [{"role": "ai", "content": "æˆ‘ä¼šå¸®æ‚¨è§£ç­”"}]}

# è·¯ç”±å‡½æ•°ï¼šæ ¹æ®æ„å›¾é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
def route_by_intent(state: CustomState) -> Literal["weather", "order", "general"]:
    """è·¯ç”±å‡½æ•°"""
    return state["intent"]

# åˆ›å»ºå›¾
graph = StateGraph(CustomState)

# æ·»åŠ èŠ‚ç‚¹
graph.add_node("classifier", classify_intent)
graph.add_node("weather", handle_weather)
graph.add_node("order", handle_order)
graph.add_node("general", handle_general)

# æ·»åŠ è¾¹
graph.add_edge(START, "classifier")

# æ·»åŠ æ¡ä»¶è¾¹
graph.add_conditional_edges(
    "classifier",          # æºèŠ‚ç‚¹
    route_by_intent,       # è·¯ç”±å‡½æ•°
    {                      # æ˜ å°„å…³ç³»
        "weather": "weather",
        "order": "order",
        "general": "general"
    }
)

# æ‰€æœ‰å¤„ç†èŠ‚ç‚¹éƒ½æŒ‡å‘ END
graph.add_edge("weather", END)
graph.add_edge("order", END)
graph.add_edge("general", END)

# ç¼–è¯‘å’Œæµ‹è¯•
compiled_graph = graph.compile()

# æµ‹è¯•å¤©æ°”æŸ¥è¯¢
result1 = compiled_graph.invoke({
    "messages": [{"role": "user", "content": "ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"}]
})
print(result1["messages"][-1]["content"])  # è¾“å‡ºï¼šä»Šå¤©å¤©æ°”æ™´æœ—

# æµ‹è¯•è®¢å•æŸ¥è¯¢
result2 = compiled_graph.invoke({
    "messages": [{"role": "user", "content": "æˆ‘çš„è®¢å•åœ¨å“ªé‡Œï¼Ÿ"}]
})
print(result2["messages"][-1]["content"])  # è¾“å‡ºï¼šæ‚¨çš„è®¢å•æ­£åœ¨é…é€ä¸­</code></pre>
                    </div>
                </section>

                <!-- Command æ§åˆ¶æµ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ® Command æ§åˆ¶æµ</h2>
                    <p>
                        <code>Command</code> å…è®¸èŠ‚ç‚¹åŒæ—¶è¿”å›çŠ¶æ€æ›´æ–°å’Œè·¯ç”±å†³ç­–ï¼Œ
                        æä¾›æ›´ç²¾ç»†çš„æ§åˆ¶æµç®¡ç†ã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
Command æ§åˆ¶æµç¤ºä¾‹
åŠŸèƒ½ï¼šèŠ‚ç‚¹è¿”å›æ›´æ–°å’Œè·¯ç”±æŒ‡ä»¤
"""
from langgraph.graph import StateGraph, MessagesState, START, END
from langgraph.types import Command
from typing import Literal

class TaskState(MessagesState):
    max_retries: int
    retry_count: int
    success: bool

def process_task(state: TaskState) -> Command[Literal["retry", "success", "failed"]]:
    """ä»»åŠ¡å¤„ç†èŠ‚ç‚¹"""
    import random

    # æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œï¼ˆ70% æˆåŠŸç‡ï¼‰
    success = random.random() > 0.3

    if success:
        # æˆåŠŸï¼šæ›´æ–°çŠ¶æ€å¹¶è·¯ç”±åˆ° success èŠ‚ç‚¹
        return Command(
            update={"success": True},
            goto="success"
        )
    else:
        # å¤±è´¥ï¼šæ£€æŸ¥é‡è¯•æ¬¡æ•°
        retry_count = state.get("retry_count", 0) + 1

        if retry_count < state.get("max_retries", 3):
            # å¯ä»¥é‡è¯•ï¼šæ›´æ–°é‡è¯•è®¡æ•°å¹¶è·¯ç”±å›å½“å‰èŠ‚ç‚¹
            return Command(
                update={"retry_count": retry_count},
                goto="retry"
            )
        else:
            # è¶…è¿‡é‡è¯•æ¬¡æ•°ï¼šæ ‡è®°ä¸ºå¤±è´¥
            return Command(
                update={"success": False},
                goto="failed"
            )

def handle_retry(state: TaskState):
    """é‡è¯•å¤„ç†"""
    return {"messages": [{"role": "system", "content": f"ç¬¬ {state['retry_count']} æ¬¡é‡è¯•..."}]}

def handle_success(state: TaskState):
    """æˆåŠŸå¤„ç†"""
    return {"messages": [{"role": "ai", "content": "ä»»åŠ¡æˆåŠŸå®Œæˆï¼"}]}

def handle_failed(state: TaskState):
    """å¤±è´¥å¤„ç†"""
    return {"messages": [{"role": "ai", "content": "ä»»åŠ¡å¤±è´¥ï¼Œå·²è¾¾æœ€å¤§é‡è¯•æ¬¡æ•°"}]}

# åˆ›å»ºå›¾
graph = StateGraph(TaskState)

graph.add_node("task", process_task)
graph.add_node("retry", handle_retry)
graph.add_node("success", handle_success)
graph.add_node("failed", handle_failed)

graph.add_edge(START, "task")
graph.add_edge("retry", "task")  # é‡è¯•å›åˆ°ä»»åŠ¡èŠ‚ç‚¹
graph.add_edge("success", END)
graph.add_edge("failed", END)

compiled_graph = graph.compile()

# æµ‹è¯•
result = compiled_graph.invoke({
    "messages": [],
    "max_retries": 3,
    "retry_count": 0,
    "success": False
})

print(f"æœ€ç»ˆç»“æœ: {result['messages'][-1]['content']}")
print(f"é‡è¯•æ¬¡æ•°: {result.get('retry_count', 0)}")</code></pre>
                    </div>
                </section>

                <!-- MessagesState é¢„æ„å»ºçŠ¶æ€ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“¨ MessagesState é¢„æ„å»ºçŠ¶æ€</h2>
                    <p>
                        <code>MessagesState</code> æ˜¯ LangGraph æä¾›çš„é¢„æ„å»ºçŠ¶æ€ï¼Œ
                        ä¸“é—¨ç”¨äºå¤„ç†æ¶ˆæ¯åˆ—è¡¨ï¼Œè‡ªåŠ¨ä½¿ç”¨ <code>add_messages</code> reducerã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
MessagesState ä½¿ç”¨ç¤ºä¾‹
åŠŸèƒ½ï¼šæ‰©å±• MessagesState æ·»åŠ è‡ªå®šä¹‰å­—æ®µ
"""
from langgraph.graph import MessagesState, StateGraph, START, END

# æ‰©å±• MessagesState
class ExtendedState(MessagesState):
    documents: list[str]  # æ·»åŠ æ–‡æ¡£åˆ—è¡¨å­—æ®µ
    user_id: str         # æ·»åŠ ç”¨æˆ· ID å­—æ®µ

def retrieve_docs(state: ExtendedState):
    """æ£€ç´¢æ–‡æ¡£èŠ‚ç‚¹"""
    query = state["messages"][-1]["content"]
    # æ¨¡æ‹Ÿæ–‡æ¡£æ£€ç´¢
    docs = [f"æ–‡æ¡£1å…³äº{query}", f"æ–‡æ¡£2å…³äº{query}"]
    return {"documents": docs}

def generate_answer(state: ExtendedState):
    """ç”Ÿæˆç­”æ¡ˆèŠ‚ç‚¹"""
    docs = state.get("documents", [])
    context = "\\n".join(docs)
    answer = f"åŸºäºä»¥ä¸‹æ–‡æ¡£ï¼š\\n{context}\\n\\næˆ‘çš„å›ç­”æ˜¯..."
    return {"messages": [{"role": "ai", "content": answer}]}

# åˆ›å»ºå›¾
graph = StateGraph(ExtendedState)
graph.add_node("retrieve", retrieve_docs)
graph.add_node("generate", generate_answer)

graph.add_edge(START, "retrieve")
graph.add_edge("retrieve", "generate")
graph.add_edge("generate", END)

compiled_graph = graph.compile()

# æµ‹è¯•
result = compiled_graph.invoke({
    "messages": [{"role": "user", "content": "LangChain"}],
    "user_id": "user_123"
})

print(result["messages"][-1]["content"])</code></pre>
                    </div>
                </section>

                <!-- å®Œæ•´ç¤ºä¾‹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ¯ å®Œæ•´ç¤ºä¾‹ï¼šæ™ºèƒ½å®¢æœè·¯ç”±ç³»ç»Ÿ</h2>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§ - å®Œæ•´é¡¹ç›®</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
æ™ºèƒ½å®¢æœè·¯ç”±ç³»ç»Ÿå®Œæ•´ç¤ºä¾‹
åŠŸèƒ½ï¼šæ ¹æ®ç”¨æˆ·é—®é¢˜ç±»å‹ï¼Œè·¯ç”±åˆ°ä¸åŒçš„å¤„ç†èŠ‚ç‚¹
"""
from langgraph.graph import StateGraph, MessagesState, START, END
from typing import Literal
from typing_extensions import TypedDict

# ==================== çŠ¶æ€å®šä¹‰ ====================

class CustomerServiceState(MessagesState):
    intent: str           # ç”¨æˆ·æ„å›¾
    sentiment: str        # æƒ…æ„Ÿåˆ†æç»“æœ
    priority: int         # ä¼˜å…ˆçº§
    resolved: bool        # æ˜¯å¦å·²è§£å†³

# ==================== èŠ‚ç‚¹å‡½æ•° ====================

def analyze_query(state: CustomerServiceState):
    """åˆ†æç”¨æˆ·æŸ¥è¯¢"""
    user_message = state["messages"][-1]["content"]

    # ç®€å•çš„æ„å›¾è¯†åˆ«
    if any(word in user_message for word in ["è®¢å•", "å¿«é€’", "ç‰©æµ"]):
        intent = "order"
        priority = 2
    elif any(word in user_message for word in ["é€€æ¬¾", "é€€è´§", "æŠ•è¯‰"]):
        intent = "refund"
        priority = 3  # é«˜ä¼˜å…ˆçº§
    elif any(word in user_message for word in ["äº§å“", "ä½¿ç”¨", "æ•™ç¨‹"]):
        intent = "product"
        priority = 1
    else:
        intent = "general"
        priority = 1

    # ç®€å•çš„æƒ…æ„Ÿåˆ†æ
    if any(word in user_message for word in ["ç”Ÿæ°”", "ä¸æ»¡", "å¤±æœ›"]):
        sentiment = "negative"
        priority = max(priority, 3)  # è´Ÿé¢æƒ…ç»ªæå‡ä¼˜å…ˆçº§
    else:
        sentiment = "neutral"

    return {
        "intent": intent,
        "sentiment": sentiment,
        "priority": priority
    }

def handle_order_query(state: CustomerServiceState):
    """å¤„ç†è®¢å•æŸ¥è¯¢"""
    return {
        "messages": [{
            "role": "ai",
            "content": "æ‚¨çš„è®¢å•æ­£åœ¨å¤„ç†ä¸­ã€‚è®¢å•å·ï¼šORDER-12345ï¼Œé¢„è®¡3å¤©å†…é€è¾¾ã€‚"
        }],
        "resolved": True
    }

def handle_refund_request(state: CustomerServiceState):
    """å¤„ç†é€€æ¬¾è¯·æ±‚"""
    if state.get("priority", 1) >= 3:
        # é«˜ä¼˜å…ˆçº§ï¼Œè½¬äººå·¥
        return {
            "messages": [{
                "role": "ai",
                "content": "æ‚¨çš„é€€æ¬¾è¯·æ±‚å·²æ”¶åˆ°ã€‚ç”±äºæ‚¨çš„æƒ…å†µæ¯”è¾ƒç‰¹æ®Šï¼Œæˆ‘å·²ä¸ºæ‚¨è½¬æ¥äººå·¥å®¢æœï¼Œè¯·ç¨å€™..."
            }],
            "resolved": False  # éœ€è¦äººå·¥ä»‹å…¥
        }
    else:
        return {
            "messages": [{
                "role": "ai",
                "content": "é€€æ¬¾å·²æäº¤ï¼Œé¢„è®¡3-5ä¸ªå·¥ä½œæ—¥åˆ°è´¦ã€‚é€€æ¬¾å•å·ï¼šREFUND-67890"
            }],
            "resolved": True
        }

def handle_product_inquiry(state: CustomerServiceState):
    """å¤„ç†äº§å“å’¨è¯¢"""
    return {
        "messages": [{
            "role": "ai",
            "content": "å…³äºäº§å“ä½¿ç”¨ï¼Œæ‚¨å¯ä»¥å‚è€ƒæˆ‘ä»¬çš„åœ¨çº¿æ•™ç¨‹ï¼šhttps://example.com/tutorial"
        }],
        "resolved": True
    }

def handle_general_question(state: CustomerServiceState):
    """å¤„ç†ä¸€èˆ¬é—®é¢˜"""
    return {
        "messages": [{
            "role": "ai",
            "content": "æ„Ÿè°¢æ‚¨çš„å’¨è¯¢ã€‚æˆ‘ä¼šå°½åŠ›å¸®åŠ©æ‚¨ã€‚è¯·é—®æœ‰ä»€ä¹ˆå…·ä½“é—®é¢˜å—ï¼Ÿ"
        }],
        "resolved": True
    }

def escalate_to_human(state: CustomerServiceState):
    """å‡çº§åˆ°äººå·¥å®¢æœ"""
    return {
        "messages": [{
            "role": "system",
            "content": f"ã€ç³»ç»Ÿã€‘ä¼˜å…ˆçº§ {state['priority']} - å·²è½¬æ¥äººå·¥å®¢æœ"
        }]
    }

# ==================== è·¯ç”±å‡½æ•° ====================

def route_by_intent(
    state: CustomerServiceState
) -> Literal["order", "refund", "product", "general"]:
    """æ ¹æ®æ„å›¾è·¯ç”±"""
    return state["intent"]

def check_resolution(
    state: CustomerServiceState
) -> Literal["escalate", "complete"]:
    """æ£€æŸ¥æ˜¯å¦å·²è§£å†³"""
    if state.get("resolved", False):
        return "complete"
    else:
        return "escalate"

# ==================== æ„å»ºçŠ¶æ€å›¾ ====================

graph = StateGraph(CustomerServiceState)

# æ·»åŠ èŠ‚ç‚¹
graph.add_node("analyzer", analyze_query)
graph.add_node("order", handle_order_query)
graph.add_node("refund", handle_refund_request)
graph.add_node("product", handle_product_inquiry)
graph.add_node("general", handle_general_question)
graph.add_node("escalate", escalate_to_human)

# æ·»åŠ è¾¹
graph.add_edge(START, "analyzer")

# ç¬¬ä¸€å±‚è·¯ç”±ï¼šæŒ‰æ„å›¾åˆ†å‘
graph.add_conditional_edges(
    "analyzer",
    route_by_intent,
    {
        "order": "order",
        "refund": "refund",
        "product": "product",
        "general": "general"
    }
)

# ç¬¬äºŒå±‚è·¯ç”±ï¼šæ£€æŸ¥æ˜¯å¦éœ€è¦å‡çº§
for node in ["order", "refund", "product", "general"]:
    graph.add_conditional_edges(
        node,
        check_resolution,
        {
            "complete": END,
            "escalate": "escalate"
        }
    )

graph.add_edge("escalate", END)

# ç¼–è¯‘å›¾
customer_service_graph = graph.compile()

# ==================== æµ‹è¯•åœºæ™¯ ====================

def test_query(query: str):
    """æµ‹è¯•æŸ¥è¯¢"""
    print(f"\n{'='*60}")
    print(f"ç”¨æˆ·: {query}")
    print('='*60)

    result = customer_service_graph.invoke({
        "messages": [{"role": "user", "content": query}]
    })

    print(f"\næ„å›¾: {result.get('intent', 'N/A')}")
    print(f"æƒ…æ„Ÿ: {result.get('sentiment', 'N/A')}")
    print(f"ä¼˜å…ˆçº§: {result.get('priority', 'N/A')}")
    print(f"å·²è§£å†³: {result.get('resolved', 'N/A')}")

    for msg in result["messages"][1:]:  # è·³è¿‡ç”¨æˆ·æ¶ˆæ¯
        print(f"\n{msg['role'].upper()}: {msg['content']}")

    print()

if __name__ == "__main__":
    # æµ‹è¯•ä¸åŒç±»å‹çš„æŸ¥è¯¢
    test_query("æˆ‘çš„è®¢å•ä»€ä¹ˆæ—¶å€™åˆ°ï¼Ÿ")
    test_query("æˆ‘è¦é€€æ¬¾ï¼è¿™ä¸ªäº§å“å¤ªå·®äº†ï¼Œæˆ‘å¾ˆç”Ÿæ°”ï¼")
    test_query("è¿™ä¸ªäº§å“æ€ä¹ˆä½¿ç”¨ï¼Ÿ")
    test_query("ä½ ä»¬è¥ä¸šæ—¶é—´æ˜¯ä»€ä¹ˆï¼Ÿ")</code></pre>
                    </div>
                </section>

                <!-- å¸¸è§é—®é¢˜ -->
                <section class="content-section">
                    <h2 class="section-title">â“ å¸¸è§é—®é¢˜</h2>

                    <h3 class="subsection-subtitle">Q1: LangGraph å’Œ create_agent() ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>åœºæ™¯</th>
                                <th>æ¨èæ–¹æ¡ˆ</th>
                                <th>ç†ç”±</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ç®€å• Agent</td>
                                <td>create_agent()</td>
                                <td>è‡ªåŠ¨ç”Ÿæˆå·¥ä½œæµï¼Œä»£ç ç®€æ´</td>
                            </tr>
                            <tr>
                                <td>å¤æ‚åˆ†æ”¯é€»è¾‘</td>
                                <td>LangGraph</td>
                                <td>ç²¾ç¡®æ§åˆ¶æ‰§è¡Œè·¯å¾„</td>
                            </tr>
                            <tr>
                                <td>éœ€è¦å¯è§†åŒ–</td>
                                <td>LangGraph</td>
                                <td>æ”¯æŒ LangSmith å›¾å½¢åŒ–è°ƒè¯•</td>
                            </tr>
                            <tr>
                                <td>å¿«é€ŸåŸå‹</td>
                                <td>create_agent()</td>
                                <td>å¼€å‘é€Ÿåº¦å¿«</td>
                            </tr>
                            <tr>
                                <td>ç”Ÿäº§çº§å¤æ‚ç³»ç»Ÿ</td>
                                <td>LangGraph</td>
                                <td>æ›´å¥½çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 class="subsection-subtitle">Q2: å¦‚ä½•è°ƒè¯• LangGraphï¼Ÿ</h3>
                    <p>
                        ä½¿ç”¨ <strong>LangSmith</strong> è¿›è¡Œå¯è§†åŒ–è°ƒè¯•ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">import os

# é…ç½® LangSmith
os.environ["LANGCHAIN_TRACING_V2"] = "true"
os.environ["LANGCHAIN_API_KEY"] = "your-api-key"

# è¿è¡Œå›¾ï¼ŒLangSmith ä¼šè‡ªåŠ¨è¿½è¸ª
result = graph.invoke({...})</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q3: å›¾å¯ä»¥æœ‰å¾ªç¯å—ï¼Ÿ</h3>
                    <p>
                        <strong>å¯ä»¥</strong>ã€‚LangGraph æ”¯æŒå¾ªç¯ï¼Œä½†éœ€è¦è®¾ç½®é€’å½’é™åˆ¶é˜²æ­¢æ— é™å¾ªç¯ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># ç¼–è¯‘æ—¶è®¾ç½®é€’å½’é™åˆ¶
graph = builder.compile(
    checkpointer=checkpointer,
    recursion_limit=25  # æœ€å¤šæ‰§è¡Œ 25 æ­¥
)</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q4: å¦‚ä½•å¤„ç†é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Ÿ</h3>
                    <p>
                        ä½¿ç”¨ <strong>Checkpointer</strong> å®ç°æŒä¹…åŒ–ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">from langgraph.checkpoint.memory import InMemorySaver

# åˆ›å»º checkpointer
checkpointer = InMemorySaver()

# ç¼–è¯‘æ—¶ä¼ å…¥
graph = builder.compile(checkpointer=checkpointer)

# ä½¿ç”¨ thread_id æ ‡è¯†ä¼šè¯
config = {"configurable": {"thread_id": "thread_001"}}

# å³ä½¿ä¸­æ–­ï¼Œä¹Ÿå¯ä»¥ä»æ–­ç‚¹æ¢å¤
result = graph.invoke({...}, config=config)</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q5: èŠ‚ç‚¹å¯ä»¥è¿”å›ä»€ä¹ˆç±»å‹ï¼Ÿ</h3>
                    <p>
                        èŠ‚ç‚¹å¯ä»¥è¿”å›ï¼š
                    </p>
                    <ul>
                        <li><strong>å­—å…¸</strong>ï¼šçŠ¶æ€æ›´æ–° <code>{"key": "value"}</code></li>
                        <li><strong>Command</strong>ï¼šçŠ¶æ€æ›´æ–° + è·¯ç”±å†³ç­–</li>
                        <li><strong>None</strong>ï¼šä¸æ›´æ–°çŠ¶æ€ï¼ˆä»…æ‰§è¡Œå‰¯ä½œç”¨ï¼‰</li>
                    </ul>
                </section>

                <!-- æœ€ä½³å®è·µ -->
                <section class="content-section">
                    <h2 class="section-title">âœ¨ æœ€ä½³å®è·µ</h2>

                    <h3 class="subsection-title">1. çŠ¶æ€è®¾è®¡åŸåˆ™</h3>
                    <ul>
                        <li><strong>æœ€å°åŒ–</strong>ï¼šåªå­˜å‚¨å¿…è¦çš„ä¿¡æ¯</li>
                        <li><strong>ç±»å‹å®‰å…¨</strong>ï¼šä½¿ç”¨ TypedDict æˆ– Pydantic æ¨¡å‹</li>
                        <li><strong>åˆé€‚çš„ Reducer</strong>ï¼šä¸ºåˆ—è¡¨å­—æ®µä½¿ç”¨ <code>add</code> reducer</li>
                        <li><strong>é¿å…åµŒå¥—</strong>ï¼šä¿æŒçŠ¶æ€ç»“æ„æ‰å¹³åŒ–</li>
                    </ul>

                    <h3 class="subsection-title">2. èŠ‚ç‚¹è®¾è®¡åŸåˆ™</h3>
                    <ul>
                        <li><strong>å•ä¸€èŒè´£</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹åªåšä¸€ä»¶äº‹</li>
                        <li><strong>æ— å‰¯ä½œç”¨</strong>ï¼šé™¤éå¿…è¦ï¼ŒèŠ‚ç‚¹åº”è¯¥æ˜¯çº¯å‡½æ•°</li>
                        <li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåœ¨èŠ‚ç‚¹å†…æ•è·å’Œå¤„ç†å¼‚å¸¸</li>
                        <li><strong>å¯æµ‹è¯•</strong>ï¼šèŠ‚ç‚¹åº”è¯¥æ˜“äºå•å…ƒæµ‹è¯•</li>
                    </ul>

                    <h3 class="subsection-title">3. è¾¹å’Œè·¯ç”±</h3>
                    <ul>
                        <li><strong>æ¸…æ™°çš„è·¯ç”±é€»è¾‘</strong>ï¼šè·¯ç”±å‡½æ•°åº”è¯¥ç®€å•æ˜äº†</li>
                        <li><strong>ä½¿ç”¨ Literal ç±»å‹</strong>ï¼šä¸ºè·¯ç”±è¿”å›å€¼æ·»åŠ ç±»å‹æç¤º</li>
                        <li><strong>é¿å…è¿‡æ·±åµŒå¥—</strong>ï¼šè¶…è¿‡ 3 å±‚æ¡ä»¶æ—¶è€ƒè™‘é‡æ„</li>
                        <li><strong>è®¾ç½®é€’å½’é™åˆ¶</strong>ï¼šé˜²æ­¢æ— é™å¾ªç¯</li>
                    </ul>

                    <h3 class="subsection-title">4. ç”Ÿäº§ç¯å¢ƒé…ç½®</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®
from langgraph.checkpoint.postgres import PostgresSaver

DB_URI = "postgresql://user:pass@localhost:5432/langchain"

with PostgresSaver.from_conn_string(DB_URI) as checkpointer:
    checkpointer.setup()

    graph = builder.compile(
        checkpointer=checkpointer,
        recursion_limit=50,
        debug=False  # ç”Ÿäº§ç¯å¢ƒå…³é—­è°ƒè¯•
    )</code></pre>
                    </div>
                </section>

                <!-- å‚è€ƒèµ„æº -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“– å‚è€ƒèµ„æº</h2>
                    <ul>
                        <li>
                            <a href="https://docs.langchain.com/oss/python/langgraph/overview" target="_blank">
                                LangGraph å®˜æ–¹æ¦‚è¿°
                            </a>
                        </li>
                        <li>
                            <a href="https://docs.langchain.com/oss/python/langgraph/graph-api" target="_blank">
                                LangGraph Graph API æ–‡æ¡£
                            </a>
                        </li>
                        <li>
                            <a href="https://langchain-ai.github.io/langgraph/" target="_blank">
                                LangGraph å®˜æ–¹ç½‘ç«™
                            </a>
                        </li>
                        <li>
                            <a href="https://docs.smith.langchain.com/" target="_blank">
                                LangSmith è°ƒè¯•å·¥å…·
                            </a>
                        </li>
                    </ul>
                </section>

                <!-- é¡µé¢å¯¼èˆª -->
                                <nav class="page-navigation">
                    <a href="14-long-term-memory.html" class="nav-button prev">
                        â† ä¸Šä¸€é¡µ:é•¿æœŸè®°å¿†
                    </a>
                    <a href="16-context-engineering.html" class="nav-button next">
                        ä¸‹ä¸€é¡µ:ä¸Šä¸‹æ–‡å·¥ç¨‹ â†’
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" aria-label="è¿”å›é¡¶éƒ¨">â†‘</button>

    <!-- JavaScript -->
    <script src="assets/js/mermaid-init.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</body>
</html>
