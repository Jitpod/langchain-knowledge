<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="DeepAgents é•¿æœŸè®°å¿† - è·¨å¯¹è¯æŒä¹…åŒ–å­˜å‚¨ç³»ç»Ÿ">
    <title>DeepAgents é•¿æœŸè®°å¿† | LangChain 1.0 Python çŸ¥è¯†æ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <button class="mobile-menu-button" aria-label="æ‰“å¼€èœå•">â˜°</button>

    <div class="container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">ğŸ¦œ LangChain 1.0</h1>
                <p class="sidebar-subtitle">Python å®Œæ•´å­¦ä¹ æŒ‡å—</p>
            </div>

            <ul class="nav-menu">
                <li class="nav-section">
                    <div class="nav-section-title">å¼€å§‹</div>
                    <ul>
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <span class="nav-icon">ğŸ </span>
                                ä¸»é¡µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">åŸºç¡€ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="01-introduction.html" class="nav-link">
                                <span class="nav-icon">ğŸ“–</span>
                                LangChain ç®€ä»‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="02-architecture.html" class="nav-link">
                                <span class="nav-icon">ğŸ—ï¸</span>
                                æ ¸å¿ƒæ¶æ„
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="03-models.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤–</span>
                                æ¨¡å‹æ¥å£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="04-messages.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¬</span>
                                æ¶ˆæ¯ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="05-tools.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                å·¥å…·ç³»ç»Ÿ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">è¿›é˜¶ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="06-agents.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                Agent åŸºç¡€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="07-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="08-rag.html" class="nav-link">
                                <span class="nav-icon">ğŸ”</span>
                                RAG è¯¦è§£
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="09-lcel.html" class="nav-link">
                                <span class="nav-icon">ğŸ”—</span>
                                LCEL è¡¨è¾¾å¼
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">é«˜çº§åº”ç”¨</div>
                    <ul>
                        <li class="nav-item">
                            <a href="10-runtime.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                Runtime ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="11-checkpointer.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¾</span>
                                æŒä¹…åŒ–ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="12-streaming.html" class="nav-link">
                                <span class="nav-icon">ğŸŒŠ</span>
                                æµå¼è¾“å‡º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="13-human-in-loop.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="14-long-term-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ—„ï¸</span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="15-langgraph.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                LangGraph
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">å®æˆ˜ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="16-customer-service.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å®¢æœæœºå™¨äºº
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="17-best-practices.html" class="nav-link">
                                <span class="nav-icon">âœ¨</span>
                                æœ€ä½³å®è·µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">å‚è€ƒç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="18-api-reference.html" class="nav-link">
                                <span class="nav-icon">ğŸ“š</span>
                                API é€ŸæŸ¥è¡¨
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="19-troubleshooting.html" class="nav-link">
                                <span class="nav-icon">ğŸ›</span>
                                æ•…éšœæ’é™¤
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="20-migration.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                è¿ç§»æŒ‡å—
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">æ‰©å±•ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="21-structured-output.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                ç»“æ„åŒ–è¾“å‡º
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">DeepAgents ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="22-deepagents-quickstart.html" class="nav-link">
                                <span class="nav-icon">ğŸš€</span>
                                å¿«é€Ÿå¼€å§‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="23-deepagents-customization.html" class="nav-link">
                                <span class="nav-icon">ğŸ¨</span>
                                å®šåˆ¶åŒ–
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="24-deepagents-harness.html" class="nav-link">
                                <span class="nav-icon">ğŸ›ï¸</span>
                                Harness ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="25-deepagents-backends.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                åç«¯é…ç½®
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="26-deepagents-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="27-deepagents-hitl.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a href="28-deepagents-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ§ </span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="29-deepagents-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">Multi-Agent ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="30-multi-agent-index.html" class="nav-link">
                                <span class="nav-icon">ğŸŒ</span>
                                æ¦‚è¿°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="31-multi-agent-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="32-multi-agent-handoffs.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                äº¤æ¥æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="33-multi-agent-skills.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                æŠ€èƒ½ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="34-multi-agent-router.html" class="nav-link">
                                <span class="nav-icon">ğŸ§­</span>
                                è·¯ç”±æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="35-multi-agent-workflow.html" class="nav-link">
                                <span class="nav-icon">ğŸ”€</span>
                                è‡ªå®šä¹‰å·¥ä½œæµ
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                <nav class="breadcrumb">
                    <span class="breadcrumb-item">
                        <a href="index.html" class="breadcrumb-link">ä¸»é¡µ</a>
                    </span>
                    <span class="breadcrumb-item">
                        DeepAgents ç¯‡
                    </span>
                    <span class="breadcrumb-item">
                        é•¿æœŸè®°å¿†
                    </span>
                </nav>

                <!-- é¡µé¢æ ‡é¢˜ -->
                <header class="page-header">
                    <h1 class="page-title">ğŸ§  DeepAgents é•¿æœŸè®°å¿†</h1>
                    <p class="page-subtitle">
                        é€šè¿‡ LangGraph Store å®ç°è·¨å¯¹è¯å’Œè·¨çº¿ç¨‹çš„æŒä¹…åŒ–å­˜å‚¨ï¼Œ
                        è®© Agent èƒ½å¤Ÿè®°ä½ç”¨æˆ·åå¥½ã€ç§¯ç´¯çŸ¥è¯†ã€ç»´æŠ¤é•¿æœŸé¡¹ç›®è®°å½•ã€‚
                    </p>
                </header>

                <!-- ä»€ä¹ˆæ˜¯é•¿æœŸè®°å¿† -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“š ä»€ä¹ˆæ˜¯é•¿æœŸè®°å¿†ï¼Ÿ</h2>
                    <p>
                        <strong>é•¿æœŸè®°å¿†ï¼ˆLong-term Memoryï¼‰</strong>æ˜¯ DeepAgents çš„<strong>æŒä¹…åŒ–å­˜å‚¨æœºåˆ¶</strong>ï¼Œ
                        ä¸ä»…åœ¨å•ä¸ªçº¿ç¨‹å†…å­˜åœ¨çš„çŸ­æœŸè®°å¿†ï¼ˆCheckpointerï¼‰ä¸åŒï¼Œ
                        é•¿æœŸè®°å¿†èƒ½å¤Ÿ<strong>è·¨å¯¹è¯ã€è·¨çº¿ç¨‹ã€è·¨ Agent å®ä¾‹</strong>è®¿é—®å’Œå…±äº«æ•°æ®ã€‚
                    </p>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ’¡ æ ¸å¿ƒç‰¹æ€§</div>
                        <table style="margin-top: 0.5rem;">
                            <thead>
                                <tr>
                                    <th>ç‰¹æ€§</th>
                                    <th>çŸ­æœŸè®°å¿†ï¼ˆCheckpointerï¼‰</th>
                                    <th>é•¿æœŸè®°å¿†ï¼ˆStoreï¼‰</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>å­˜å‚¨ä½ç½®</strong></td>
                                    <td>Agent çŠ¶æ€</td>
                                    <td>LangGraph Store</td>
                                </tr>
                                <tr>
                                    <td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td>
                                    <td>å•ä¸ªçº¿ç¨‹</td>
                                    <td>è·¨æ‰€æœ‰çº¿ç¨‹</td>
                                </tr>
                                <tr>
                                    <td><strong>æŒä¹…åŒ–</strong></td>
                                    <td>å¦ï¼ˆé™¤éä½¿ç”¨æŒä¹…åŒ– Checkpointerï¼‰</td>
                                    <td>æ˜¯</td>
                                </tr>
                                <tr>
                                    <td><strong>è®¿é—®èŒƒå›´</strong></td>
                                    <td>å½“å‰å¯¹è¯</td>
                                    <td>å…¨å±€ï¼ˆæ‰€æœ‰å¯¹è¯ï¼‰</td>
                                </tr>
                                <tr>
                                    <td><strong>å…¸å‹ç”¨é€”</strong></td>
                                    <td>å¯¹è¯å†å²ã€ä¸­é—´çŠ¶æ€</td>
                                    <td>ç”¨æˆ·åå¥½ã€çŸ¥è¯†åº“ã€é¡¹ç›®è®°å½•</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph TB
    User["ç”¨æˆ·è¯·æ±‚"] --> Agent["DeepAgent"]

    Agent --> Short["çŸ­æœŸè®°å¿†<br/>Checkpointer"]
    Agent --> Long["é•¿æœŸè®°å¿†<br/>Store"]

    Short --> Thread1["çº¿ç¨‹ 1<br/>å¯¹è¯çŠ¶æ€"]
    Short --> Thread2["çº¿ç¨‹ 2<br/>å¯¹è¯çŠ¶æ€"]

    Long --> Global["å…¨å±€æ•°æ®<br/>è·¨çº¿ç¨‹å…±äº«"]

    Thread1 -.->|"æ— æ³•è®¿é—®"| Thread2
    Thread1 -->|"å¯è®¿é—®"| Global
    Thread2 -->|"å¯è®¿é—®"| Global

    Global --> Prefs["ç”¨æˆ·åå¥½<br/>/memories/user_preferences.txt"]
    Global --> KB["çŸ¥è¯†åº“<br/>/memories/research/"]
    Global --> Projects["é¡¹ç›®è®°å½•<br/>/memories/projects/"]

    style Agent fill:#3b82f6,color:#fff
    style Short fill:#f59e0b,color:#fff
    style Long fill:#10b981,color:#fff
    style Global fill:#8b5cf6,color:#fff
                        </div>
                    </div>

                    <h3 class="subsection-title">é•¿æœŸè®°å¿†çš„å®ç°åŸç†</h3>
                    <p>
                        DeepAgents é€šè¿‡<strong>CompositeBackend</strong>å°†ç‰¹å®šè·¯å¾„è·¯ç”±åˆ°æŒä¹…åŒ–å­˜å‚¨ï¼š
                    </p>
                    <ul>
                        <li><strong>è·¯å¾„è·¯ç”±</strong>ï¼šä»¥ <code>/memories/</code> å¼€å¤´çš„æ–‡ä»¶å­˜å‚¨åœ¨ Store ä¸­</li>
                        <li><strong>æ··åˆæ¶æ„</strong>ï¼šä¸´æ—¶æ•°æ®ç”¨ StateBackendï¼Œé•¿æœŸæ•°æ®ç”¨ StoreBackend</li>
                        <li><strong>é€æ˜è®¿é—®</strong>ï¼šAgent ä½¿ç”¨ç›¸åŒçš„æ–‡ä»¶å·¥å…·ï¼ˆread_file, write_fileï¼‰</li>
                        <li><strong>æŒä¹…åŒ–åç«¯</strong>ï¼šæ”¯æŒ InMemoryStoreã€PostgresStoreã€RedisStore</li>
                    </ul>
                </section>

                <!-- é•¿æœŸè®°å¿†é…ç½® -->
                <section class="content-section">
                    <h2 class="section-title">âš™ï¸ é•¿æœŸè®°å¿†é…ç½®</h2>
                    <p>
                        é…ç½®é•¿æœŸè®°å¿†éœ€è¦<strong>3 ä¸ªæ­¥éª¤</strong>ï¼š
                        åˆ›å»º Storeã€é…ç½® CompositeBackendã€ä¼ é€’ç»™ Agentã€‚
                    </p>

                    <h3 class="subsection-title">åŸºç¡€é…ç½®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
é•¿æœŸè®°å¿†é…ç½® - InMemoryStoreï¼ˆå¼€å‘ç¯å¢ƒï¼‰
"""
from deepagents import create_deep_agent
from deepagents.backends import CompositeBackend, StateBackend, StoreBackend
from langgraph.store.memory import InMemoryStore

# æ­¥éª¤ 1: åˆ›å»º Store
store = InMemoryStore()

# æ­¥éª¤ 2: é…ç½®åç«¯è·¯ç”±
def make_backend(runtime):
    return CompositeBackend(
        default=StateBackend(runtime),  # é»˜è®¤ï¼šä¸´æ—¶å­˜å‚¨
        routes={
            "/memories/": StoreBackend(runtime)  # /memories/ è·¯å¾„ï¼šæŒä¹…åŒ–
        }
    )

# æ­¥éª¤ 3: åˆ›å»º Agent
agent = create_deep_agent(
    model="gpt-4o",
    store=store,
    backend=make_backend,
    system_prompt="""ä½ æ˜¯åŠ©æ‰‹ã€‚å½“ç”¨æˆ·å‘Šè¯‰ä½ åå¥½æ—¶ï¼Œ
    ä¿å­˜åˆ° /memories/user_preferences.txt ä»¥ä¾¿æœªæ¥å‚è€ƒã€‚"""
)

# ä½¿ç”¨ Agent
result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "æˆ‘å–œæ¬¢ç®€æ´çš„å›ç­”ï¼Œè®°ä½è¿™ä¸€ç‚¹"
    }]
})

# Agent ä¼šè‡ªåŠ¨å°†åå¥½å†™å…¥ /memories/user_preferences.txt
# ä¸‹æ¬¡å¯¹è¯å¯ä»¥è¯»å–è¿™ä¸ªæ–‡ä»¶</code></pre>
                    </div>

                    <h3 class="subsection-title">ç”Ÿäº§é…ç½®ï¼ˆPostgreSQL æŒä¹…åŒ–ï¼‰</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
é•¿æœŸè®°å¿†é…ç½® - PostgresStoreï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
"""
import os
from deepagents import create_deep_agent
from deepagents.backends import CompositeBackend, StateBackend, StoreBackend
from langgraph.store.postgres import PostgresStore

# æ­¥éª¤ 1: è¿æ¥ PostgreSQL Store
store = PostgresStore(
    connection_string=os.environ["DATABASE_URL"]
)

# æ­¥éª¤ 2: é…ç½®åç«¯è·¯ç”±ï¼ˆåŒä¸Šï¼‰
def make_backend(runtime):
    return CompositeBackend(
        default=StateBackend(runtime),
        routes={
            "/memories/": StoreBackend(runtime)
        }
    )

# æ­¥éª¤ 3: åˆ›å»º Agent
agent = create_deep_agent(
    model="claude-sonnet-4-5-20250929",
    store=store,
    backend=make_backend,
    system_prompt="""ä½ æ˜¯æ™ºèƒ½åŠ©æ‰‹ã€‚

## é•¿æœŸè®°å¿†ç®¡ç†

ä½ å¯ä»¥å°†é‡è¦ä¿¡æ¯ä¿å­˜åˆ° /memories/ è·¯å¾„ä¸‹ï¼š

1. ç”¨æˆ·åå¥½ï¼š/memories/user_preferences.txt
2. ç ”ç©¶ç¬”è®°ï¼š/memories/research/topic_name/notes.txt
3. é¡¹ç›®è®°å½•ï¼š/memories/projects/project_name/status.md

è¿™äº›æ–‡ä»¶ä¼šæ°¸ä¹…ä¿å­˜ï¼Œè·¨æ‰€æœ‰å¯¹è¯è®¿é—®ã€‚"""
)

# ä¼˜åŠ¿ï¼š
# - çœŸæ­£çš„æŒä¹…åŒ–ï¼ˆæ•°æ®åº“çº§åˆ«ï¼‰
# - è·¨å®ä¾‹å…±äº«ï¼ˆå¤šä¸ª Agent å®ä¾‹è®¿é—®åŒä¸€æ•°æ®ï¼‰
# - æ”¯æŒå¤§è§„æ¨¡æ•°æ®
# - ç”Ÿäº§ç¯å¢ƒæ¨è</code></pre>
                    </div>
                </section>

                <!-- è·¨çº¿ç¨‹è®¿é—® -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”„ è·¨çº¿ç¨‹è®¿é—®é•¿æœŸè®°å¿†</h2>
                    <p>
                        é•¿æœŸè®°å¿†çš„<strong>æ ¸å¿ƒä¼˜åŠ¿</strong>æ˜¯è·¨çº¿ç¨‹å’Œå¯¹è¯è®¿é—®ã€‚
                        ä¸åŒçš„çº¿ç¨‹å¯ä»¥è¯»å–å’Œæ›´æ–°ç›¸åŒçš„æŒä¹…åŒ–æ•°æ®ã€‚
                    </p>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
sequenceDiagram
    participant T1 as çº¿ç¨‹ 1
    participant Agent as DeepAgent
    participant Store as LangGraph Store
    participant T2 as çº¿ç¨‹ 2

    T1->>Agent: ä¿å­˜ç”¨æˆ·åå¥½
    Agent->>Agent: å†™å…¥ /memories/<br/>user_preferences.txt
    Agent->>Store: put(namespace, data)
    Store-->>Agent: æŒä¹…åŒ–æˆåŠŸ
    Agent-->>T1: å®Œæˆ

    Note over Store: æ•°æ®å·²æŒä¹…åŒ–<br/>å¯è·¨çº¿ç¨‹è®¿é—®

    T2->>Agent: è¯¢é—®ç”¨æˆ·åå¥½
    Agent->>Agent: è¯»å– /memories/<br/>user_preferences.txt
    Agent->>Store: get(namespace)
    Store-->>Agent: è¿”å›æ•°æ®
    Agent-->>T2: æ ¹æ®åå¥½å›ç­”

    style Store fill:#10b981,color:#fff
    style Agent fill:#3b82f6,color:#fff
                        </div>
                    </div>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
è·¨çº¿ç¨‹è®¿é—®é•¿æœŸè®°å¿†
"""
import uuid
from deepagents import create_deep_agent
from deepagents.backends import CompositeBackend, StateBackend, StoreBackend
from langgraph.store.memory import InMemoryStore

# åˆ›å»ºå…±äº«çš„ Store
store = InMemoryStore()

# åˆ›å»º Agent
agent = create_deep_agent(
    model="gpt-4o",
    store=store,
    backend=lambda rt: CompositeBackend(
        default=StateBackend(rt),
        routes={"/memories/": StoreBackend(rt)}
    ),
    system_prompt="""ä½ å¯ä»¥ä¿å­˜å’Œè¯»å–ç”¨æˆ·åå¥½ã€‚

ä½¿ç”¨ /memories/user_preferences.txt å­˜å‚¨ç”¨æˆ·åå¥½ã€‚"""
)

# ===== çº¿ç¨‹ 1ï¼šä¿å­˜åå¥½ =====
print("=== çº¿ç¨‹ 1ï¼šä¿å­˜åå¥½ ===")
config1 = {"configurable": {"thread_id": str(uuid.uuid4())}}

result1 = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "æˆ‘å–œæ¬¢æŠ€æœ¯ç»†èŠ‚å’Œä»£ç ç¤ºä¾‹ï¼Œè¯·è®°ä½"
    }]
}, config=config1)

print(result1["messages"][-1].content)

# ===== çº¿ç¨‹ 2ï¼šè¯»å–åå¥½ï¼ˆä¸åŒçš„çº¿ç¨‹ IDï¼‰=====
print("\n=== çº¿ç¨‹ 2ï¼šè¯»å–åå¥½ ===")
config2 = {"configurable": {"thread_id": str(uuid.uuid4())}}  # ä¸åŒçš„ thread_id

result2 = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "æˆ‘ä¹‹å‰å‘Šè¯‰è¿‡ä½ ä»€ä¹ˆåå¥½ï¼Ÿ"
    }]
}, config=config2)

print(result2["messages"][-1].content)

# è¾“å‡ºç¤ºä¾‹ï¼š
# === çº¿ç¨‹ 1ï¼šä¿å­˜åå¥½ ===
# æˆ‘å·²ç»è®°ä½äº†ä½ çš„åå¥½ï¼šå–œæ¬¢æŠ€æœ¯ç»†èŠ‚å’Œä»£ç ç¤ºä¾‹ã€‚
# è¿™å·²ä¿å­˜åˆ°é•¿æœŸè®°å¿†ä¸­ï¼Œæœªæ¥å¯¹è¯æˆ‘ä¼šå‚è€ƒè¿™ä¸€ç‚¹ã€‚
#
# === çº¿ç¨‹ 2ï¼šè¯»å–åå¥½ ===
# æ ¹æ®è®°å½•ï¼Œä½ å–œæ¬¢æŠ€æœ¯ç»†èŠ‚å’Œä»£ç ç¤ºä¾‹ã€‚
# æˆ‘ä¼šåœ¨å›ç­”ä¸­æä¾›æ›´å¤šçš„æŠ€æœ¯æ·±åº¦å’Œå®é™…ä»£ç ã€‚

# å…³é”®ç‚¹ï¼š
# - ä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨ä¸åŒçš„ thread_id
# - çº¿ç¨‹ 2 èƒ½å¤Ÿè®¿é—®çº¿ç¨‹ 1 ä¿å­˜çš„æ•°æ®
# - è¿™æ˜¯å› ä¸ºæ•°æ®å­˜å‚¨åœ¨å…±äº«çš„ Store ä¸­ï¼Œè€Œéçº¿ç¨‹çŠ¶æ€</code></pre>
                    </div>
                </section>

                <!-- å‘½åç©ºé—´ç»„ç»‡ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“ å‘½åç©ºé—´ç»„ç»‡</h2>
                    <p>
                        ä½¿ç”¨<strong>åˆ†å±‚è·¯å¾„ç»“æ„</strong>ç»„ç»‡é•¿æœŸè®°å¿†ï¼Œä¾¿äºç®¡ç†å’Œæ£€ç´¢ã€‚
                    </p>

                    <h3 class="subsection-title">æ¨èçš„å‘½åç©ºé—´ç»“æ„</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">æ–‡ä»¶ç»“æ„</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-plaintext">/memories/
â”œâ”€â”€ user_preferences.txt              # ç”¨æˆ·åå¥½
â”œâ”€â”€ research/                         # ç ”ç©¶ç¬”è®°
â”‚   â”œâ”€â”€ ai_agents/
â”‚   â”‚   â”œâ”€â”€ sources.txt
â”‚   â”‚   â””â”€â”€ summary.md
â”‚   â””â”€â”€ langchain/
â”‚       â”œâ”€â”€ rag_notes.txt
â”‚       â””â”€â”€ best_practices.md
â”œâ”€â”€ projects/                         # é¡¹ç›®è®°å½•
â”‚   â”œâ”€â”€ customer_service_bot/
â”‚   â”‚   â”œâ”€â”€ requirements.md
â”‚   â”‚   â”œâ”€â”€ progress.txt
â”‚   â”‚   â””â”€â”€ issues.txt
â”‚   â””â”€â”€ data_pipeline/
â”‚       â”œâ”€â”€ design.md
â”‚       â””â”€â”€ status.txt
â””â”€â”€ knowledge_base/                   # çŸ¥è¯†åº“
    â”œâ”€â”€ faq.json
    â””â”€â”€ product_docs.md</code></pre>
                    </div>

                    <h3 class="subsection-title">å‘½åç©ºé—´æœ€ä½³å®è·µ</h3>
                    <div class="info-box tip">
                        <div class="info-box-title">âœ¨ ç»„ç»‡åŸåˆ™</div>
                        <ul>
                            <li><strong>æè¿°æ€§è·¯å¾„</strong>ï¼šä½¿ç”¨æ¸…æ™°çš„å‘½åçº¦å®šï¼Œä¾¿äºç†è§£å’Œç»´æŠ¤</li>
                            <li><strong>åˆ†ç±»ç®¡ç†</strong>ï¼šæŒ‰åŠŸèƒ½æˆ–ä¸»é¢˜åˆ†ç»„ï¼ˆç”¨æˆ·æ•°æ®ã€ç ”ç©¶ã€é¡¹ç›®ã€çŸ¥è¯†åº“ï¼‰</li>
                            <li><strong>æ–‡æ¡£ç»“æ„</strong>ï¼šåœ¨ç³»ç»Ÿæç¤ºä¸­è®°å½•è®°å¿†çš„ç»„ç»‡æ–¹å¼</li>
                            <li><strong>é¿å…å†—ä½™</strong>ï¼šä¸è¦é‡å¤å­˜å‚¨ç›¸åŒçš„ä¿¡æ¯</li>
                            <li><strong>å®šæœŸæ¸…ç†</strong>ï¼šæ¸…é™¤è¿‡æœŸæ•°æ®ä»¥ç®¡ç†å­˜å‚¨ç©ºé—´</li>
                        </ul>
                    </div>
                </section>

                <!-- å®æˆ˜ç¤ºä¾‹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ¯ å®Œæ•´å®æˆ˜ç¤ºä¾‹</h2>
                    <p>
                        æ„å»ºä¸€ä¸ª<strong>çŸ¥è¯†åŠ©æ‰‹</strong>ï¼Œæ”¯æŒç”¨æˆ·åå¥½è®°å¿†ã€ç ”ç©¶ç¬”è®°ç®¡ç†ã€
                        çŸ¥è¯†åº“ç§¯ç´¯ï¼Œè·¨å¯¹è¯æŒä¹…åŒ–ã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§ - ç”Ÿäº§çº§ç¤ºä¾‹</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
å®Œæ•´å®æˆ˜ç¤ºä¾‹ - çŸ¥è¯†åŠ©æ‰‹ï¼ˆæ”¯æŒé•¿æœŸè®°å¿†ï¼‰
"""
import os
import uuid
from typing import Literal
from tavily import TavilyClient
from deepagents import create_deep_agent
from deepagents.backends import CompositeBackend, StateBackend, StoreBackend
from langgraph.store.postgres import PostgresStore
from langgraph.checkpoint.memory import MemorySaver

# ========== 1. åˆå§‹åŒ–å·¥å…· ==========

tavily_client = TavilyClient(api_key=os.environ["TAVILY_API_KEY"])

def internet_search(query: str, max_results: int = 5) -> dict:
    """æœç´¢ç½‘ç»œä¿¡æ¯"""
    return tavily_client.search(query, max_results=max_results)

# ========== 2. é…ç½®æŒä¹…åŒ– ==========

# Storeï¼šé•¿æœŸè®°å¿†ï¼ˆè·¨å¯¹è¯ï¼‰
store = PostgresStore(
    connection_string=os.environ["DATABASE_URL"]
)

# Checkpointerï¼šçŸ­æœŸè®°å¿†ï¼ˆå¯¹è¯çŠ¶æ€ï¼‰
checkpointer = MemorySaver()

# Backendï¼šæ··åˆè·¯ç”±
def make_backend(runtime):
    return CompositeBackend(
        default=StateBackend(runtime),  # ä¸´æ—¶æ•°æ®
        routes={
            "/memories/": StoreBackend(runtime),  # é•¿æœŸè®°å¿†
        }
    )

# ========== 3. åˆ›å»ºçŸ¥è¯†åŠ©æ‰‹ ==========

knowledge_assistant_prompt = """ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„çŸ¥è¯†åŠ©æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯å¸®åŠ©ç”¨æˆ·è¿›è¡Œç ”ç©¶ã€ç®¡ç†ç¬”è®°å’Œç§¯ç´¯çŸ¥è¯†ã€‚

## é•¿æœŸè®°å¿†ç®¡ç†

ä½ å¯ä»¥å°†ä¿¡æ¯ä¿å­˜åˆ°ä»¥ä¸‹è·¯å¾„ï¼ˆæ‰€æœ‰è·¯å¾„ä¸‹çš„æ–‡ä»¶æ°¸ä¹…ä¿å­˜ï¼Œè·¨å¯¹è¯è®¿é—®ï¼‰ï¼š

### 1. ç”¨æˆ·åå¥½
- è·¯å¾„ï¼š/memories/user_preferences.txt
- å†…å®¹ï¼šç”¨æˆ·çš„ä¸ªäººåå¥½ã€ä¹ æƒ¯ã€ä¸“ä¸šé¢†åŸŸ

### 2. ç ”ç©¶ç¬”è®°
- è·¯å¾„ï¼š/memories/research/[ä¸»é¢˜]/
- å­æ–‡ä»¶ï¼š
  - sources.txtï¼šä¿¡æ¯æ¥æºå’Œé“¾æ¥
  - summary.mdï¼šç ”ç©¶æ‘˜è¦
  - notes.txtï¼šè¯¦ç»†ç¬”è®°

### 3. çŸ¥è¯†åº“
- è·¯å¾„ï¼š/memories/knowledge_base/
- å­æ–‡ä»¶ï¼š
  - [ä¸»é¢˜].mdï¼šç‰¹å®šä¸»é¢˜çš„çŸ¥è¯†æ€»ç»“
  - faq.jsonï¼šå¸¸è§é—®é¢˜è§£ç­”

## å·¥ä½œæµç¨‹

### ç ”ç©¶ä»»åŠ¡æµç¨‹
1. æ¥æ”¶ç”¨æˆ·çš„ç ”ç©¶ä¸»é¢˜
2. ä½¿ç”¨ internet_search æœç´¢ç›¸å…³ä¿¡æ¯
3. æ•´ç†å’Œåˆ†ææœç´¢ç»“æœ
4. å°†ä¿¡æ¯ä¿å­˜åˆ° /memories/research/[ä¸»é¢˜]/ ä¸‹
5. ç”Ÿæˆç ”ç©¶æŠ¥å‘Š

### åå¥½ç®¡ç†æµç¨‹
1. å½“ç”¨æˆ·é¦–æ¬¡äº¤äº’æ—¶ï¼Œè¯»å– /memories/user_preferences.txt
2. å¦‚ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶
3. æ ¹æ®ç”¨æˆ·åé¦ˆæ›´æ–°åå¥½
4. åœ¨åç»­å¯¹è¯ä¸­åº”ç”¨åå¥½

### çŸ¥è¯†ç§¯ç´¯æµç¨‹
1. åœ¨ç ”ç©¶è¿‡ç¨‹ä¸­å‘ç°æœ‰ä»·å€¼çš„é€šç”¨çŸ¥è¯†
2. æå–å…³é”®ä¿¡æ¯
3. ä¿å­˜åˆ° /memories/knowledge_base/ ä¸‹ç›¸åº”ä¸»é¢˜æ–‡ä»¶
4. åœ¨æœªæ¥ç ”ç©¶ä¸­å‚è€ƒå·²æœ‰çŸ¥è¯†

## æ³¨æ„äº‹é¡¹

- æ¯æ¬¡å¯¹è¯å¼€å§‹æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç›¸å…³çš„é•¿æœŸè®°å¿†
- ç ”ç©¶ç¬”è®°åº”ç»“æ„åŒ–ã€æ˜“äºæ£€ç´¢
- å®šæœŸæ•´ç†å’Œæ›´æ–°çŸ¥è¯†åº“
- å¼•ç”¨æ¥æºæ—¶æä¾›å®Œæ•´çš„ URL
"""

agent = create_deep_agent(
    model="claude-sonnet-4-5-20250929",
    tools=[internet_search],
    store=store,
    checkpointer=checkpointer,
    backend=make_backend,
    system_prompt=knowledge_assistant_prompt
)

# ========== 4. ä½¿ç”¨çŸ¥è¯†åŠ©æ‰‹ ==========

# åœºæ™¯ 1ï¼šé¦–æ¬¡å¯¹è¯ï¼Œè®¾ç½®åå¥½
print("=== åœºæ™¯ 1ï¼šé¦–æ¬¡å¯¹è¯ ===")
config1 = {"configurable": {"thread_id": str(uuid.uuid4())}}

result1 = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "æˆ‘æ˜¯ä¸€å Python å¼€å‘è€…ï¼Œå¯¹ AI Agent å’Œ LangChain å¾ˆæ„Ÿå…´è¶£ã€‚è¯·è®°ä½è¿™ä¸€ç‚¹ã€‚"
    }]
}, config=config1)

print(result1["messages"][-1].content)

# åœºæ™¯ 2ï¼šç ”ç©¶ä»»åŠ¡
print("\n=== åœºæ™¯ 2ï¼šç ”ç©¶ RAG æŠ€æœ¯ ===")
config2 = {"configurable": {"thread_id": str(uuid.uuid4())}}

result2 = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "å¸®æˆ‘ç ”ç©¶ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çš„æœ€ä½³å®è·µï¼Œå¹¶ä¿å­˜ç ”ç©¶ç¬”è®°ã€‚"
    }]
}, config=config2)

print(result2["messages"][-1].content)

# åœºæ™¯ 3ï¼šåç»­å¯¹è¯ï¼Œå¼•ç”¨åå¥½å’Œç ”ç©¶
print("\n=== åœºæ™¯ 3ï¼šåç»­å¯¹è¯ ===")
config3 = {"configurable": {"thread_id": str(uuid.uuid4())}}  # æ–°çº¿ç¨‹

result3 = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "æ ¹æ®æˆ‘ä¹‹å‰çš„ç ”ç©¶ï¼Œæ€»ç»“ RAG åœ¨ Python é¡¹ç›®ä¸­çš„åº”ç”¨ã€‚"
    }]
}, config=config3)

print(result3["messages"][-1].content)

# Agent ä¼šï¼š
# 1. è¯»å– /memories/user_preferences.txtï¼ˆPython å¼€å‘è€…ï¼‰
# 2. è¯»å– /memories/research/rag/summary.mdï¼ˆä¹‹å‰çš„ç ”ç©¶ï¼‰
# 3. ç»“åˆè¿™äº›ä¿¡æ¯ç”Ÿæˆé’ˆå¯¹æ€§çš„å›ç­”

# ========== 5. æŸ¥çœ‹é•¿æœŸè®°å¿†å†…å®¹ ==========

print("\n=== é•¿æœŸè®°å¿†æ–‡ä»¶åˆ—è¡¨ ===")
# Agent å¯ä»¥ä½¿ç”¨ ls å·¥å…·åˆ—å‡ºæ–‡ä»¶
result4 = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "åˆ—å‡ºæˆ‘çš„æ‰€æœ‰é•¿æœŸè®°å¿†æ–‡ä»¶"
    }]
}, config=config3)

print(result4["messages"][-1].content)

# è¾“å‡ºç¤ºä¾‹ï¼š
# === åœºæ™¯ 1ï¼šé¦–æ¬¡å¯¹è¯ ===
# æˆ‘å·²ç»è®°ä½äº†ä½ çš„èƒŒæ™¯ï¼šPython å¼€å‘è€…ï¼Œå¯¹ AI Agent å’Œ LangChain æ„Ÿå…´è¶£ã€‚
# è¿™äº›ä¿¡æ¯å·²ä¿å­˜åˆ°é•¿æœŸè®°å¿†ä¸­ï¼Œæœªæ¥å¯¹è¯æˆ‘ä¼šå‚è€ƒè¿™äº›åå¥½ã€‚
#
# === åœºæ™¯ 2ï¼šç ”ç©¶ RAG æŠ€æœ¯ ===
# æˆ‘å·²å®Œæˆ RAG æœ€ä½³å®è·µçš„ç ”ç©¶ï¼Œå¹¶ä¿å­˜äº†ä»¥ä¸‹æ–‡ä»¶ï¼š
# - /memories/research/rag/sources.txtï¼šæƒå¨èµ„æºé“¾æ¥
# - /memories/research/rag/summary.mdï¼šæ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µæ‘˜è¦
# - /memories/research/rag/notes.txtï¼šè¯¦ç»†æŠ€æœ¯ç¬”è®°
#
# === åœºæ™¯ 3ï¼šåç»­å¯¹è¯ ===
# æ ¹æ®ä½ çš„èƒŒæ™¯ï¼ˆPython å¼€å‘è€…ï¼‰å’Œä¹‹å‰çš„ RAG ç ”ç©¶ï¼Œ
# ä»¥ä¸‹æ˜¯ RAG åœ¨ Python é¡¹ç›®ä¸­çš„åº”ç”¨è¦ç‚¹ï¼š...
# [ç»“åˆåå¥½å’Œç ”ç©¶ç¬”è®°ç”Ÿæˆçš„å›ç­”]
#
# === é•¿æœŸè®°å¿†æ–‡ä»¶åˆ—è¡¨ ===
# /memories/user_preferences.txt
# /memories/research/rag/sources.txt
# /memories/research/rag/summary.md
# /memories/research/rag/notes.txt</code></pre>
                    </div>
                </section>

                <!-- é«˜çº§è·¯ç”±é…ç½® -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”€ é«˜çº§è·¯ç”±é…ç½®</h2>
                    <p>
                        ä½¿ç”¨ CompositeBackend çš„å¤šè·¯ç”±åŠŸèƒ½ï¼Œ
                        å®ç°<strong>æ›´ç²¾ç»†çš„å­˜å‚¨ç­–ç•¥</strong>ã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
é«˜çº§è·¯ç”±é…ç½® - å¤šå­˜å‚¨åç«¯
"""
from deepagents.backends import (
    CompositeBackend,
    StateBackend,
    StoreBackend,
    FilesystemBackend
)
from langgraph.store.postgres import PostgresStore

# åˆ›å»ºä¸åŒçš„ Store å®ä¾‹
user_store = PostgresStore(connection_string=os.environ["USER_DB_URL"])
knowledge_store = PostgresStore(connection_string=os.environ["KNOWLEDGE_DB_URL"])

def make_advanced_backend(runtime):
    return CompositeBackend(
        default=StateBackend(runtime),  # é»˜è®¤ï¼šä¸´æ—¶å†…å­˜
        routes={
            # ç”¨æˆ·æ•°æ®ï¼šä¸“ç”¨æ•°æ®åº“
            "/memories/users/": StoreBackend(runtime, store=user_store),

            # çŸ¥è¯†åº“ï¼šå…±äº«æ•°æ®åº“
            "/memories/knowledge/": StoreBackend(runtime, store=knowledge_store),

            # é¡¹ç›®æ–‡ä»¶ï¼šç£ç›˜å­˜å‚¨
            "/memories/projects/": FilesystemBackend(
                root_dir="/data/projects",
                virtual_mode=True
            ),

            # ä¸´æ—¶å·¥ä½œåŒºï¼šå†…å­˜
            "/tmp/": StateBackend(runtime),
        }
    )

agent = create_deep_agent(
    model="gpt-4o",
    backend=make_advanced_backend
)

# ä½¿ç”¨åœºæ™¯ï¼š
# 1. /memories/users/user123.json â†’ PostgreSQL (user_store)
# 2. /memories/knowledge/faq.md â†’ PostgreSQL (knowledge_store)
# 3. /memories/projects/code.py â†’ ç£ç›˜æ–‡ä»¶
# 4. /tmp/scratch.txt â†’ å†…å­˜ï¼ˆä¸æŒä¹…åŒ–ï¼‰
# 5. /data.txtï¼ˆå…¶ä»–è·¯å¾„ï¼‰â†’ å†…å­˜ï¼ˆé»˜è®¤ï¼‰

# ä¼˜åŠ¿ï¼š
# - æ•°æ®éš”ç¦»ï¼šç”¨æˆ·æ•°æ®å’ŒçŸ¥è¯†åº“åˆ†ç¦»
# - æ··åˆå­˜å‚¨ï¼šæ•°æ®åº“ + æ–‡ä»¶ç³»ç»Ÿ + å†…å­˜
# - çµæ´»è·¯ç”±ï¼šæ ¹æ®è·¯å¾„è‡ªåŠ¨é€‰æ‹©å­˜å‚¨æ–¹å¼
# - æ€§èƒ½ä¼˜åŒ–ï¼šä¸´æ—¶æ•°æ®ç”¨å†…å­˜ï¼Œé‡è¦æ•°æ®ç”¨æ•°æ®åº“</code></pre>
                    </div>
                </section>

                <!-- æœ€ä½³å®è·µ -->
                <section class="content-section">
                    <h2 class="section-title">âœ¨ é•¿æœŸè®°å¿†æœ€ä½³å®è·µ</h2>

                    <h3 class="subsection-title">1. é€‰æ‹©åˆé€‚çš„å­˜å‚¨åç«¯</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>åœºæ™¯</th>
                                <th>æ¨èåç«¯</th>
                                <th>åŸå› </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>æœ¬åœ°å¼€å‘</td>
                                <td>InMemoryStore</td>
                                <td>å¿«é€Ÿè¿­ä»£ï¼Œæ— éœ€é…ç½®</td>
                            </tr>
                            <tr>
                                <td>ç”Ÿäº§ç¯å¢ƒ</td>
                                <td>PostgresStore</td>
                                <td>å¯é æŒä¹…åŒ–ï¼Œæ˜“äºç®¡ç†</td>
                            </tr>
                            <tr>
                                <td>é«˜å¹¶å‘</td>
                                <td>RedisStore</td>
                                <td>é«˜æ€§èƒ½ï¼Œåˆ†å¸ƒå¼æ”¯æŒ</td>
                            </tr>
                            <tr>
                                <td>å¤šç§Ÿæˆ·</td>
                                <td>PostgresStore + å‘½åç©ºé—´</td>
                                <td>æ•°æ®éš”ç¦»ï¼Œæ˜“äºç®¡ç†</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 class="subsection-title">2. å‘½åç©ºé—´è®¾è®¡åŸåˆ™</h3>
                    <ul>
                        <li><strong>åˆ†å±‚ç»“æ„</strong>ï¼šä½¿ç”¨ <code>/memories/category/subcategory/</code> æ ¼å¼</li>
                        <li><strong>ä¸€è‡´å‘½å</strong>ï¼šéµå¾ªç»Ÿä¸€çš„å‘½åçº¦å®šï¼ˆå°å†™ã€ä¸‹åˆ’çº¿åˆ†éš”ï¼‰</li>
                        <li><strong>æ–‡æ¡£åŒ–</strong>ï¼šåœ¨ç³»ç»Ÿæç¤ºä¸­æ˜ç¡®è®°å½•å‘½åç©ºé—´ç»“æ„</li>
                        <li><strong>é¿å…å†²çª</strong>ï¼šä¸åŒç±»å‹çš„æ•°æ®ä½¿ç”¨ä¸åŒçš„é¡¶çº§å‘½åç©ºé—´</li>
                    </ul>

                    <h3 class="subsection-title">3. ç³»ç»Ÿæç¤ºä¸­çš„è®°å¿†ç®¡ç†æŒ‡å—</h3>
                    <div class="info-box tip">
                        <div class="info-box-title">ğŸ“ æç¤ºè¯æ¨¡æ¿</div>
                        <p>åœ¨ç³»ç»Ÿæç¤ºä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
                        <ul>
                            <li><strong>å¯ç”¨è·¯å¾„</strong>ï¼šåˆ—å‡ºæ‰€æœ‰é•¿æœŸè®°å¿†è·¯å¾„</li>
                            <li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šè¯´æ˜ä½•æ—¶è¯»å–ã€ä½•æ—¶å†™å…¥</li>
                            <li><strong>æ–‡ä»¶æ ¼å¼</strong>ï¼šæŒ‡å®šä¸åŒç±»å‹æ•°æ®çš„æ ¼å¼ï¼ˆJSONã€Markdownã€TXTï¼‰</li>
                            <li><strong>æ›´æ–°ç­–ç•¥</strong>ï¼šè¯´æ˜ä½•æ—¶æ›´æ–°æ—¢æœ‰è®°å¿†</li>
                        </ul>
                    </div>

                    <h3 class="subsection-title">4. æ•°æ®æ¸…ç†ç­–ç•¥</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®
system_prompt = """...

## æ•°æ®æ¸…ç†è§„åˆ™

1. ä¸´æ—¶ç ”ç©¶ç¬”è®°ï¼š30 å¤©åè‡ªåŠ¨æ¸…ç†
2. ç”¨æˆ·åå¥½ï¼šæ°¸ä¹…ä¿ç•™
3. é¡¹ç›®è®°å½•ï¼šé¡¹ç›®å®Œæˆå 90 å¤©æ¸…ç†
4. æ¯æœˆç¬¬ä¸€å¤©æ‰§è¡Œæ•°æ®æ¸…ç†ä»»åŠ¡
"""</code></pre>
                    </div>

                    <h3 class="subsection-title">5. å®‰å…¨æ€§å’Œéšç§</h3>
                    <ul>
                        <li><strong>æ•æ„Ÿæ•°æ®åŠ å¯†</strong>ï¼šä¸è¦æ˜æ–‡å­˜å‚¨å¯†ç ã€å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯</li>
                        <li><strong>è®¿é—®æ§åˆ¶</strong>ï¼šä½¿ç”¨å‘½åç©ºé—´éš”ç¦»ä¸åŒç”¨æˆ·çš„æ•°æ®</li>
                        <li><strong>å®¡è®¡æ—¥å¿—</strong>ï¼šè®°å½•é•¿æœŸè®°å¿†çš„è¯»å†™æ“ä½œ</li>
                        <li><strong>æ•°æ®å¤‡ä»½</strong>ï¼šå®šæœŸå¤‡ä»½ PostgresStore æ•°æ®åº“</li>
                    </ul>
                </section>

                <!-- å¸¸è§é—®é¢˜ -->
                <section class="content-section">
                    <h2 class="section-title">â“ å¸¸è§é—®é¢˜</h2>

                    <h3 class="subsection-subtitle">Q1: é•¿æœŸè®°å¿†å’ŒçŸ­æœŸè®°å¿†å¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>
                    <p>
                        <strong>é€‰æ‹©æ ‡å‡†</strong>ï¼š
                    </p>
                    <ul>
                        <li><strong>çŸ­æœŸè®°å¿†ï¼ˆCheckpointerï¼‰</strong>ï¼šå¯¹è¯å†å²ã€ä¸­é—´çŠ¶æ€ã€ä¸´æ—¶æ•°æ®</li>
                        <li><strong>é•¿æœŸè®°å¿†ï¼ˆStoreï¼‰</strong>ï¼šç”¨æˆ·åå¥½ã€çŸ¥è¯†åº“ã€é¡¹ç›®è®°å½•ã€è·¨å¯¹è¯æ•°æ®</li>
                    </ul>

                    <h3 class="subsection-subtitle">Q2: /memories/ è·¯å¾„çš„æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºå—ï¼Ÿ</h3>
                    <p>
                        <strong>æ˜¯çš„</strong>ã€‚StoreBackend ä¼šè‡ªåŠ¨å¤„ç†è·¯å¾„åˆ›å»ºã€‚
                        å½“ Agent å†™å…¥ <code>/memories/new_file.txt</code> æ—¶ï¼Œ
                        å³ä½¿è·¯å¾„ä¸å­˜åœ¨ä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºã€‚
                    </p>

                    <h3 class="subsection-subtitle">Q3: èƒ½å¦æ··åˆä½¿ç”¨å¤šä¸ª Store åç«¯ï¼Ÿ</h3>
                    <p>
                        <strong>å¯ä»¥</strong>ï¼Œé€šè¿‡ CompositeBackend çš„å¤š routes é…ç½®ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">routes={
    "/memories/users/": StoreBackend(runtime, store=user_store),
    "/memories/shared/": StoreBackend(runtime, store=shared_store),
}</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q4: PostgresStore éœ€è¦é¢å¤–é…ç½®å—ï¼Ÿ</h3>
                    <p>
                        <strong>ä»…éœ€æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²</strong>ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># è®¾ç½®ç¯å¢ƒå˜é‡
export DATABASE_URL="postgresql://user:pass@localhost:5432/deepagents"

# Python ä»£ç 
store = PostgresStore(connection_string=os.environ["DATABASE_URL"])</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q5: é•¿æœŸè®°å¿†æœ‰å¤§å°é™åˆ¶å—ï¼Ÿ</h3>
                    <p>
                        <strong>å—é™äºåº•å±‚å­˜å‚¨</strong>ï¼š
                    </p>
                    <ul>
                        <li><strong>InMemoryStore</strong>ï¼šå—å†…å­˜å¤§å°é™åˆ¶</li>
                        <li><strong>PostgresStore</strong>ï¼šå—æ•°æ®åº“å®¹é‡å’Œè¡¨å¤§å°é™åˆ¶ï¼ˆé€šå¸¸å‡  GB åˆ°å‡  TBï¼‰</li>
                        <li><strong>RedisStore</strong>ï¼šå— Redis å†…å­˜é…ç½®é™åˆ¶</li>
                    </ul>
                    <p>
                        <strong>å»ºè®®</strong>ï¼šé¿å…å­˜å‚¨è¿‡å¤§çš„æ–‡ä»¶ï¼ˆå¦‚å¤§å‹æ•°æ®é›†ã€å›¾åƒï¼‰ï¼Œ
                        è€ƒè™‘å­˜å‚¨æ–‡ä»¶è·¯å¾„æˆ– URL è€Œéå®Œæ•´å†…å®¹ã€‚
                    </p>

                    <h3 class="subsection-subtitle">Q6: å¦‚ä½•å®ç°å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»ï¼Ÿ</h3>
                    <p>
                        <strong>ä½¿ç”¨åŸºäºç§Ÿæˆ·çš„å‘½åç©ºé—´</strong>ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># åŠ¨æ€åˆ›å»ºç§Ÿæˆ·éš”ç¦»çš„è·¯å¾„
def make_tenant_backend(tenant_id: str):
    def backend_factory(runtime):
        return CompositeBackend(
            default=StateBackend(runtime),
            routes={
                f"/memories/{tenant_id}/": StoreBackend(runtime)
            }
        )
    return backend_factory

# ä¸ºä¸åŒç§Ÿæˆ·åˆ›å»º Agent
agent_tenant1 = create_deep_agent(
    backend=make_tenant_backend("tenant_123")
)

agent_tenant2 = create_deep_agent(
    backend=make_tenant_backend("tenant_456")
)

# æ•°æ®å®Œå…¨éš”ç¦»ï¼š
# tenant_123 çš„æ•°æ®ï¼š/memories/tenant_123/
# tenant_456 çš„æ•°æ®ï¼š/memories/tenant_456/</code></pre>
                    </div>
                </section>

                <!-- å‚è€ƒèµ„æº -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“– å‚è€ƒèµ„æº</h2>
                    <ul>
                        <li>
                            <a href="https://docs.langchain.com/oss/python/deepagents/long-term-memory" target="_blank">
                                DeepAgents Long-term Memory å®˜æ–¹æ–‡æ¡£
                            </a>
                        </li>
                        <li>
                            <a href="25-deepagents-backends.html">
                                åç«¯é…ç½® - Backends è¯¦è§£
                            </a>
                        </li>
                        <li>
                            <a href="11-checkpointer.html">
                                æŒä¹…åŒ–ç³»ç»Ÿ - Checkpointer vs Store
                            </a>
                        </li>
                        <li>
                            <a href="14-long-term-memory.html">
                                é•¿æœŸè®°å¿† - LangGraph Store åŸºç¡€
                            </a>
                        </li>
                        <li>
                            <a href="22-deepagents-quickstart.html">
                                DeepAgents å¿«é€Ÿå¼€å§‹
                            </a>
                        </li>
                    </ul>
                </section>

                <!-- é¡µé¢å¯¼èˆª -->
                <nav class="page-navigation">
                    <a href="27-deepagents-hitl.html" class="nav-button prev">
                        â† ä¸Šä¸€é¡µï¼šäººå·¥ä»‹å…¥
                    </a>
                    <a href="29-deepagents-middleware.html" class="nav-button next">
                        ä¸‹ä¸€é¡µï¼šä¸­é—´ä»¶ â†’
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" aria-label="è¿”å›é¡¶éƒ¨">â†‘</button>

    <!-- JavaScript -->
    <script src="assets/js/mermaid-init.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</body>
</html>
