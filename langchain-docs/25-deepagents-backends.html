<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="DeepAgents åç«¯é…ç½® - å­˜å‚¨ç­–ç•¥å’Œå¤šåç«¯æ”¯æŒ">
    <title>DeepAgents åç«¯é…ç½® | LangChain 1.0 Python çŸ¥è¯†æ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <button class="mobile-menu-button" aria-label="æ‰“å¼€èœå•">â˜°</button>

    <div class="container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">ğŸ¦œ LangChain 1.0</h1>
                <p class="sidebar-subtitle">Python å®Œæ•´å­¦ä¹ æŒ‡å—</p>
            </div>

            <ul class="nav-menu">
                <li class="nav-section">
                    <div class="nav-section-title">å¼€å§‹</div>
                    <ul>
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <span class="nav-icon">ğŸ </span>
                                ä¸»é¡µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">åŸºç¡€ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="01-introduction.html" class="nav-link">
                                <span class="nav-icon">ğŸ“–</span>
                                LangChain ç®€ä»‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="02-architecture.html" class="nav-link">
                                <span class="nav-icon">ğŸ—ï¸</span>
                                æ ¸å¿ƒæ¶æ„
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="03-models.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤–</span>
                                æ¨¡å‹æ¥å£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="04-messages.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¬</span>
                                æ¶ˆæ¯ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="05-tools.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                å·¥å…·ç³»ç»Ÿ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">è¿›é˜¶ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="06-agents.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                Agent åŸºç¡€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="07-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="08-rag.html" class="nav-link">
                                <span class="nav-icon">ğŸ”</span>
                                RAG è¯¦è§£
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="09-lcel.html" class="nav-link">
                                <span class="nav-icon">ğŸ”—</span>
                                LCEL è¡¨è¾¾å¼
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">é«˜çº§åº”ç”¨</div>
                    <ul>
                        <li class="nav-item">
                            <a href="10-runtime.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                Runtime ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="11-checkpointer.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¾</span>
                                æŒä¹…åŒ–ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="12-streaming.html" class="nav-link">
                                <span class="nav-icon">ğŸŒŠ</span>
                                æµå¼è¾“å‡º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="13-human-in-loop.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="14-long-term-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ—„ï¸</span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="15-langgraph.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                LangGraph
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">å®æˆ˜ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="16-customer-service.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å®¢æœæœºå™¨äºº
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="17-best-practices.html" class="nav-link">
                                <span class="nav-icon">âœ¨</span>
                                æœ€ä½³å®è·µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">å‚è€ƒç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="18-api-reference.html" class="nav-link">
                                <span class="nav-icon">ğŸ“š</span>
                                API é€ŸæŸ¥è¡¨
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="19-troubleshooting.html" class="nav-link">
                                <span class="nav-icon">ğŸ›</span>
                                æ•…éšœæ’é™¤
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="20-migration.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                è¿ç§»æŒ‡å—
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">æ‰©å±•ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="21-structured-output.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                ç»“æ„åŒ–è¾“å‡º
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">DeepAgents ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="22-deepagents-quickstart.html" class="nav-link">
                                <span class="nav-icon">ğŸš€</span>
                                å¿«é€Ÿå¼€å§‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="23-deepagents-customization.html" class="nav-link">
                                <span class="nav-icon">ğŸ¨</span>
                                å®šåˆ¶åŒ–
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="24-deepagents-harness.html" class="nav-link">
                                <span class="nav-icon">ğŸ›ï¸</span>
                                Harness ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a href="25-deepagents-backends.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                åç«¯é…ç½®
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="26-deepagents-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="27-deepagents-hitl.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="28-deepagents-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ§ </span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="29-deepagents-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">Multi-Agent ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="30-multi-agent-index.html" class="nav-link">
                                <span class="nav-icon">ğŸŒ</span>
                                æ¦‚è¿°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="31-multi-agent-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="32-multi-agent-handoffs.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                äº¤æ¥æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="33-multi-agent-skills.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                æŠ€èƒ½ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="34-multi-agent-router.html" class="nav-link">
                                <span class="nav-icon">ğŸ§­</span>
                                è·¯ç”±æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="35-multi-agent-workflow.html" class="nav-link">
                                <span class="nav-icon">ğŸ”€</span>
                                è‡ªå®šä¹‰å·¥ä½œæµ
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                <nav class="breadcrumb">
                    <span class="breadcrumb-item">
                        <a href="index.html" class="breadcrumb-link">ä¸»é¡µ</a>
                    </span>
                    <span class="breadcrumb-item">
                        DeepAgents ç¯‡
                    </span>
                    <span class="breadcrumb-item">
                        åç«¯é…ç½®
                    </span>
                </nav>

                <!-- é¡µé¢æ ‡é¢˜ -->
                <header class="page-header">
                    <h1 class="page-title">ğŸ”§ DeepAgents åç«¯é…ç½®</h1>
                    <p class="page-subtitle">
                        å¯æ’æ‹”çš„å­˜å‚¨åç«¯ç³»ç»Ÿï¼Œæ”¯æŒå†…å­˜ã€ç£ç›˜ã€æ•°æ®åº“ç­‰å¤šç§å­˜å‚¨ç­–ç•¥ï¼Œ
                        çµæ´»é€‚é…ä¸´æ—¶è®¡ç®—ã€æœ¬åœ°å¼€å‘å’Œé•¿æœŸæŒä¹…åŒ–ç­‰ä¸åŒåœºæ™¯ã€‚
                    </p>
                </header>

                <!-- ä»€ä¹ˆæ˜¯ Backends -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“š ä»€ä¹ˆæ˜¯ Backendsï¼Ÿ</h2>
                    <p>
                        <strong>Backends</strong>ï¼ˆåç«¯ï¼‰æ˜¯ DeepAgents çš„<strong>å¯æ’æ‹”æ–‡ä»¶ç³»ç»Ÿå±‚</strong>ï¼Œ
                        ä¸º Agent æä¾›ç»Ÿä¸€çš„æ–‡ä»¶æ“ä½œæ¥å£ï¼Œåº•å±‚å¯ä»¥çµæ´»åˆ‡æ¢ä¸åŒçš„å­˜å‚¨å®ç°ã€‚
                    </p>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ’¡ Backends æ ¸å¿ƒç‰¹æ€§</div>
                        <table style="margin-top: 0.5rem;">
                            <thead>
                                <tr>
                                    <th>ç‰¹æ€§</th>
                                    <th>è¯´æ˜</th>
                                    <th>ä¼˜åŠ¿</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>å¯æ’æ‹”è®¾è®¡</strong></td>
                                    <td>ç»Ÿä¸€æ¥å£ï¼Œå¤šç§å®ç°</td>
                                    <td>æ— éœ€æ”¹ä»£ç å³å¯åˆ‡æ¢å­˜å‚¨</td>
                                </tr>
                                <tr>
                                    <td><strong>å­˜å‚¨æŠ½è±¡</strong></td>
                                    <td>Agent æ— éœ€å…³å¿ƒåº•å±‚å­˜å‚¨</td>
                                    <td>ç®€åŒ– Agent å¼€å‘</td>
                                </tr>
                                <tr>
                                    <td><strong>çµæ´»è·¯ç”±</strong></td>
                                    <td>ä¸åŒè·¯å¾„ä½¿ç”¨ä¸åŒåç«¯</td>
                                    <td>æ··åˆä¸´æ—¶å’ŒæŒä¹…åŒ–å­˜å‚¨</td>
                                </tr>
                                <tr>
                                    <td><strong>å®‰å…¨æ§åˆ¶</strong></td>
                                    <td>ç­–ç•¥é’©å­å’Œæƒé™ç®¡ç†</td>
                                    <td>é˜²æ­¢è·¯å¾„éå†ã€é™åˆ¶è®¿é—®</td>
                                </tr>
                                <tr>
                                    <td><strong>è‡ªå®šä¹‰æ‰©å±•</strong></td>
                                    <td>å®ç° BackendProtocol æ¥å£</td>
                                    <td>æ”¯æŒ S3ã€PostgreSQL ç­‰</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="info-box tip">
                        <div class="info-box-title">âœ¨ å·¥ä½œåŸç†</div>
                        <p>
                            Agent é€šè¿‡<strong>6 ä¸ªæ–‡ä»¶å·¥å…·</strong>ä¸åç«¯äº¤äº’ï¼š
                        </p>
                        <ul>
                            <li><code>ls</code> â†’ <code>backend.ls_info(path)</code></li>
                            <li><code>read_file</code> â†’ <code>backend.read(file_path, offset, limit)</code></li>
                            <li><code>write_file</code> â†’ <code>backend.write(file_path, content)</code></li>
                            <li><code>edit_file</code> â†’ <code>backend.edit(file_path, old, new, replace_all)</code></li>
                            <li><code>glob</code> â†’ <code>backend.glob_info(pattern, path)</code></li>
                            <li><code>grep</code> â†’ <code>backend.grep_raw(pattern, path, glob)</code></li>
                        </ul>
                    </div>
                </section>

                <!-- 4 ç§åç«¯ç±»å‹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ—‚ï¸ 4 ç§åç«¯ç±»å‹</h2>
                    <p>
                        DeepAgents æä¾›<strong>4 ç§å†…ç½®åç«¯</strong>ï¼Œæ»¡è¶³ä¸åŒçš„å­˜å‚¨éœ€æ±‚ï¼š
                    </p>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph TB
    Agent["DeepAgent<br/>æ–‡ä»¶å·¥å…·"] --> Backend["Backend æŠ½è±¡å±‚"]

    Backend --> State["StateBackend<br/>å†…å­˜å­˜å‚¨"]
    Backend --> FS["FilesystemBackend<br/>ç£ç›˜å­˜å‚¨"]
    Backend --> Store["StoreBackend<br/>æŒä¹…åŒ–å­˜å‚¨"]
    Backend --> Composite["CompositeBackend<br/>è·¯ç”±æ··åˆ"]

    State --> Use1["ä¸´æ—¶è®¡ç®—<br/>å•çº¿ç¨‹"]
    FS --> Use2["æœ¬åœ°å¼€å‘<br/>çœŸå®æ–‡ä»¶"]
    Store --> Use3["é•¿æœŸè®°å¿†<br/>è·¨çº¿ç¨‹"]
    Composite --> Use4["æ··åˆåœºæ™¯<br/>æœ€çµæ´»"]

    style Agent fill:#3b82f6,color:#fff
    style Backend fill:#10b981,color:#fff
    style State fill:#f59e0b,color:#fff
    style FS fill:#8b5cf6,color:#fff
    style Store fill:#ec4899,color:#fff
    style Composite fill:#ef4444,color:#fff
                        </div>
                    </div>

                    <h3 class="subsection-title">åç«¯å¯¹æ¯”è¡¨</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>åç«¯</th>
                                <th>å»¶è¿Ÿ</th>
                                <th>æŒä¹…åŒ–</th>
                                <th>è·¨çº¿ç¨‹</th>
                                <th>æœ€ä½³ç”¨é€”</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>StateBackend</code></td>
                                <td>âš¡ æä½</td>
                                <td>âŒ å¦</td>
                                <td>âŒ å¦</td>
                                <td>ä¸´æ—¶è®¡ç®—ã€å•æ¬¡å¯¹è¯</td>
                            </tr>
                            <tr>
                                <td><code>FilesystemBackend</code></td>
                                <td>ğŸŸ¡ ä½</td>
                                <td>âœ… æ˜¯</td>
                                <td>âœ… æ˜¯</td>
                                <td>æœ¬åœ°å¼€å‘ã€CI ç¯å¢ƒ</td>
                            </tr>
                            <tr>
                                <td><code>StoreBackend</code></td>
                                <td>ğŸŸ  ä¸­</td>
                                <td>âœ… æ˜¯</td>
                                <td>âœ… æ˜¯</td>
                                <td>é•¿æœŸè®°å¿†ã€çŸ¥è¯†åº“</td>
                            </tr>
                            <tr>
                                <td><code>CompositeBackend</code></td>
                                <td>ğŸŸ  ä¸­</td>
                                <td>ğŸ”„ æ··åˆ</td>
                                <td>ğŸ”„ æ··åˆ</td>
                                <td>æ··åˆåœºæ™¯ï¼ˆæ¨èï¼‰</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- StateBackend -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“ StateBackend - å†…å­˜å­˜å‚¨</h2>
                    <p>
                        <strong>StateBackend</strong> æ˜¯<strong>é»˜è®¤åç«¯</strong>ï¼Œ
                        å°†æ–‡ä»¶å­˜å‚¨åœ¨ LangGraph Agent çŠ¶æ€ä¸­ï¼Œä»…åœ¨å•ä¸ªçº¿ç¨‹å†…æœ‰æ•ˆã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
StateBackend - é»˜è®¤å†…å­˜å­˜å‚¨
"""
from deepagents import create_deep_agent

# æ–¹å¼ 1ï¼šé»˜è®¤ä½¿ç”¨ï¼ˆæ— éœ€æŒ‡å®šï¼‰
agent = create_deep_agent(
    model="gpt-4o"
)

# æ–¹å¼ 2ï¼šæ˜¾å¼æŒ‡å®š
from deepagents.backends import StateBackend

agent = create_deep_agent(
    model="gpt-4o",
    backend=lambda rt: StateBackend(rt)
)

# ä½¿ç”¨ Agent
result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¿å­˜æœç´¢ç»“æœ"
    }]
})

# ç‰¹ç‚¹ï¼š
# - æ–‡ä»¶å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆAgent çŠ¶æ€ï¼‰
# - å¯¹è¯ç»“æŸåæ•°æ®æ¶ˆå¤±
# - æœ€å¿«çš„æ€§èƒ½ï¼ˆæ—  I/O å¼€é”€ï¼‰
# - é€‚ç”¨äºä¸´æ—¶å·¥ä½œç©ºé—´

# é™åˆ¶ï¼š
# - ä¸è·¨çº¿ç¨‹å…±äº«
# - ä¸æŒä¹…åŒ–åˆ°ç£ç›˜
# - å ç”¨å†…å­˜ç©ºé—´</code></pre>
                    </div>
                </section>

                <!-- FilesystemBackend -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ’¾ FilesystemBackend - ç£ç›˜å­˜å‚¨</h2>
                    <p>
                        <strong>FilesystemBackend</strong> è¯»å†™<strong>çœŸå®çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼Œ
                        æ”¯æŒè™šæ‹Ÿæ¨¡å¼æ²™ç®±å’Œè·¯å¾„å®‰å…¨éªŒè¯ã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
FilesystemBackend - æœ¬åœ°ç£ç›˜å­˜å‚¨
"""
from deepagents import create_deep_agent
from deepagents.backends import FilesystemBackend

# é…ç½®ç£ç›˜åç«¯
agent = create_deep_agent(
    model="gpt-4o",
    backend=FilesystemBackend(
        root_dir="/Users/myname/agent_workspace",  # æ ¹ç›®å½•
        virtual_mode=True  # å¯ç”¨è™šæ‹Ÿæ¨¡å¼ï¼ˆå®‰å…¨ï¼‰
    )
)

# ä½¿ç”¨ Agent
result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "åˆ›å»ºæ–‡ä»¶ /project/README.mdï¼Œå†…å®¹æ˜¯é¡¹ç›®è¯´æ˜"
    }]
})

# æ‰§è¡Œåï¼š
# - æ–‡ä»¶å®é™…å†™å…¥ï¼š/Users/myname/agent_workspace/project/README.md
# - Agent çœ‹åˆ°çš„è·¯å¾„ï¼š/project/README.mdï¼ˆè™šæ‹Ÿè·¯å¾„ï¼‰

# virtual_mode=True çš„ä½œç”¨ï¼š
# 1. é˜²æ­¢è·¯å¾„éå†æ”»å‡»ï¼ˆAgent æ— æ³•è®¿é—® root_dir ä¹‹å¤–çš„è·¯å¾„ï¼‰
# 2. è·¯å¾„è§„èŒƒåŒ–ï¼ˆè‡ªåŠ¨å¤„ç† ../ å’Œç¬¦å·é“¾æ¥ï¼‰
# 3. å®‰å…¨æ²™ç®±ï¼ˆé™åˆ¶ Agent æ“ä½œèŒƒå›´ï¼‰

# ç‰¹ç‚¹ï¼š
# - çœŸå®ç£ç›˜ I/O
# - è·¨å¯¹è¯æŒä¹…åŒ–
# - é€‚ç”¨äºæœ¬åœ°å¼€å‘ã€CI ç¯å¢ƒ
# - æ”¯æŒå¤§æ–‡ä»¶ï¼ˆä¸å—å†…å­˜é™åˆ¶ï¼‰</code></pre>
                    </div>

                    <h3 class="subsection-title">è™šæ‹Ÿæ¨¡å¼ï¼ˆvirtual_modeï¼‰è¯¦è§£</h3>
                    <div class="info-box warning">
                        <div class="info-box-title">âš ï¸ è™šæ‹Ÿæ¨¡å¼çš„é‡è¦æ€§</div>
                        <p>
                            <strong>virtual_mode=True</strong> æ˜¯ç”Ÿäº§ç¯å¢ƒçš„å¿…è¦å®‰å…¨æªæ–½ï¼š
                        </p>
                        <ul>
                            <li><strong>é˜²æ­¢è·¯å¾„éå†</strong>ï¼šAgent æ— æ³•è®¿é—® <code>../../../etc/passwd</code></li>
                            <li><strong>é™åˆ¶è®¿é—®èŒƒå›´</strong>ï¼šåªèƒ½æ“ä½œ <code>root_dir</code> å†…çš„æ–‡ä»¶</li>
                            <li><strong>ç¬¦å·é“¾æ¥ä¿æŠ¤</strong>ï¼šè‡ªåŠ¨æ£€æµ‹å’Œé˜»æ­¢ç¬¦å·é“¾æ¥æ”»å‡»</li>
                        </ul>
                    </div>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
è™šæ‹Ÿæ¨¡å¼ç¤ºä¾‹
"""
# åœºæ™¯ï¼šAgent å°è¯•è·¯å¾„éå†æ”»å‡»
agent = create_deep_agent(
    backend=FilesystemBackend(
        root_dir="/workspace",
        virtual_mode=True
    )
)

# Agent å°è¯•è®¿é—®ç³»ç»Ÿæ–‡ä»¶
result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "è¯»å–æ–‡ä»¶ /../../../etc/passwd"
    }]
})

# ç»“æœï¼š
# - virtual_mode=Trueï¼šè®¿é—®è¢«æ‹’ç»ï¼ˆå®‰å…¨ï¼‰
# - virtual_mode=Falseï¼šå¯èƒ½è®¿é—®æˆåŠŸï¼ˆå±é™©ï¼‰</code></pre>
                    </div>
                </section>

                <!-- StoreBackend -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ—„ï¸ StoreBackend - æŒä¹…åŒ–å­˜å‚¨</h2>
                    <p>
                        <strong>StoreBackend</strong> ä½¿ç”¨ LangGraph çš„ <code>BaseStore</code>ï¼Œ
                        æ”¯æŒ<strong>è·¨çº¿ç¨‹æŒä¹…åŒ–</strong>ï¼Œå¯è¿æ¥ Redisã€PostgreSQL ç­‰æ•°æ®åº“ã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
StoreBackend - æŒä¹…åŒ–å­˜å‚¨
"""
from deepagents import create_deep_agent
from deepagents.backends import StoreBackend
from langgraph.store.memory import InMemoryStore

# åˆ›å»ºæŒä¹…åŒ– Store
store = InMemoryStore()  # å¯æ›¿æ¢ä¸º RedisStoreã€PostgresStore

# é…ç½® StoreBackend
agent = create_deep_agent(
    model="gpt-4o",
    backend=lambda rt: StoreBackend(rt),
    store=store  # ä¼ é€’ store å®ä¾‹
)

# ä½¿ç”¨ Agent
result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "ä¿å­˜ç”¨æˆ·åå¥½åˆ° /memories/user_preferences.json"
    }]
})

# ç‰¹ç‚¹ï¼š
# - è·¨å¯¹è¯æŒä¹…åŒ–
# - è·¨çº¿ç¨‹å…±äº«æ•°æ®
# - æ”¯æŒæ•°æ®åº“åç«¯ï¼ˆRedisã€PostgreSQLï¼‰
# - é€‚ç”¨äºé•¿æœŸè®°å¿†ã€çŸ¥è¯†åº“

# ä½¿ç”¨åœºæ™¯ï¼š
# - ç”¨æˆ·é…ç½®å’Œåå¥½
# - FAQ çŸ¥è¯†åº“
# - å†å²å¯¹è¯è®°å½•
# - å…±äº«çš„å‚è€ƒæ•°æ®</code></pre>
                    </div>

                    <h3 class="subsection-title">ä½¿ç”¨ PostgreSQL Store</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
StoreBackend - PostgreSQL æŒä¹…åŒ–
"""
from deepagents import create_deep_agent
from deepagents.backends import StoreBackend
from langgraph.store.postgres import PostgresStore

# è¿æ¥ PostgreSQL
store = PostgresStore(
    connection_string="postgresql://user:pass@localhost:5432/deepagents"
)

agent = create_deep_agent(
    model="gpt-4o",
    backend=lambda rt: StoreBackend(rt),
    store=store
)

# ä¼˜åŠ¿ï¼š
# - çœŸæ­£çš„æŒä¹…åŒ–ï¼ˆæ•°æ®åº“çº§åˆ«ï¼‰
# - è·¨å®ä¾‹å…±äº«ï¼ˆå¤šä¸ª Agent å®ä¾‹è®¿é—®åŒä¸€æ•°æ®ï¼‰
# - æ”¯æŒå¤§è§„æ¨¡æ•°æ®
# - ç”Ÿäº§ç¯å¢ƒæ¨è</code></pre>
                    </div>
                </section>

                <!-- CompositeBackend -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”€ CompositeBackend - è·¯ç”±æ··åˆ</h2>
                    <p>
                        <strong>CompositeBackend</strong> æ˜¯<strong>æœ€çµæ´»çš„æ–¹æ¡ˆ</strong>ï¼Œ
                        æ ¹æ®<strong>è·¯å¾„å‰ç¼€</strong>å°†è¯·æ±‚è·¯ç”±åˆ°ä¸åŒçš„åç«¯ã€‚
                    </p>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph LR
    Agent["Agent æ–‡ä»¶æ“ä½œ"] --> Composite["CompositeBackend<br/>è·¯ç”±å™¨"]

    Composite -->|"/tmp/"| State["StateBackend<br/>ä¸´æ—¶æ•°æ®"]
    Composite -->|"/knowledge/"| Store["StoreBackend<br/>çŸ¥è¯†åº“"]
    Composite -->|"/workspace/"| FS["FilesystemBackend<br/>å·¥ä½œåŒº"]
    Composite -->|"å…¶ä»–"| Default["StateBackend<br/>é»˜è®¤"]

    State --> Result1["å†…å­˜"]
    Store --> Result2["æ•°æ®åº“"]
    FS --> Result3["ç£ç›˜"]
    Default --> Result4["å†…å­˜"]

    style Composite fill:#f59e0b,color:#fff
    style State fill:#3b82f6,color:#fff
    style Store fill:#8b5cf6,color:#fff
    style FS fill:#10b981,color:#fff
                        </div>
                    </div>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§ - æ¨è</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
CompositeBackend - æ··åˆè·¯ç”±ç­–ç•¥
"""
from deepagents import create_deep_agent
from deepagents.backends import (
    CompositeBackend,
    StateBackend,
    StoreBackend,
    FilesystemBackend
)
from langgraph.store.memory import InMemoryStore

# åˆ›å»º Store
store = InMemoryStore()

# å®šä¹‰è·¯ç”±è§„åˆ™
composite_backend = lambda rt: CompositeBackend(
    default=StateBackend(rt),  # é»˜è®¤ä½¿ç”¨å†…å­˜
    routes={
        "/tmp/": StateBackend(rt),              # ä¸´æ—¶æ•°æ® â†’ å†…å­˜
        "/knowledge/": StoreBackend(rt),        # çŸ¥è¯†åº“ â†’ æŒä¹…åŒ–
        "/workspace/": FilesystemBackend(       # å·¥ä½œåŒº â†’ ç£ç›˜
            root_dir="/Users/myname/workspace",
            virtual_mode=True
        ),
    }
)

# åˆ›å»º Agent
agent = create_deep_agent(
    model="gpt-4o",
    backend=composite_backend,
    store=store
)

# ä½¿ç”¨ç¤ºä¾‹ï¼š

# 1. ä¸´æ—¶è®¡ç®—ç»“æœ â†’ å†…å­˜
agent.invoke({
    "messages": [{
        "role": "user",
        "content": "ä¿å­˜æœç´¢ç»“æœåˆ° /tmp/search.txt"
    }]
})  # ä½¿ç”¨ StateBackendï¼ˆå†…å­˜ï¼‰

# 2. çŸ¥è¯†åº“æ•°æ® â†’ æŒä¹…åŒ–
agent.invoke({
    "messages": [{
        "role": "user",
        "content": "ä¿å­˜ FAQ åˆ° /knowledge/faq.json"
    }]
})  # ä½¿ç”¨ StoreBackendï¼ˆæ•°æ®åº“ï¼‰

# 3. å·¥ä½œåŒºæ–‡ä»¶ â†’ ç£ç›˜
agent.invoke({
    "messages": [{
        "role": "user",
        "content": "åˆ›å»ºé¡¹ç›®æ–‡ä»¶ /workspace/main.py"
    }]
})  # ä½¿ç”¨ FilesystemBackendï¼ˆç£ç›˜ï¼‰

# 4. å…¶ä»–è·¯å¾„ â†’ é»˜è®¤å†…å­˜
agent.invoke({
    "messages": [{
        "role": "user",
        "content": "ä¿å­˜ä¸´æ—¶æ•°æ®åˆ° /data/temp.txt"
    }]
})  # ä½¿ç”¨é»˜è®¤ StateBackendï¼ˆå†…å­˜ï¼‰</code></pre>
                    </div>

                    <h3 class="subsection-title">è·¯ç”±è§„åˆ™</h3>
                    <div class="info-box tip">
                        <div class="info-box-title">âœ¨ è·¯ç”±åŒ¹é…è§„åˆ™</div>
                        <ul>
                            <li><strong>æœ€é•¿å‰ç¼€åŒ¹é…</strong>ï¼š<code>/memories/projects/</code> ä¼˜å…ˆäº <code>/memories/</code></li>
                            <li><strong>ç²¾ç¡®åŒ¹é…</strong>ï¼šè·¯å¾„å¿…é¡»ä»¥ <code>/</code> ç»“å°¾</li>
                            <li><strong>é»˜è®¤åç«¯</strong>ï¼šæœªåŒ¹é…çš„è·¯å¾„ä½¿ç”¨ <code>default</code></li>
                        </ul>
                    </div>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
å¤æ‚è·¯ç”±è§„åˆ™ç¤ºä¾‹
"""
composite = lambda rt: CompositeBackend(
    default=StateBackend(rt),
    routes={
        "/memories/": FilesystemBackend(
            root_dir="/deepagents/myagent",
            virtual_mode=True
        ),
        "/memories/projects/": StoreBackend(rt),  # æ›´å…·ä½“çš„å‰ç¼€
    }
)

# è·¯ç”±ç»“æœï¼š
# - /memories/projects/code.py â†’ StoreBackendï¼ˆæ›´é•¿å‰ç¼€ä¼˜å…ˆï¼‰
# - /memories/notes.txt â†’ FilesystemBackend
# - /tmp/data.txt â†’ StateBackendï¼ˆé»˜è®¤ï¼‰</code></pre>
                    </div>
                </section>

                <!-- è‡ªå®šä¹‰åç«¯ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”¨ è‡ªå®šä¹‰åç«¯å®ç°</h2>
                    <p>
                        å¯ä»¥é€šè¿‡å®ç°<strong>BackendProtocol æ¥å£</strong>åˆ›å»ºè‡ªå®šä¹‰åç«¯ï¼Œ
                        æ”¯æŒ S3ã€MongoDBã€Redis ç­‰ä»»æ„å­˜å‚¨ç³»ç»Ÿã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§ - å®Œæ•´ç¤ºä¾‹</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
è‡ªå®šä¹‰åç«¯ - S3Backend ç¤ºä¾‹
"""
from typing import Protocol
from deepagents.backends import (
    BackendProtocol,
    LsResult,
    ReadResult,
    WriteResult,
    EditResult,
    GrepResult,
    GlobResult
)
import boto3

class S3Backend(BackendProtocol):
    """S3 å­˜å‚¨åç«¯"""

    def __init__(self, bucket_name: str, prefix: str = ""):
        self.s3 = boto3.client("s3")
        self.bucket = bucket_name
        self.prefix = prefix

    def ls_info(self, path: str) -> LsResult:
        """åˆ—å‡º S3 å¯¹è±¡"""
        try:
            response = self.s3.list_objects_v2(
                Bucket=self.bucket,
                Prefix=self._normalize_path(path),
                Delimiter="/"
            )

            files = []
            for obj in response.get("Contents", []):
                files.append({
                    "name": obj["Key"].split("/")[-1],
                    "size": obj["Size"],
                    "modified": obj["LastModified"].isoformat()
                })

            return LsResult(files=files, files_update=None)
        except Exception as e:
            return LsResult(error=f"S3 åˆ—è¡¨å¤±è´¥: {str(e)}")

    def read(self, file_path: str, offset: int = 0,
             limit: int | None = None) -> ReadResult:
        """ä» S3 è¯»å–æ–‡ä»¶"""
        try:
            key = self._normalize_path(file_path)
            response = self.s3.get_object(Bucket=self.bucket, Key=key)
            content = response["Body"].read().decode("utf-8")

            # åº”ç”¨ offset å’Œ limit
            lines = content.splitlines()
            if offset or limit:
                lines = lines[offset:offset + limit if limit else None]

            return ReadResult(
                content="\n".join(lines),
                files_update=None
            )
        except Exception as e:
            return ReadResult(error=f"S3 è¯»å–å¤±è´¥: {str(e)}")

    def write(self, file_path: str, content: str) -> WriteResult:
        """å†™å…¥ S3 å¯¹è±¡"""
        try:
            key = self._normalize_path(file_path)
            self.s3.put_object(
                Bucket=self.bucket,
                Key=key,
                Body=content.encode("utf-8")
            )
            return WriteResult(
                success=f"å·²å†™å…¥ S3: s3://{self.bucket}/{key}",
                files_update=None
            )
        except Exception as e:
            return WriteResult(error=f"S3 å†™å…¥å¤±è´¥: {str(e)}")

    def edit(self, file_path: str, old_string: str,
             new_string: str, replace_all: bool = False) -> EditResult:
        """ç¼–è¾‘ S3 å¯¹è±¡"""
        # 1. è¯»å–å†…å®¹
        read_result = self.read(file_path)
        if read_result.error:
            return EditResult(error=read_result.error)

        # 2. æ‰§è¡Œæ›¿æ¢
        content = read_result.content
        if replace_all:
            new_content = content.replace(old_string, new_string)
        else:
            new_content = content.replace(old_string, new_string, 1)

        # 3. å†™å›
        write_result = self.write(file_path, new_content)
        if write_result.error:
            return EditResult(error=write_result.error)

        return EditResult(
            success=f"å·²ç¼–è¾‘ {file_path}",
            files_update=None
        )

    def grep_raw(self, pattern: str, path: str = "/",
                 glob: str | None = None) -> GrepResult:
        """S3 å†…å®¹æœç´¢ï¼ˆç®€åŒ–å®ç°ï¼‰"""
        return GrepResult(error="S3Backend æš‚ä¸æ”¯æŒ grep")

    def glob_info(self, pattern: str, path: str = "/") -> GlobResult:
        """S3 æ¨¡å¼åŒ¹é…ï¼ˆç®€åŒ–å®ç°ï¼‰"""
        return GlobResult(error="S3Backend æš‚ä¸æ”¯æŒ glob")

    def _normalize_path(self, path: str) -> str:
        """è§„èŒƒåŒ–è·¯å¾„"""
        path = path.lstrip("/")
        return f"{self.prefix}/{path}" if self.prefix else path


# ä½¿ç”¨è‡ªå®šä¹‰åç«¯
agent = create_deep_agent(
    model="gpt-4o",
    backend=S3Backend(
        bucket_name="my-agent-storage",
        prefix="agents/workspace"
    )
)

# Agent çš„æ–‡ä»¶æ“ä½œä¼šä½¿ç”¨ S3
result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "ä¿å­˜æŠ¥å‘Šåˆ° /reports/summary.md"
    }]
})

# å®é™…æ“ä½œï¼š
# - æ–‡ä»¶å†™å…¥ S3: s3://my-agent-storage/agents/workspace/reports/summary.md</code></pre>
                    </div>
                </section>

                <!-- ç­–ç•¥é’©å­ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ›¡ï¸ ç­–ç•¥é’©å­ï¼ˆå®‰å…¨æ§åˆ¶ï¼‰</h2>
                    <p>
                        é€šè¿‡<strong>å­ç±»åŒ–æˆ–åŒ…è£…å™¨æ¨¡å¼</strong>ï¼Œå¯ä»¥æ·»åŠ å®‰å…¨ç­–ç•¥å’Œæƒé™æ§åˆ¶ã€‚
                    </p>

                    <h3 class="subsection-title">æ–¹å¼ 1ï¼šå­ç±»åŒ–</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
ç­–ç•¥é’©å­ - å­ç±»åŒ–æ–¹å¼
"""
from deepagents.backends import FilesystemBackend, WriteResult

class GuardedBackend(FilesystemBackend):
    """å¸¦å®‰å…¨ç­–ç•¥çš„æ–‡ä»¶ç³»ç»Ÿåç«¯"""

    def __init__(self, *, deny_prefixes: list[str], **kwargs):
        super().__init__(**kwargs)
        # è§„èŒƒåŒ–æ‹’ç»å‰ç¼€
        self.deny_prefixes = [
            p if p.endswith("/") else p + "/"
            for p in deny_prefixes
        ]

    def write(self, file_path: str, content: str) -> WriteResult:
        """å†™å…¥å‰æ£€æŸ¥æƒé™"""
        # æ£€æŸ¥æ˜¯å¦åœ¨æ‹’ç»åˆ—è¡¨ä¸­
        if any(file_path.startswith(p) for p in self.deny_prefixes):
            return WriteResult(
                error=f"å†™å…¥è¢«æ‹’ç»ï¼š{file_path} (å—ä¿æŠ¤è·¯å¾„)"
            )

        # å…è®¸å†™å…¥
        return super().write(file_path, content)

    def edit(self, file_path: str, old_string: str,
             new_string: str, replace_all: bool = False):
        """ç¼–è¾‘å‰æ£€æŸ¥æƒé™"""
        if any(file_path.startswith(p) for p in self.deny_prefixes):
            return EditResult(
                error=f"ç¼–è¾‘è¢«æ‹’ç»ï¼š{file_path} (å—ä¿æŠ¤è·¯å¾„)"
            )
        return super().edit(file_path, old_string, new_string, replace_all)


# ä½¿ç”¨å—ä¿æŠ¤çš„åç«¯
agent = create_deep_agent(
    model="gpt-4o",
    backend=GuardedBackend(
        root_dir="/workspace",
        virtual_mode=True,
        deny_prefixes=[
            "/config/",      # é…ç½®æ–‡ä»¶ç¦æ­¢å†™å…¥
            "/production/",  # ç”Ÿäº§æ•°æ®ç¦æ­¢ä¿®æ”¹
        ]
    )
)

# Agent å°è¯•å†™å…¥å—ä¿æŠ¤è·¯å¾„
result = agent.invoke({
    "messages": [{
        "role": "user",
        "content": "ä¿®æ”¹é…ç½®æ–‡ä»¶ /config/settings.json"
    }]
})

# ç»“æœï¼šå†™å…¥è¢«æ‹’ç»ï¼ˆå®‰å…¨ç­–ç•¥ç”Ÿæ•ˆï¼‰</code></pre>
                    </div>

                    <h3 class="subsection-title">æ–¹å¼ 2ï¼šåŒ…è£…å™¨æ¨¡å¼</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
ç­–ç•¥é’©å­ - åŒ…è£…å™¨æ¨¡å¼
"""
from deepagents.backends import BackendProtocol, WriteResult

class PolicyWrapper(BackendProtocol):
    """ç­–ç•¥åŒ…è£…å™¨"""

    def __init__(self, inner: BackendProtocol,
                 deny_prefixes: list[str] | None = None,
                 max_file_size: int | None = None):
        self.inner = inner
        self.deny_prefixes = [
            p if p.endswith("/") else p + "/"
            for p in (deny_prefixes or [])
        ]
        self.max_file_size = max_file_size

    def write(self, file_path: str, content: str) -> WriteResult:
        """å†™å…¥ç­–ç•¥æ£€æŸ¥"""
        # 1. è·¯å¾„æ£€æŸ¥
        if any(file_path.startswith(p) for p in self.deny_prefixes):
            return WriteResult(error=f"æ‹’ç»è®¿é—®: {file_path}")

        # 2. å¤§å°æ£€æŸ¥
        if self.max_file_size and len(content) > self.max_file_size:
            return WriteResult(
                error=f"æ–‡ä»¶è¿‡å¤§: {len(content)} å­—èŠ‚ "
                      f"(æœ€å¤§ {self.max_file_size})"
            )

        # 3. æ‰§è¡Œå®é™…å†™å…¥
        return self.inner.write(file_path, content)

    # å§”æ‰˜å…¶ä»–æ–¹æ³•åˆ°å†…éƒ¨åç«¯
    def ls_info(self, path: str):
        return self.inner.ls_info(path)

    def read(self, file_path: str, offset: int = 0, limit: int | None = None):
        return self.inner.read(file_path, offset, limit)

    # ... å…¶ä»–æ–¹æ³•ç±»ä¼¼


# ä½¿ç”¨åŒ…è£…å™¨
base_backend = FilesystemBackend(root_dir="/workspace", virtual_mode=True)

protected_backend = PolicyWrapper(
    inner=base_backend,
    deny_prefixes=["/config/", "/secrets/"],
    max_file_size=10 * 1024 * 1024  # 10MB é™åˆ¶
)

agent = create_deep_agent(
    model="gpt-4o",
    backend=protected_backend
)

# ä¼˜åŠ¿ï¼š
# - ä¿æŒåç«¯è§£è€¦
# - ä¾¿äºæµ‹è¯•å’Œç»„åˆ
# - å¯ä»¥åµŒå¥—å¤šä¸ªåŒ…è£…å™¨ï¼ˆé“¾å¼ç­–ç•¥ï¼‰</code></pre>
                    </div>
                </section>

                <!-- æœ€ä½³å®è·µ -->
                <section class="content-section">
                    <h2 class="section-title">âœ¨ æœ€ä½³å®è·µ</h2>

                    <h3 class="subsection-title">1. åç«¯é€‰æ‹©ç­–ç•¥</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>åœºæ™¯</th>
                                <th>æ¨èåç«¯</th>
                                <th>åŸå› </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>å¿«é€ŸåŸå‹å¼€å‘</td>
                                <td>StateBackendï¼ˆé»˜è®¤ï¼‰</td>
                                <td>æ— éœ€é…ç½®ï¼Œå¼€ç®±å³ç”¨</td>
                            </tr>
                            <tr>
                                <td>æœ¬åœ°å¼€å‘è°ƒè¯•</td>
                                <td>FilesystemBackend</td>
                                <td>å¯ä»¥ç›´æ¥æŸ¥çœ‹æ–‡ä»¶å†…å®¹</td>
                            </tr>
                            <tr>
                                <td>ç”Ÿäº§ç¯å¢ƒ</td>
                                <td>CompositeBackend</td>
                                <td>çµæ´»è·¯ç”±ï¼Œæ··åˆå­˜å‚¨</td>
                            </tr>
                            <tr>
                                <td>é•¿æœŸè®°å¿†/çŸ¥è¯†åº“</td>
                                <td>StoreBackend + PostgreSQL</td>
                                <td>è·¨å®ä¾‹å…±äº«ï¼ŒæŒä¹…åŒ–</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 class="subsection-title">2. CompositeBackend é…ç½®æ¨¡å¼</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># âœ… æ¨èé…ç½®
composite = lambda rt: CompositeBackend(
    default=StateBackend(rt),        # é»˜è®¤ä¸´æ—¶å­˜å‚¨
    routes={
        "/tmp/": StateBackend(rt),           # æ˜¾å¼ä¸´æ—¶
        "/knowledge/": StoreBackend(rt),     # çŸ¥è¯†åº“æŒä¹…åŒ–
        "/workspace/": FilesystemBackend(    # å·¥ä½œåŒºç£ç›˜
            root_dir="/data/workspace",
            virtual_mode=True
        ),
    }
)</code></pre>
                    </div>

                    <h3 class="subsection-title">3. å®‰å…¨é…ç½®æ¸…å•</h3>
                    <ul>
                        <li>âœ… <strong>FilesystemBackend</strong> å§‹ç»ˆå¯ç”¨ <code>virtual_mode=True</code></li>
                        <li>âœ… ä½¿ç”¨<strong>ç­–ç•¥åŒ…è£…å™¨</strong>é™åˆ¶è®¿é—®è·¯å¾„</li>
                        <li>âœ… è®¾ç½®<strong>æ–‡ä»¶å¤§å°é™åˆ¶</strong>é˜²æ­¢æ»¥ç”¨</li>
                        <li>âœ… å®šæœŸ<strong>æ¸…ç†ä¸´æ—¶æ–‡ä»¶</strong></li>
                        <li>âœ… ç”Ÿäº§ç¯å¢ƒä½¿ç”¨<strong>åªè¯»æƒé™</strong>æŒ‚è½½æ•æ„Ÿæ•°æ®</li>
                    </ul>

                    <h3 class="subsection-title">4. é”™è¯¯å¤„ç†åŸåˆ™</h3>
                    <div class="info-box tip">
                        <div class="info-box-title">ğŸ’¡ é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</div>
                        <ul>
                            <li><strong>è¿”å›é”™è¯¯å­—ç¬¦ä¸²</strong>ï¼Œä¸æŠ›å‡ºå¼‚å¸¸</li>
                            <li><strong>é”™è¯¯æ¶ˆæ¯ç”¨æˆ·å‹å¥½</strong>ï¼ŒAgent å¯ä»¥ç†è§£</li>
                            <li><strong>åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡</strong>ï¼Œå¸®åŠ© Agent é‡è¯•æˆ–è°ƒæ•´ç­–ç•¥</li>
                        </ul>
                    </div>
                </section>

                <!-- å¸¸è§é—®é¢˜ -->
                <section class="content-section">
                    <h2 class="section-title">â“ å¸¸è§é—®é¢˜</h2>

                    <h3 class="subsection-subtitle">Q1: å¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é€‰æ‹©åç«¯ï¼Ÿ</h3>
                    <p>
                        <strong>æ¨èä½¿ç”¨ CompositeBackend</strong>ï¼š
                    </p>
                    <ul>
                        <li>ä¸´æ—¶æ•°æ® â†’ StateBackendï¼ˆå†…å­˜ï¼Œå¿«é€Ÿï¼‰</li>
                        <li>çŸ¥è¯†åº“ â†’ StoreBackend + PostgreSQLï¼ˆæŒä¹…åŒ–ï¼‰</li>
                        <li>å·¥ä½œåŒºæ–‡ä»¶ â†’ FilesystemBackendï¼ˆç£ç›˜ï¼Œå®‰å…¨ï¼‰</li>
                    </ul>

                    <h3 class="subsection-subtitle">Q2: StateBackend çš„æ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ</h3>
                    <p>
                        <strong>å¯¹è¯ç»“æŸåä¼šä¸¢å¤±</strong>ã€‚ä½†å¦‚æœä½¿ç”¨ LangGraph checkpointerï¼Œ
                        StateBackend çš„æ•°æ®ä¼šéšå¯¹è¯çŠ¶æ€ä¸€èµ·æŒä¹…åŒ–ã€‚
                    </p>

                    <h3 class="subsection-subtitle">Q3: å¦‚ä½•å®ç°è·¨ Agent å…±äº«æ•°æ®ï¼Ÿ</h3>
                    <p>
                        ä½¿ç”¨ <strong>StoreBackend</strong>ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># åˆ›å»ºå…±äº« Store
shared_store = PostgresStore(connection_string="...")

# Agent 1
agent1 = create_deep_agent(
    backend=lambda rt: StoreBackend(rt),
    store=shared_store
)

# Agent 2ï¼ˆå…±äº«åŒä¸€ä¸ª Storeï¼‰
agent2 = create_deep_agent(
    backend=lambda rt: StoreBackend(rt),
    store=shared_store
)

# Agent 1 å†™å…¥çš„æ•°æ®ï¼ŒAgent 2 å¯ä»¥è¯»å–</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q4: FilesystemBackend çš„ virtual_mode æœ‰æ€§èƒ½å½±å“å—ï¼Ÿ</h3>
                    <p>
                        <strong>å‡ ä¹æ— å½±å“</strong>ã€‚virtual_mode åªæ˜¯è·¯å¾„è§„èŒƒåŒ–å’ŒéªŒè¯ï¼Œ
                        ç›¸æ¯”ç£ç›˜ I/Oï¼Œå¼€é”€å¯ä»¥å¿½ç•¥ã€‚<strong>å¼ºçƒˆå»ºè®®å§‹ç»ˆå¯ç”¨</strong>ã€‚
                    </p>

                    <h3 class="subsection-subtitle">Q5: å¯ä»¥åŠ¨æ€åˆ‡æ¢åç«¯å—ï¼Ÿ</h3>
                    <p>
                        <strong>ä¸èƒ½</strong>ã€‚åç«¯åœ¨ Agent åˆ›å»ºæ—¶å›ºå®šã€‚
                        å¦‚éœ€åˆ‡æ¢ï¼Œåº”åˆ›å»ºæ–°çš„ Agent å®ä¾‹ã€‚
                    </p>
                </section>

                <!-- å‚è€ƒèµ„æº -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“– å‚è€ƒèµ„æº</h2>
                    <ul>
                        <li>
                            <a href="https://docs.langchain.com/oss/python/deepagents/backends" target="_blank">
                                DeepAgents Backends å®˜æ–¹æ–‡æ¡£
                            </a>
                        </li>
                        <li>
                            <a href="24-deepagents-harness.html">
                                Harness ç³»ç»Ÿ - æ–‡ä»¶å·¥å…·è¯¦è§£
                            </a>
                        </li>
                        <li>
                            <a href="22-deepagents-quickstart.html">
                                DeepAgents å¿«é€Ÿå¼€å§‹
                            </a>
                        </li>
                        <li>
                            <a href="11-checkpointer.html">
                                æŒä¹…åŒ–ç³»ç»Ÿ - LangGraph Store
                            </a>
                        </li>
                    </ul>
                </section>

                <!-- é¡µé¢å¯¼èˆª -->
                <nav class="page-navigation">
                    <a href="24-deepagents-harness.html" class="nav-button prev">
                        â† ä¸Šä¸€é¡µï¼šHarness ç³»ç»Ÿ
                    </a>
                    <a href="26-deepagents-subagents.html" class="nav-button next">
                        ä¸‹ä¸€é¡µï¼šå­ä»£ç† â†’
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" aria-label="è¿”å›é¡¶éƒ¨">â†‘</button>

    <!-- JavaScript -->
    <script src="assets/js/mermaid-init.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</body>
</html>
