<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Multi-Agent æŠ€èƒ½ç³»ç»Ÿ - å¯å…±äº«çš„èƒ½åŠ›å’Œå·¥å…·é›†">
    <title>Multi-Agent æŠ€èƒ½ç³»ç»Ÿ | LangChain 1.0 Python çŸ¥è¯†æ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <button class="mobile-menu-button" aria-label="æ‰“å¼€èœå•">â˜°</button>

    <div class="container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">ğŸ¦œ LangChain 1.0</h1>
                <p class="sidebar-subtitle">Python å®Œæ•´å­¦ä¹ æŒ‡å—</p>
            </div>

            <ul class="nav-menu">
                <li class="nav-section">
                    <div class="nav-section-title">å¼€å§‹</div>
                    <ul>
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <span class="nav-icon">ğŸ </span>
                                ä¸»é¡µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">åŸºç¡€ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="01-introduction.html" class="nav-link">
                                <span class="nav-icon">ğŸ“–</span>
                                LangChain ç®€ä»‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="02-architecture.html" class="nav-link">
                                <span class="nav-icon">ğŸ—ï¸</span>
                                æ ¸å¿ƒæ¶æ„
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="03-models.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤–</span>
                                æ¨¡å‹æ¥å£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="04-messages.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¬</span>
                                æ¶ˆæ¯ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="05-tools.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                å·¥å…·ç³»ç»Ÿ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">è¿›é˜¶ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="06-agents.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                Agent åŸºç¡€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="07-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="08-rag.html" class="nav-link">
                                <span class="nav-icon">ğŸ”</span>
                                RAG è¯¦è§£
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="09-lcel.html" class="nav-link">
                                <span class="nav-icon">ğŸ”—</span>
                                LCEL è¡¨è¾¾å¼
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">é«˜çº§åº”ç”¨</div>
                    <ul>
                        <li class="nav-item">
                            <a href="10-runtime.html" class="nav-link">
                                <span class="nav-icon">ğŸ”Œ</span>
                                Runtime ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="11-checkpointer.html" class="nav-link">
                                <span class="nav-icon">ğŸ’¾</span>
                                æŒä¹…åŒ–ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="12-streaming.html" class="nav-link">
                                <span class="nav-icon">ğŸŒŠ</span>
                                æµå¼è¾“å‡º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="13-human-in-loop.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="14-long-term-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ—„ï¸</span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="15-langgraph.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                LangGraph
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">å®æˆ˜ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="16-customer-service.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å®¢æœæœºå™¨äºº
                                <span class="nav-badge">é‡ç‚¹</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="17-best-practices.html" class="nav-link">
                                <span class="nav-icon">âœ¨</span>
                                æœ€ä½³å®è·µ
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">å‚è€ƒç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="18-api-reference.html" class="nav-link">
                                <span class="nav-icon">ğŸ“š</span>
                                API é€ŸæŸ¥è¡¨
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="19-troubleshooting.html" class="nav-link">
                                <span class="nav-icon">ğŸ›</span>
                                æ•…éšœæ’é™¤
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="20-migration.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                è¿ç§»æŒ‡å—
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">æ‰©å±•ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="21-structured-output.html" class="nav-link">
                                <span class="nav-icon">ğŸ“Š</span>
                                ç»“æ„åŒ–è¾“å‡º
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">DeepAgents ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="22-deepagents-quickstart.html" class="nav-link">
                                <span class="nav-icon">ğŸš€</span>
                                å¿«é€Ÿå¼€å§‹
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="23-deepagents-customization.html" class="nav-link">
                                <span class="nav-icon">ğŸ¨</span>
                                å®šåˆ¶åŒ–
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="24-deepagents-harness.html" class="nav-link">
                                <span class="nav-icon">ğŸ›ï¸</span>
                                Harness ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="25-deepagents-backends.html" class="nav-link">
                                <span class="nav-icon">ğŸ”§</span>
                                åç«¯é…ç½®
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="26-deepagents-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="27-deepagents-hitl.html" class="nav-link">
                                <span class="nav-icon">ğŸ¤</span>
                                äººå·¥ä»‹å…¥
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="28-deepagents-memory.html" class="nav-link">
                                <span class="nav-icon">ğŸ§ </span>
                                é•¿æœŸè®°å¿†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="29-deepagents-middleware.html" class="nav-link">
                                <span class="nav-icon">âš™ï¸</span>
                                ä¸­é—´ä»¶
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-section">
                    <div class="nav-section-title">Multi-Agent ç¯‡</div>
                    <ul>
                        <li class="nav-item">
                            <a href="30-multi-agent-index.html" class="nav-link">
                                <span class="nav-icon">ğŸŒ</span>
                                æ¦‚è¿°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="31-multi-agent-subagents.html" class="nav-link">
                                <span class="nav-icon">ğŸ‘¥</span>
                                å­ä»£ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="32-multi-agent-handoffs.html" class="nav-link">
                                <span class="nav-icon">ğŸ”„</span>
                                äº¤æ¥æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a href="33-multi-agent-skills.html" class="nav-link">
                                <span class="nav-icon">ğŸ¯</span>
                                æŠ€èƒ½ç³»ç»Ÿ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="34-multi-agent-router.html" class="nav-link">
                                <span class="nav-icon">ğŸ§­</span>
                                è·¯ç”±æœºåˆ¶
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="35-multi-agent-workflow.html" class="nav-link">
                                <span class="nav-icon">ğŸ”€</span>
                                è‡ªå®šä¹‰å·¥ä½œæµ
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- é¢åŒ…å±‘å¯¼èˆª -->
                <nav class="breadcrumb">
                    <span class="breadcrumb-item">
                        <a href="index.html" class="breadcrumb-link">ä¸»é¡µ</a>
                    </span>
                    <span class="breadcrumb-item">
                        Multi-Agent ç¯‡
                    </span>
                    <span class="breadcrumb-item">
                        æŠ€èƒ½ç³»ç»Ÿ
                    </span>
                </nav>

                <!-- é¡µé¢æ ‡é¢˜ -->
                <header class="page-header">
                    <h1 class="page-title">ğŸ¯ Multi-Agent æŠ€èƒ½ç³»ç»Ÿ</h1>
                    <p class="page-subtitle">
                        å®šä¹‰å¯åœ¨å¤šä¸ªä»£ç†ä¹‹é—´å…±äº«çš„æŠ€èƒ½å’Œå·¥å…·é›†ï¼Œå®ç°èƒ½åŠ›å¤ç”¨ã€
                        ç»Ÿä¸€ç®¡ç†å’Œçµæ´»ç»„åˆï¼Œæ„å»ºæ¨¡å—åŒ–çš„ Agent ç”Ÿæ€ç³»ç»Ÿã€‚
                    </p>
                </header>

                <!-- ä»€ä¹ˆæ˜¯ Skills -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“š ä»€ä¹ˆæ˜¯ Skillsï¼Ÿ</h2>
                    <p>
                        <strong>Skillsï¼ˆæŠ€èƒ½ï¼‰</strong>æ˜¯ Multi-Agent ç³»ç»Ÿä¸­<strong>å¯å…±äº«çš„èƒ½åŠ›å•å…ƒ</strong>ã€‚
                        é€šè¿‡å°†å·¥å…·å®šä¹‰ä¸ºç‹¬ç«‹çš„æŠ€èƒ½ï¼Œå¤šä¸ªä»£ç†å¯ä»¥å¤ç”¨ç›¸åŒçš„èƒ½åŠ›ï¼Œ
                        ç¡®ä¿è¡Œä¸ºä¸€è‡´æ€§å¹¶ç®€åŒ–ç»´æŠ¤ã€‚
                    </p>

                    <div class="info-box note">
                        <div class="info-box-title">ğŸ’¡ æ ¸å¿ƒç‰¹æ€§</div>
                        <table style="margin-top: 0.5rem;">
                            <thead>
                                <tr>
                                    <th>ç‰¹æ€§</th>
                                    <th>è¯´æ˜</th>
                                    <th>ä¼˜åŠ¿</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>å¯å¤ç”¨æ€§</strong></td>
                                    <td>ä¸€æ¬¡å®šä¹‰ï¼Œå¤šå¤„ä½¿ç”¨</td>
                                    <td>å‡å°‘é‡å¤ä»£ç </td>
                                </tr>
                                <tr>
                                    <td><strong>ä¸€è‡´æ€§</strong></td>
                                    <td>æ‰€æœ‰ä»£ç†ä½¿ç”¨ç›¸åŒçš„å·¥å…·å®ç°</td>
                                    <td>ä¿è¯è¡Œä¸ºç»Ÿä¸€</td>
                                </tr>
                                <tr>
                                    <td><strong>å¯ç»„åˆæ€§</strong></td>
                                    <td>ä¸ºä¸åŒä»£ç†é…ç½®ä¸åŒçš„æŠ€èƒ½ç»„åˆ</td>
                                    <td>çµæ´»å®šåˆ¶èƒ½åŠ›</td>
                                </tr>
                                <tr>
                                    <td><strong>æ˜“ç»´æŠ¤æ€§</strong></td>
                                    <td>é›†ä¸­ç®¡ç†ï¼Œç»Ÿä¸€æ›´æ–°</td>
                                    <td>é™ä½ç»´æŠ¤æˆæœ¬</td>
                                </tr>
                                <tr>
                                    <td><strong>å¯æ‰©å±•æ€§</strong></td>
                                    <td>è½»æ¾æ·»åŠ æ–°æŠ€èƒ½</td>
                                    <td>å¿«é€Ÿæ‰©å±•èƒ½åŠ›</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph TB
    subgraph Skills["æŠ€èƒ½åº“ (Skill Registry)"]
        S1["ğŸ” æœç´¢æŠ€èƒ½<br/>search_internet"]
        S2["ğŸ“Š æ•°æ®å¤„ç†<br/>analyze_data"]
        S3["ğŸ“§ é€šä¿¡æŠ€èƒ½<br/>send_email"]
        S4["ğŸ’¾ å­˜å‚¨æŠ€èƒ½<br/>save_to_db"]
        S5["ğŸ“ æ ¼å¼åŒ–<br/>format_report"]
    end

    subgraph Agents["å¤šä¸ªä»£ç†"]
        A1["ç ”ç©¶ä»£ç†<br/>ä½¿ç”¨: æœç´¢+æ•°æ®å¤„ç†"]
        A2["æŠ¥å‘Šä»£ç†<br/>ä½¿ç”¨: æ•°æ®å¤„ç†+æ ¼å¼åŒ–"]
        A3["é€šçŸ¥ä»£ç†<br/>ä½¿ç”¨: é€šä¿¡+å­˜å‚¨"]
    end

    S1 -->|"å…±äº«"| A1
    S2 -->|"å…±äº«"| A1
    S2 -->|"å…±äº«"| A2
    S5 -->|"å…±äº«"| A2
    S3 -->|"å…±äº«"| A3
    S4 -->|"å…±äº«"| A3

    style Skills fill:#3b82f6,color:#fff
    style S1 fill:#10b981,color:#fff
    style S2 fill:#f59e0b,color:#fff
    style S3 fill:#8b5cf6,color:#fff
    style S4 fill:#ef4444,color:#fff
    style S5 fill:#06b6d4,color:#fff
    style A1 fill:#10b981,color:#fff
    style A2 fill:#f59e0b,color:#fff
    style A3 fill:#8b5cf6,color:#fff
                        </div>
                    </div>

                    <h3 class="subsection-title">Skills vs ä¼ ç»Ÿå·¥å…·</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>ç»´åº¦</th>
                                <th>ä¼ ç»Ÿå·¥å…·</th>
                                <th>Skills æŠ€èƒ½ç³»ç»Ÿ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>å®šä¹‰æ–¹å¼</strong></td>
                                <td>æ¯ä¸ª Agent ç‹¬ç«‹å®šä¹‰</td>
                                <td>é›†ä¸­å®šä¹‰ï¼Œå¤šå¤„å¼•ç”¨</td>
                            </tr>
                            <tr>
                                <td><strong>å¤ç”¨æ€§</strong></td>
                                <td>éš¾ä»¥è·¨ Agent å¤ç”¨</td>
                                <td>å¤©ç„¶æ”¯æŒå…±äº«</td>
                            </tr>
                            <tr>
                                <td><strong>ä¸€è‡´æ€§</strong></td>
                                <td>å¯èƒ½å­˜åœ¨ä¸ä¸€è‡´</td>
                                <td>ä¿è¯è¡Œä¸ºä¸€è‡´</td>
                            </tr>
                            <tr>
                                <td><strong>ç»´æŠ¤</strong></td>
                                <td>éœ€è¦å¤šå¤„ä¿®æ”¹</td>
                                <td>é›†ä¸­ç»´æŠ¤</td>
                            </tr>
                            <tr>
                                <td><strong>ç»„åˆ</strong></td>
                                <td>é™æ€é…ç½®</td>
                                <td>çµæ´»ç»„åˆ</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- æŠ€èƒ½å®šä¹‰ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”§ æŠ€èƒ½å®šä¹‰</h2>
                    <p>
                        Skills æœ¬è´¨ä¸Šæ˜¯ LangChain çš„ <code>@tool</code> è£…é¥°å™¨å·¥å…·ï¼Œ
                        ä½†é€šè¿‡<strong>é›†ä¸­ç®¡ç†å’Œåˆ†ç±»ç»„ç»‡</strong>ï¼Œå½¢æˆå¯å¤ç”¨çš„æŠ€èƒ½åº“ã€‚
                    </p>

                    <h3 class="subsection-title">åŸºç¡€æŠ€èƒ½å®šä¹‰</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
åŸºç¡€æŠ€èƒ½å®šä¹‰ - ä½¿ç”¨ @tool è£…é¥°å™¨
"""
from langchain.tools import tool
from typing import List, Dict

# ========== æœç´¢ç±»æŠ€èƒ½ ==========

@tool
def search_internet(query: str, max_results: int = 5) -> List[Dict]:
    """æœç´¢äº’è”ç½‘ä¿¡æ¯

    Args:
        query: æœç´¢å…³é”®è¯
        max_results: æœ€å¤§ç»“æœæ•°é‡

    Returns:
        æœç´¢ç»“æœåˆ—è¡¨
    """
    # å®é™…ä¼šè°ƒç”¨ Tavily æˆ–å…¶ä»–æœç´¢ API
    return [
        {"title": "ç»“æœ1", "url": "https://...", "snippet": "æ‘˜è¦..."},
        {"title": "ç»“æœ2", "url": "https://...", "snippet": "æ‘˜è¦..."},
    ]

@tool
def search_database(query: str, table: str) -> List[Dict]:
    """æœç´¢æ•°æ®åº“

    Args:
        query: SQL æŸ¥è¯¢æˆ–è‡ªç„¶è¯­è¨€æŸ¥è¯¢
        table: ç›®æ ‡è¡¨å

    Returns:
        æŸ¥è¯¢ç»“æœ
    """
    # å®é™…ä¼šè¿æ¥æ•°æ®åº“æ‰§è¡ŒæŸ¥è¯¢
    return [{"id": 1, "name": "æ•°æ®1"}, {"id": 2, "name": "æ•°æ®2"}]

# ========== æ•°æ®å¤„ç†ç±»æŠ€èƒ½ ==========

@tool
def analyze_data(data: str, analysis_type: str = "summary") -> Dict:
    """åˆ†ææ•°æ®å¹¶ç”Ÿæˆæ´å¯Ÿ

    Args:
        data: å¾…åˆ†æçš„æ•°æ®
        analysis_type: åˆ†æç±»å‹ï¼ˆsummary, trend, anomalyï¼‰

    Returns:
        åˆ†æç»“æœ
    """
    return {
        "insights": ["æ´å¯Ÿ1", "æ´å¯Ÿ2"],
        "summary": "æ•°æ®æ‘˜è¦...",
        "score": 0.85
    }

@tool
def transform_data(data: str, format: str) -> str:
    """è½¬æ¢æ•°æ®æ ¼å¼

    Args:
        data: åŸå§‹æ•°æ®
        format: ç›®æ ‡æ ¼å¼ï¼ˆjson, csv, xmlï¼‰

    Returns:
        è½¬æ¢åçš„æ•°æ®
    """
    # å®é™…ä¼šæ‰§è¡Œæ ¼å¼è½¬æ¢
    return f"è½¬æ¢ä¸º {format} æ ¼å¼çš„æ•°æ®"

# ========== é€šä¿¡ç±»æŠ€èƒ½ ==========

@tool
def send_email(to: str, subject: str, body: str) -> bool:
    """å‘é€é‚®ä»¶

    Args:
        to: æ”¶ä»¶äºº
        subject: é‚®ä»¶ä¸»é¢˜
        body: é‚®ä»¶æ­£æ–‡

    Returns:
        æ˜¯å¦å‘é€æˆåŠŸ
    """
    # å®é™…ä¼šè°ƒç”¨é‚®ä»¶æœåŠ¡
    print(f"å‘é€é‚®ä»¶ç»™ {to}: {subject}")
    return True

@tool
def send_notification(user_id: str, message: str, priority: str = "normal") -> bool:
    """å‘é€é€šçŸ¥

    Args:
        user_id: ç”¨æˆ·ID
        message: é€šçŸ¥å†…å®¹
        priority: ä¼˜å…ˆçº§ï¼ˆlow, normal, highï¼‰

    Returns:
        æ˜¯å¦å‘é€æˆåŠŸ
    """
    print(f"é€šçŸ¥ç”¨æˆ· {user_id} ({priority}): {message}")
    return True

# ========== å­˜å‚¨ç±»æŠ€èƒ½ ==========

@tool
def save_to_database(data: Dict, table: str) -> bool:
    """ä¿å­˜æ•°æ®åˆ°æ•°æ®åº“

    Args:
        data: è¦ä¿å­˜çš„æ•°æ®
        table: ç›®æ ‡è¡¨å

    Returns:
        æ˜¯å¦ä¿å­˜æˆåŠŸ
    """
    print(f"ä¿å­˜åˆ°è¡¨ {table}: {data}")
    return True

@tool
def save_file(content: str, filepath: str) -> bool:
    """ä¿å­˜æ–‡ä»¶

    Args:
        content: æ–‡ä»¶å†…å®¹
        filepath: æ–‡ä»¶è·¯å¾„

    Returns:
        æ˜¯å¦ä¿å­˜æˆåŠŸ
    """
    with open(filepath, 'w') as f:
        f.write(content)
    return True

# ========== æ ¼å¼åŒ–ç±»æŠ€èƒ½ ==========

@tool
def format_report(data: Dict, template: str = "markdown") -> str:
    """æ ¼å¼åŒ–æŠ¥å‘Š

    Args:
        data: æŠ¥å‘Šæ•°æ®
        template: æŠ¥å‘Šæ¨¡æ¿ï¼ˆmarkdown, html, pdfï¼‰

    Returns:
        æ ¼å¼åŒ–åçš„æŠ¥å‘Š
    """
    # å®é™…ä¼šä½¿ç”¨æ¨¡æ¿å¼•æ“
    return f"""
# æŠ¥å‘Š
## æ•°æ®æ‘˜è¦
{data.get('summary', 'N/A')}

## è¯¦ç»†å†…å®¹
{data.get('details', 'N/A')}
"""

# ä¼˜åŠ¿ï¼š
# - æ¸…æ™°çš„æŠ€èƒ½åˆ†ç±»
# - å®Œæ•´çš„ç±»å‹æ³¨è§£
# - è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
# - æ˜“äºç†è§£å’Œä½¿ç”¨</code></pre>
                    </div>

                    <h3 class="subsection-title">æŠ€èƒ½ç»„ç»‡å’Œç®¡ç†</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
æŠ€èƒ½ç»„ç»‡å’Œç®¡ç† - æŠ€èƒ½åº“æ¨¡å¼
"""
from typing import List
from langchain.tools import BaseTool

class SkillRegistry:
    """æŠ€èƒ½æ³¨å†Œè¡¨ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰æŠ€èƒ½"""

    def __init__(self):
        self._skills = {}
        self._categories = {
            "search": [],
            "data": [],
            "communication": [],
            "storage": [],
            "formatting": []
        }

    def register(self, skill: BaseTool, category: str):
        """æ³¨å†ŒæŠ€èƒ½"""
        self._skills[skill.name] = skill
        if category in self._categories:
            self._categories[category].append(skill)

    def get_skill(self, name: str) -> BaseTool:
        """è·å–å•ä¸ªæŠ€èƒ½"""
        return self._skills.get(name)

    def get_category(self, category: str) -> List[BaseTool]:
        """è·å–æŸç±»åˆ«çš„æ‰€æœ‰æŠ€èƒ½"""
        return self._categories.get(category, [])

    def get_skills(self, names: List[str]) -> List[BaseTool]:
        """æ‰¹é‡è·å–æŠ€èƒ½"""
        return [self._skills[name] for name in names if name in self._skills]

    def list_all(self) -> List[str]:
        """åˆ—å‡ºæ‰€æœ‰æŠ€èƒ½åç§°"""
        return list(self._skills.keys())

# åˆ›å»ºå…¨å±€æŠ€èƒ½æ³¨å†Œè¡¨
skill_registry = SkillRegistry()

# æ³¨å†ŒæŠ€èƒ½
skill_registry.register(search_internet, "search")
skill_registry.register(search_database, "search")
skill_registry.register(analyze_data, "data")
skill_registry.register(transform_data, "data")
skill_registry.register(send_email, "communication")
skill_registry.register(send_notification, "communication")
skill_registry.register(save_to_database, "storage")
skill_registry.register(save_file, "storage")
skill_registry.register(format_report, "formatting")

# ä½¿ç”¨ç¤ºä¾‹ï¼šä¸ºä»£ç†é…ç½®æŠ€èƒ½
research_skills = skill_registry.get_category("search") + \
                  skill_registry.get_category("data")

communication_skills = skill_registry.get_category("communication") + \
                       skill_registry.get_category("storage")

# ä¼˜åŠ¿ï¼š
# - é›†ä¸­ç®¡ç†ï¼Œæ˜“äºç»´æŠ¤
# - åˆ†ç±»ç»„ç»‡ï¼Œæ¸…æ™°ç»“æ„
# - çµæ´»ç»„åˆï¼ŒæŒ‰éœ€è·å–
# - å¯æ‰©å±•ï¼Œæ˜“äºæ·»åŠ æ–°æŠ€èƒ½</code></pre>
                    </div>
                </section>

                <!-- æŠ€èƒ½å…±äº«æ¨¡å¼ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ¤ æŠ€èƒ½å…±äº«æ¨¡å¼</h2>
                    <p>
                        åœ¨ Multi-Agent ç³»ç»Ÿä¸­ï¼ŒæŠ€èƒ½å…±äº«æ˜¯å®ç°<strong>ä»£ç†åä½œ</strong>çš„å…³é”®æœºåˆ¶ã€‚
                    </p>

                    <div class="mermaid-wrapper">
                        <div class="mermaid">
graph TB
    subgraph Registry["æŠ€èƒ½æ³¨å†Œè¡¨"]
        Core["æ ¸å¿ƒæŠ€èƒ½é›†<br/>æ‰€æœ‰ä»£ç†å…±äº«"]
        Specialized["ä¸“ç”¨æŠ€èƒ½é›†<br/>ç‰¹å®šä»£ç†ä½¿ç”¨"]
    end

    subgraph Pattern1["æ¨¡å¼1ï¼šå®Œå…¨å…±äº«"]
        P1A["Agent A"] --> P1Skills["å…±äº«æŠ€èƒ½åº“"]
        P1B["Agent B"] --> P1Skills
        P1C["Agent C"] --> P1Skills
    end

    subgraph Pattern2["æ¨¡å¼2ï¼šåˆ†å±‚å…±äº«"]
        P2Base["åŸºç¡€æŠ€èƒ½<br/>æ‰€æœ‰ä»£ç†"]
        P2Adv["é«˜çº§æŠ€èƒ½<br/>éƒ¨åˆ†ä»£ç†"]
        P2A["Agent A"] --> P2Base
        P2A --> P2Adv
        P2B["Agent B"] --> P2Base
    end

    subgraph Pattern3["æ¨¡å¼3ï¼šæŠ€èƒ½ç»„åˆ"]
        P3S1["æŠ€èƒ½ç»„ 1<br/>æœç´¢+åˆ†æ"]
        P3S2["æŠ€èƒ½ç»„ 2<br/>é€šä¿¡+å­˜å‚¨"]
        P3A["Agent A"] --> P3S1
        P3B["Agent B"] --> P3S2
    end

    Registry --> Pattern1
    Registry --> Pattern2
    Registry --> Pattern3

    style Registry fill:#3b82f6,color:#fff
    style Core fill:#10b981,color:#fff
    style Specialized fill:#f59e0b,color:#fff
                        </div>
                    </div>

                    <h3 class="subsection-title">æ¨¡å¼ 1ï¼šå®Œå…¨å…±äº«</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty basic">ğŸŸ¢ åŸºç¡€</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
æ¨¡å¼ 1ï¼šå®Œå…¨å…±äº« - æ‰€æœ‰ä»£ç†ä½¿ç”¨ç›¸åŒæŠ€èƒ½
"""
from langgraph.graph import StateGraph, MessagesState
from langchain_openai import ChatOpenAI

# å®šä¹‰å…±äº«æŠ€èƒ½é›†
shared_skills = [
    search_internet,
    analyze_data,
    send_notification,
    format_report
]

# ä»£ç† 1ï¼šç ”ç©¶ä¸“å‘˜
def research_agent(state: MessagesState):
    """ç ”ç©¶ä¸“å‘˜ï¼šä½¿ç”¨å…±äº«æŠ€èƒ½"""
    llm = ChatOpenAI(model="gpt-4o")
    llm_with_tools = llm.bind_tools(shared_skills)  # ä½¿ç”¨å…±äº«æŠ€èƒ½
    response = llm_with_tools.invoke(state["messages"])
    return {"messages": [response]}

# ä»£ç† 2ï¼šåˆ†æä¸“å‘˜
def analysis_agent(state: MessagesState):
    """åˆ†æä¸“å‘˜ï¼šä½¿ç”¨ç›¸åŒçš„å…±äº«æŠ€èƒ½"""
    llm = ChatOpenAI(model="claude-sonnet-4-5")
    llm_with_tools = llm.bind_tools(shared_skills)  # ä½¿ç”¨ç›¸åŒæŠ€èƒ½
    response = llm_with_tools.invoke(state["messages"])
    return {"messages": [response]}

# ä»£ç† 3ï¼šæŠ¥å‘Šä¸“å‘˜
def report_agent(state: MessagesState):
    """æŠ¥å‘Šä¸“å‘˜ï¼šä½¿ç”¨ç›¸åŒçš„å…±äº«æŠ€èƒ½"""
    llm = ChatOpenAI(model="gpt-4o")
    llm_with_tools = llm.bind_tools(shared_skills)  # ä½¿ç”¨ç›¸åŒæŠ€èƒ½
    response = llm_with_tools.invoke(state["messages"])
    return {"messages": [response]}

# æ„å»ºå·¥ä½œæµ
graph = StateGraph(MessagesState)
graph.add_node("research", research_agent)
graph.add_node("analysis", analysis_agent)
graph.add_node("report", report_agent)

# ä¼˜åŠ¿ï¼š
# - æ‰€æœ‰ä»£ç†èƒ½åŠ›ä¸€è‡´
# - ä¾¿äºåä½œå’Œäº¤æ¥
# - ç»´æŠ¤ç®€å•ï¼ˆæ›´æ–°ä¸€å¤„å³å¯ï¼‰
# - é€‚åˆï¼šèƒ½åŠ›éœ€æ±‚ç›¸ä¼¼çš„ä»£ç†å›¢é˜Ÿ</code></pre>
                    </div>

                    <h3 class="subsection-title">æ¨¡å¼ 2ï¼šåˆ†å±‚å…±äº«</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
æ¨¡å¼ 2ï¼šåˆ†å±‚å…±äº« - åŸºç¡€æŠ€èƒ½ + ä¸“ç”¨æŠ€èƒ½
"""
# åŸºç¡€æŠ€èƒ½ï¼šæ‰€æœ‰ä»£ç†éƒ½æœ‰
base_skills = [
    search_internet,
    send_notification
]

# é«˜çº§æŠ€èƒ½ï¼šä»…éƒ¨åˆ†ä»£ç†ä½¿ç”¨
advanced_data_skills = [
    analyze_data,
    transform_data,
    save_to_database
]

advanced_comm_skills = [
    send_email,
    format_report
]

# L1 ä»£ç†ï¼šä»…åŸºç¡€æŠ€èƒ½
def l1_agent(state: MessagesState):
    """L1 ä»£ç†ï¼šåŸºç¡€èƒ½åŠ›"""
    llm = ChatOpenAI(model="gpt-4o-mini")
    llm_with_tools = llm.bind_tools(base_skills)  # ä»…åŸºç¡€æŠ€èƒ½
    return {"messages": [llm_with_tools.invoke(state["messages"])]}

# L2 ä»£ç†ï¼šåŸºç¡€ + æ•°æ®å¤„ç†
def l2_data_agent(state: MessagesState):
    """L2 æ•°æ®ä»£ç†ï¼šåŸºç¡€ + é«˜çº§æ•°æ®æŠ€èƒ½"""
    llm = ChatOpenAI(model="gpt-4o")
    combined_skills = base_skills + advanced_data_skills
    llm_with_tools = llm.bind_tools(combined_skills)
    return {"messages": [llm_with_tools.invoke(state["messages"])]}

# L2 ä»£ç†ï¼šåŸºç¡€ + é€šä¿¡
def l2_comm_agent(state: MessagesState):
    """L2 é€šä¿¡ä»£ç†ï¼šåŸºç¡€ + é«˜çº§é€šä¿¡æŠ€èƒ½"""
    llm = ChatOpenAI(model="gpt-4o")
    combined_skills = base_skills + advanced_comm_skills
    llm_with_tools = llm.bind_tools(combined_skills)
    return {"messages": [llm_with_tools.invoke(state["messages"])]}

# ä¼˜åŠ¿ï¼š
# - æƒé™åˆ†çº§ï¼ˆåŸºç¡€ vs é«˜çº§ï¼‰
# - ä¸“ä¸šåŒ–åˆ†å·¥ï¼ˆæ•°æ® vs é€šä¿¡ï¼‰
# - æˆæœ¬ä¼˜åŒ–ï¼ˆåŸºç¡€ä»£ç†ç”¨ä¾¿å®œæ¨¡å‹ï¼‰
# - é€‚åˆï¼šæœ‰æ˜ç¡®å±‚çº§å’Œä¸“ä¸šåˆ†å·¥çš„ç³»ç»Ÿ</code></pre>
                    </div>

                    <h3 class="subsection-title">æ¨¡å¼ 3ï¼šæŠ€èƒ½ç»„åˆ</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty intermediate">ğŸŸ¡ ä¸­çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
æ¨¡å¼ 3ï¼šæŠ€èƒ½ç»„åˆ - é¢„å®šä¹‰æŠ€èƒ½ç»„
"""
# å®šä¹‰æŠ€èƒ½ç»„
skill_groups = {
    "researcher": [
        search_internet,
        search_database,
        analyze_data
    ],
    "writer": [
        analyze_data,
        format_report,
        save_file
    ],
    "communicator": [
        send_email,
        send_notification,
        save_to_database
    ],
    "analyst": [
        search_database,
        analyze_data,
        transform_data,
        format_report
    ]
}

def create_agent_with_skills(role: str, model: str = "gpt-4o"):
    """å·¥å‚å‡½æ•°ï¼šæ ¹æ®è§’è‰²åˆ›å»ºä»£ç†"""
    skills = skill_groups.get(role, [])

    def agent(state: MessagesState):
        llm = ChatOpenAI(model=model)
        llm_with_tools = llm.bind_tools(skills)
        return {"messages": [llm_with_tools.invoke(state["messages"])]}

    return agent

# åˆ›å»ºä¸åŒè§’è‰²çš„ä»£ç†
researcher = create_agent_with_skills("researcher", "gpt-4o")
writer = create_agent_with_skills("writer", "claude-sonnet-4-5")
communicator = create_agent_with_skills("communicator", "gpt-4o")
analyst = create_agent_with_skills("analyst", "claude-sonnet-4-5")

# ä¼˜åŠ¿ï¼š
# - è§’è‰²æ¸…æ™°ï¼ˆç ”ç©¶ã€å†™ä½œã€é€šä¿¡ã€åˆ†æï¼‰
# - æŠ€èƒ½ç²¾å‡†åŒ¹é…
# - æ˜“äºæ‰©å±•ï¼ˆæ·»åŠ æ–°è§’è‰²ï¼‰
# - é€‚åˆï¼šæ˜ç¡®è§’è‰²åˆ†å·¥çš„å›¢é˜Ÿ</code></pre>
                    </div>
                </section>

                <!-- å®Œæ•´å®æˆ˜ç¤ºä¾‹ -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ¯ å®Œæ•´å®æˆ˜ç¤ºä¾‹</h2>
                    <p>
                        æ„å»ºä¸€ä¸ª<strong>å†…å®¹åˆ›ä½œå¹³å°</strong>ï¼Œä½¿ç”¨æŠ€èƒ½ç³»ç»Ÿæ”¯æŒå¤šä¸ªä¸“ä¸šåŒ–ä»£ç†ï¼Œ
                        å®ç°ä»ç ”ç©¶åˆ°å‘å¸ƒçš„å®Œæ•´æµç¨‹ã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§ - ç”Ÿäº§çº§ç¤ºä¾‹</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
å®Œæ•´å®æˆ˜ç¤ºä¾‹ - å†…å®¹åˆ›ä½œå¹³å°ï¼ˆæŠ€èƒ½ç³»ç»Ÿï¼‰
"""
import os
from typing import TypedDict, Annotated, List
from langgraph.graph import StateGraph, START, END
from langgraph.graph.message import add_messages
from langchain_openai import ChatOpenAI
from langchain_anthropic import ChatAnthropic
from langchain.tools import tool

# ========== 1. å®šä¹‰æŠ€èƒ½åº“ ==========

# ç ”ç©¶ç±»æŠ€èƒ½
@tool
def web_research(topic: str, depth: str = "normal") -> dict:
    """ç½‘ç»œç ”ç©¶æŠ€èƒ½

    Args:
        topic: ç ”ç©¶ä¸»é¢˜
        depth: æ·±åº¦ï¼ˆquick, normal, deepï¼‰
    """
    # å®é™…ä¼šè°ƒç”¨æœç´¢ API
    return {
        "sources": ["æ¥æº1", "æ¥æº2", "æ¥æº3"],
        "key_points": ["è¦ç‚¹1", "è¦ç‚¹2", "è¦ç‚¹3"],
        "summary": f"å…³äº {topic} çš„ç ”ç©¶æ‘˜è¦..."
    }

@tool
def competitor_analysis(topic: str) -> dict:
    """ç«å“åˆ†ææŠ€èƒ½"""
    return {
        "competitors": ["ç«å“A", "ç«å“B"],
        "gaps": ["å·®å¼‚ç‚¹1", "å·®å¼‚ç‚¹2"],
        "opportunities": ["æœºä¼š1", "æœºä¼š2"]
    }

# åˆ›ä½œç±»æŠ€èƒ½
@tool
def generate_outline(topic: str, target_length: int) -> dict:
    """ç”Ÿæˆå¤§çº²æŠ€èƒ½

    Args:
        topic: ä¸»é¢˜
        target_length: ç›®æ ‡å­—æ•°
    """
    return {
        "title": f"{topic} - å®Œæ•´æŒ‡å—",
        "sections": [
            {"title": "å¼•è¨€", "points": ["èƒŒæ™¯", "ç›®æ ‡"]},
            {"title": "æ­£æ–‡", "points": ["è¦ç‚¹1", "è¦ç‚¹2", "è¦ç‚¹3"]},
            {"title": "ç»“è®º", "points": ["æ€»ç»“", "å±•æœ›"]}
        ]
    }

@tool
def check_grammar(text: str) -> dict:
    """è¯­æ³•æ£€æŸ¥æŠ€èƒ½"""
    return {
        "errors": [],
        "suggestions": ["å»ºè®®1", "å»ºè®®2"],
        "score": 95
    }

# SEO ç±»æŠ€èƒ½
@tool
def analyze_seo(content: str, keywords: List[str]) -> dict:
    """SEO åˆ†ææŠ€èƒ½

    Args:
        content: å†…å®¹
        keywords: ç›®æ ‡å…³é”®è¯åˆ—è¡¨
    """
    return {
        "keyword_density": {"å…³é”®è¯1": 2.5, "å…³é”®è¯2": 1.8},
        "readability_score": 85,
        "recommendations": ["å¢åŠ å†…é“¾", "ä¼˜åŒ–æ ‡é¢˜"]
    }

@tool
def generate_meta_tags(content: str) -> dict:
    """ç”Ÿæˆå…ƒæ ‡ç­¾æŠ€èƒ½"""
    return {
        "title": "SEO ä¼˜åŒ–çš„æ ‡é¢˜",
        "description": "å¸å¼•äººçš„æè¿°ï¼ˆ< 160å­—ï¼‰",
        "keywords": ["å…³é”®è¯1", "å…³é”®è¯2", "å…³é”®è¯3"]
    }

# å‘å¸ƒç±»æŠ€èƒ½
@tool
def publish_to_cms(content: str, metadata: dict) -> bool:
    """å‘å¸ƒåˆ° CMS æŠ€èƒ½

    Args:
        content: æ–‡ç« å†…å®¹
        metadata: å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€æ ‡ç­¾ç­‰ï¼‰
    """
    print(f"å‘å¸ƒæ–‡ç« ï¼š{metadata.get('title')}")
    return True

@tool
def schedule_social_media(post: str, platforms: List[str]) -> dict:
    """ç¤¾äº¤åª’ä½“æ’æœŸæŠ€èƒ½

    Args:
        post: ç¤¾äº¤åª’ä½“æ–‡æ¡ˆ
        platforms: ç›®æ ‡å¹³å°åˆ—è¡¨
    """
    return {
        "scheduled": True,
        "platforms": platforms,
        "publish_time": "2024-01-15 10:00"
    }

# ========== 2. ç»„ç»‡æŠ€èƒ½åº“ ==========

class ContentSkillRegistry:
    """å†…å®¹åˆ›ä½œæŠ€èƒ½æ³¨å†Œè¡¨"""

    RESEARCH_SKILLS = [web_research, competitor_analysis]
    WRITING_SKILLS = [generate_outline, check_grammar]
    SEO_SKILLS = [analyze_seo, generate_meta_tags]
    PUBLISHING_SKILLS = [publish_to_cms, schedule_social_media]

    @classmethod
    def get_researcher_skills(cls):
        """ç ”ç©¶ä¸“å‘˜æŠ€èƒ½"""
        return cls.RESEARCH_SKILLS

    @classmethod
    def get_writer_skills(cls):
        """å†™ä½œä¸“å‘˜æŠ€èƒ½"""
        return cls.RESEARCH_SKILLS + cls.WRITING_SKILLS

    @classmethod
    def get_seo_specialist_skills(cls):
        """SEO ä¸“å‘˜æŠ€èƒ½"""
        return cls.WRITING_SKILLS + cls.SEO_SKILLS

    @classmethod
    def get_publisher_skills(cls):
        """å‘å¸ƒä¸“å‘˜æŠ€èƒ½"""
        return cls.SEO_SKILLS + cls.PUBLISHING_SKILLS

# ========== 3. å®šä¹‰çŠ¶æ€ ==========

class ContentState(TypedDict):
    messages: Annotated[list, add_messages]
    topic: str
    research_data: dict
    outline: dict
    draft_content: str
    seo_optimized: str
    metadata: dict
    published: bool

# ========== 4. åˆ›å»ºä¸“ä¸šåŒ–ä»£ç† ==========

def research_agent(state: ContentState):
    """ç ”ç©¶ä»£ç†ï¼šä½¿ç”¨ç ”ç©¶æŠ€èƒ½"""
    llm = ChatOpenAI(model="gpt-4o")
    skills = ContentSkillRegistry.get_researcher_skills()
    llm_with_tools = llm.bind_tools(skills)

    prompt = f"ç ”ç©¶ä¸»é¢˜ï¼š{state['topic']}\næ‰§è¡Œæ·±åº¦ç ”ç©¶å’Œç«å“åˆ†æ"
    response = llm_with_tools.invoke(prompt)

    return {
        "messages": [response],
        "research_data": {
            "sources": ["æ¥æº..."],
            "key_findings": ["å‘ç°..."]
        }
    }

def writer_agent(state: ContentState):
    """å†™ä½œä»£ç†ï¼šä½¿ç”¨å†™ä½œæŠ€èƒ½"""
    llm = ChatAnthropic(model="claude-sonnet-4-5")
    skills = ContentSkillRegistry.get_writer_skills()
    llm_with_tools = llm.bind_tools(skills)

    research = state["research_data"]
    prompt = f"""åŸºäºç ”ç©¶æ•°æ®åˆ›ä½œæ–‡ç« ï¼š
    ä¸»é¢˜ï¼š{state['topic']}
    ç ”ç©¶å‘ç°ï¼š{research}

    æ­¥éª¤ï¼š
    1. ä½¿ç”¨ generate_outline ç”Ÿæˆå¤§çº²
    2. æ’°å†™å®Œæ•´æ–‡ç« 
    3. ä½¿ç”¨ check_grammar æ£€æŸ¥è¯­æ³•
    """

    response = llm_with_tools.invoke(prompt)

    return {
        "messages": [response],
        "draft_content": "æ–‡ç« è‰ç¨¿å†…å®¹..."
    }

def seo_agent(state: ContentState):
    """SEO ä»£ç†ï¼šä½¿ç”¨ SEO æŠ€èƒ½"""
    llm = ChatOpenAI(model="gpt-4o")
    skills = ContentSkillRegistry.get_seo_specialist_skills()
    llm_with_tools = llm.bind_tools(skills)

    draft = state["draft_content"]
    prompt = f"""ä¼˜åŒ– SEOï¼š
    å†…å®¹ï¼š{draft}

    æ­¥éª¤ï¼š
    1. ä½¿ç”¨ analyze_seo åˆ†æå½“å‰ SEO
    2. ä¼˜åŒ–å†…å®¹å’Œå…³é”®è¯å¯†åº¦
    3. ä½¿ç”¨ generate_meta_tags ç”Ÿæˆå…ƒæ ‡ç­¾
    """

    response = llm_with_tools.invoke(prompt)

    return {
        "messages": [response],
        "seo_optimized": "SEO ä¼˜åŒ–åçš„å†…å®¹...",
        "metadata": {
            "title": "ä¼˜åŒ–çš„æ ‡é¢˜",
            "description": "æè¿°",
            "keywords": ["å…³é”®è¯1", "å…³é”®è¯2"]
        }
    }

def publisher_agent(state: ContentState):
    """å‘å¸ƒä»£ç†ï¼šä½¿ç”¨å‘å¸ƒæŠ€èƒ½"""
    llm = ChatOpenAI(model="gpt-4o")
    skills = ContentSkillRegistry.get_publisher_skills()
    llm_with_tools = llm.bind_tools(skills)

    content = state["seo_optimized"]
    metadata = state["metadata"]

    prompt = f"""å‘å¸ƒå†…å®¹ï¼š
    å†…å®¹ï¼š{content}
    å…ƒæ•°æ®ï¼š{metadata}

    æ­¥éª¤ï¼š
    1. ä½¿ç”¨ publish_to_cms å‘å¸ƒåˆ°ç½‘ç«™
    2. ä½¿ç”¨ schedule_social_media å®‰æ’ç¤¾äº¤åª’ä½“æ¨å¹¿
    """

    response = llm_with_tools.invoke(prompt)

    return {
        "messages": [response],
        "published": True
    }

# ========== 5. æ„å»ºå·¥ä½œæµ ==========

workflow = StateGraph(ContentState)

# æ·»åŠ èŠ‚ç‚¹ï¼ˆæ¯ä¸ªä»£ç†ä½¿ç”¨ä¸åŒçš„æŠ€èƒ½ç»„åˆï¼‰
workflow.add_node("research", research_agent)
workflow.add_node("writer", writer_agent)
workflow.add_node("seo", seo_agent)
workflow.add_node("publisher", publisher_agent)

# å®šä¹‰æµç¨‹
workflow.add_edge(START, "research")
workflow.add_edge("research", "writer")
workflow.add_edge("writer", "seo")
workflow.add_edge("seo", "publisher")
workflow.add_edge("publisher", END)

# ç¼–è¯‘
app = workflow.compile()

# ========== 6. ä½¿ç”¨å†…å®¹åˆ›ä½œå¹³å° ==========

result = app.invoke({
    "messages": [],
    "topic": "äººå·¥æ™ºèƒ½åœ¨å†…å®¹åˆ›ä½œä¸­çš„åº”ç”¨"
})

print("å†…å®¹åˆ›ä½œæµç¨‹å®Œæˆï¼")
print(f"ä¸»é¢˜ï¼š{result['topic']}")
print(f"æ˜¯å¦å·²å‘å¸ƒï¼š{result.get('published', False)}")
print(f"å…ƒæ•°æ®ï¼š{result.get('metadata', {})}")

# æ‰§è¡Œæµç¨‹ï¼š
# 1. ç ”ç©¶ä»£ç†ï¼šä½¿ç”¨ web_research + competitor_analysis
# 2. å†™ä½œä»£ç†ï¼šä½¿ç”¨ generate_outline + check_grammar
# 3. SEO ä»£ç†ï¼šä½¿ç”¨ analyze_seo + generate_meta_tags
# 4. å‘å¸ƒä»£ç†ï¼šä½¿ç”¨ publish_to_cms + schedule_social_media

# ä¼˜åŠ¿ï¼š
# - æ¯ä¸ªä»£ç†æ‹¥æœ‰ç²¾å‡†çš„æŠ€èƒ½ç»„åˆ
# - æŠ€èƒ½å¯å¤ç”¨ï¼ˆå¦‚ check_grammar åœ¨å¤šä¸ªä»£ç†é—´å…±äº«ï¼‰
# - æ˜“äºç»´æŠ¤ï¼ˆæ›´æ–°æŠ€èƒ½å®šä¹‰å³å¯ï¼‰
# - æ˜“äºæ‰©å±•ï¼ˆæ·»åŠ æ–°æŠ€èƒ½æˆ–æ–°ä»£ç†ï¼‰
# - ä¸“ä¸šåŒ–åˆ†å·¥ï¼ˆç ”ç©¶ã€å†™ä½œã€SEOã€å‘å¸ƒï¼‰</code></pre>
                    </div>
                </section>

                <!-- æŠ€èƒ½ç‰ˆæœ¬ç®¡ç† -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ”„ æŠ€èƒ½ç‰ˆæœ¬ç®¡ç†</h2>
                    <p>
                        åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒæŠ€èƒ½å¯èƒ½éœ€è¦<strong>ç‰ˆæœ¬æ§åˆ¶å’Œæ¸è¿›å¼æ›´æ–°</strong>ã€‚
                    </p>

                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <span class="code-difficulty advanced">ğŸ”´ é«˜çº§</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python">"""
æŠ€èƒ½ç‰ˆæœ¬ç®¡ç† - æ”¯æŒå¤šç‰ˆæœ¬å’Œ A/B æµ‹è¯•
"""
from typing import Dict, Callable
from enum import Enum

class SkillVersion(Enum):
    V1 = "v1"
    V2 = "v2"
    BETA = "beta"

class VersionedSkillRegistry:
    """æ”¯æŒç‰ˆæœ¬ç®¡ç†çš„æŠ€èƒ½æ³¨å†Œè¡¨"""

    def __init__(self):
        self._skills: Dict[str, Dict[SkillVersion, Callable]] = {}
        self._default_versions: Dict[str, SkillVersion] = {}

    def register(self, name: str, skill: Callable, version: SkillVersion):
        """æ³¨å†ŒæŠ€èƒ½çš„ç‰¹å®šç‰ˆæœ¬"""
        if name not in self._skills:
            self._skills[name] = {}
        self._skills[name][version] = skill

    def set_default_version(self, name: str, version: SkillVersion):
        """è®¾ç½®æŠ€èƒ½çš„é»˜è®¤ç‰ˆæœ¬"""
        self._default_versions[name] = version

    def get(self, name: str, version: SkillVersion = None):
        """è·å–æŠ€èƒ½ï¼ˆå¯æŒ‡å®šç‰ˆæœ¬ï¼‰"""
        if name not in self._skills:
            return None

        # ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬æˆ–é»˜è®¤ç‰ˆæœ¬
        target_version = version or self._default_versions.get(name, SkillVersion.V1)
        return self._skills[name].get(target_version)

# åˆ›å»ºç‰ˆæœ¬åŒ–æ³¨å†Œè¡¨
versioned_registry = VersionedSkillRegistry()

# æ³¨å†Œä¸åŒç‰ˆæœ¬çš„æŠ€èƒ½
@tool
def search_v1(query: str) -> dict:
    """æœç´¢æŠ€èƒ½ V1ï¼šåŸºç¡€å®ç°"""
    return {"results": ["ç»“æœ1", "ç»“æœ2"]}

@tool
def search_v2(query: str, filters: dict = None) -> dict:
    """æœç´¢æŠ€èƒ½ V2ï¼šå¢å¼ºç‰ˆï¼Œæ”¯æŒè¿‡æ»¤"""
    # æ–°åŠŸèƒ½ï¼šæ”¯æŒè¿‡æ»¤å™¨
    return {
        "results": ["ç²¾å‡†ç»“æœ1", "ç²¾å‡†ç»“æœ2"],
        "filters_applied": filters or {}
    }

# æ³¨å†Œä¸¤ä¸ªç‰ˆæœ¬
versioned_registry.register("search", search_v1, SkillVersion.V1)
versioned_registry.register("search", search_v2, SkillVersion.V2)

# è®¾ç½®é»˜è®¤ç‰ˆæœ¬
versioned_registry.set_default_version("search", SkillVersion.V1)

# A/B æµ‹è¯•ï¼šéƒ¨åˆ†ä»£ç†ä½¿ç”¨æ–°ç‰ˆæœ¬
def create_ab_test_agent(agent_id: str, use_beta: bool = False):
    """åˆ›å»º A/B æµ‹è¯•ä»£ç†"""
    version = SkillVersion.V2 if use_beta else SkillVersion.V1
    search_skill = versioned_registry.get("search", version)

    def agent(state):
        llm = ChatOpenAI(model="gpt-4o")
        llm_with_tools = llm.bind_tools([search_skill])
        return {"messages": [llm_with_tools.invoke(state["messages"])]}

    return agent

# ä½¿ç”¨ï¼š50% æµé‡ä½¿ç”¨ V2
agent_a = create_ab_test_agent("agent_a", use_beta=False)  # V1
agent_b = create_ab_test_agent("agent_b", use_beta=True)   # V2

# ä¼˜åŠ¿ï¼š
# - æ¸è¿›å¼æ›´æ–°ï¼ˆä¸å½±å“ç°æœ‰ä»£ç†ï¼‰
# - A/B æµ‹è¯•ï¼ˆè¯„ä¼°æ–°ç‰ˆæœ¬æ•ˆæœï¼‰
# - å›æ»šèƒ½åŠ›ï¼ˆé—®é¢˜æ—¶åˆ‡æ¢å›æ—§ç‰ˆæœ¬ï¼‰
# - çµæ´»è¿ç§»ï¼ˆé€æ­¥è¿ç§»åˆ°æ–°ç‰ˆæœ¬ï¼‰</code></pre>
                    </div>
                </section>

                <!-- æœ€ä½³å®è·µ -->
                <section class="content-section">
                    <h2 class="section-title">âœ¨ Skills æœ€ä½³å®è·µ</h2>

                    <h3 class="subsection-title">1. æŠ€èƒ½è®¾è®¡åŸåˆ™</h3>
                    <div class="info-box tip">
                        <div class="info-box-title">âœ… å¥½çš„æŠ€èƒ½è®¾è®¡</div>
                        <ul>
                            <li><strong>å•ä¸€èŒè´£</strong>ï¼šæ¯ä¸ªæŠ€èƒ½ä¸“æ³¨äºä¸€ä¸ªæ˜ç¡®çš„ä»»åŠ¡</li>
                            <li><strong>æ¸…æ™°å‘½å</strong>ï¼šä½¿ç”¨åŠ¨è¯å¼€å¤´ï¼Œæè¿°æ€§å¼ºï¼ˆsearch_internet, analyze_dataï¼‰</li>
                            <li><strong>å®Œæ•´æ–‡æ¡£</strong>ï¼šè¯¦ç»†çš„ docstringï¼ŒåŒ…å«å‚æ•°è¯´æ˜å’Œè¿”å›å€¼</li>
                            <li><strong>ç±»å‹æ³¨è§£</strong>ï¼šå®Œæ•´çš„ç±»å‹æç¤ºï¼Œä¾¿äºç†è§£å’Œè°ƒè¯•</li>
                            <li><strong>é”™è¯¯å¤„ç†</strong>ï¼šä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œé™çº§ç­–ç•¥</li>
                        </ul>
                    </div>

                    <div class="info-box warning">
                        <div class="info-box-title">âŒ å·®çš„æŠ€èƒ½è®¾è®¡</div>
                        <ul>
                            <li><strong>èŒè´£ä¸æ¸…</strong>ï¼šä¸€ä¸ªæŠ€èƒ½åšå¤šä»¶äº‹ï¼ˆsearch_and_analyze_and_formatï¼‰</li>
                            <li><strong>å‘½åæ¨¡ç³Š</strong>ï¼šprocess_data, do_workï¼ˆä¸çŸ¥é“å…·ä½“åšä»€ä¹ˆï¼‰</li>
                            <li><strong>ç¼ºå°‘æ–‡æ¡£</strong>ï¼šæ²¡æœ‰è¯´æ˜å‚æ•°å’Œè¿”å›å€¼</li>
                            <li><strong>ç¼ºå°‘ç±»å‹</strong>ï¼šå‚æ•°å’Œè¿”å›å€¼æ²¡æœ‰ç±»å‹æ³¨è§£</li>
                            <li><strong>é”™è¯¯æš´éœ²</strong>ï¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œä¸å¤„ç†</li>
                        </ul>
                    </div>

                    <h3 class="subsection-title">2. æŠ€èƒ½åˆ†ç±»ç­–ç•¥</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>åˆ†ç±»ç»´åº¦</th>
                                <th>ç±»åˆ«ç¤ºä¾‹</th>
                                <th>æŠ€èƒ½ç¤ºä¾‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>åŠŸèƒ½åˆ†ç±»</strong></td>
                                <td>æœç´¢ã€æ•°æ®å¤„ç†ã€é€šä¿¡ã€å­˜å‚¨</td>
                                <td>search_internet, analyze_data</td>
                            </tr>
                            <tr>
                                <td><strong>é¢†åŸŸåˆ†ç±»</strong></td>
                                <td>è¥é”€ã€è´¢åŠ¡ã€æŠ€æœ¯ã€å®¢æœ</td>
                                <td>send_email, generate_invoice</td>
                            </tr>
                            <tr>
                                <td><strong>æƒé™åˆ†ç±»</strong></td>
                                <td>åŸºç¡€ã€é«˜çº§ã€ç®¡ç†å‘˜</td>
                                <td>basic_search, admin_delete</td>
                            </tr>
                            <tr>
                                <td><strong>å¤æ‚åº¦åˆ†ç±»</strong></td>
                                <td>ç®€å•ã€ä¸­ç­‰ã€å¤æ‚</td>
                                <td>send_notification, deep_analysis</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 class="subsection-title">3. æŠ€èƒ½é…ç½®ç®¡ç†</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†æŠ€èƒ½åˆ†é…
skill_config = {
    "roles": {
        "researcher": {
            "skills": ["search_internet", "search_database", "analyze_data"],
            "model": "gpt-4o"
        },
        "writer": {
            "skills": ["generate_outline", "check_grammar", "format_report"],
            "model": "claude-sonnet-4-5"
        },
        "seo_specialist": {
            "skills": ["analyze_seo", "generate_meta_tags"],
            "model": "gpt-4o"
        }
    }
}

def load_agent_skills(role: str):
    """ä»é…ç½®åŠ è½½ä»£ç†æŠ€èƒ½"""
    config = skill_config["roles"].get(role, {})
    skill_names = config.get("skills", [])
    return skill_registry.get_skills(skill_names)

# ä¼˜åŠ¿ï¼š
# - é›†ä¸­é…ç½®ï¼Œæ˜“äºç®¡ç†
# - å¯å¤–éƒ¨åŒ–ï¼ˆYAMLã€JSONï¼‰
# - ä¾¿äºåŠ¨æ€è°ƒæ•´
# - æ”¯æŒç¯å¢ƒå·®å¼‚ï¼ˆdev vs prodï¼‰</code></pre>
                    </div>

                    <h3 class="subsection-title">4. ç›‘æ§å’Œåº¦é‡</h3>
                    <ul>
                        <li><strong>ä½¿ç”¨ç‡</strong>ï¼šè·Ÿè¸ªæ¯ä¸ªæŠ€èƒ½çš„è°ƒç”¨é¢‘ç‡</li>
                        <li><strong>æˆåŠŸç‡</strong>ï¼šè®°å½•æŠ€èƒ½æ‰§è¡ŒæˆåŠŸç‡</li>
                        <li><strong>æ€§èƒ½</strong>ï¼šç›‘æ§æŠ€èƒ½æ‰§è¡Œæ—¶é—´</li>
                        <li><strong>æˆæœ¬</strong>ï¼šè®¡ç®—æŠ€èƒ½ç›¸å…³çš„ API æˆæœ¬</li>
                        <li><strong>é”™è¯¯è¿½è¸ª</strong>ï¼šè®°å½•æŠ€èƒ½å¤±è´¥çš„åŸå› </li>
                    </ul>

                    <h3 class="subsection-title">5. æŠ€èƒ½æµ‹è¯•</h3>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># æŠ€èƒ½å•å…ƒæµ‹è¯•ç¤ºä¾‹
import pytest

def test_search_internet():
    """æµ‹è¯•æœç´¢æŠ€èƒ½"""
    result = search_internet.invoke({"query": "LangChain"})
    assert "results" in result
    assert len(result["results"]) > 0

def test_analyze_data():
    """æµ‹è¯•æ•°æ®åˆ†ææŠ€èƒ½"""
    result = analyze_data.invoke({
        "data": "sample data",
        "analysis_type": "summary"
    })
    assert "insights" in result
    assert "score" in result
    assert 0 <= result["score"] <= 1

# é›†æˆæµ‹è¯•ï¼šæµ‹è¯•æŠ€èƒ½ç»„åˆ
def test_skill_combination():
    """æµ‹è¯•æŠ€èƒ½ç»„åˆ"""
    # æœç´¢ â†’ åˆ†æ â†’ æ ¼å¼åŒ–
    search_result = search_internet.invoke({"query": "test"})
    analysis = analyze_data.invoke({"data": str(search_result)})
    report = format_report.invoke({"data": analysis})
    assert report is not None</code></pre>
                    </div>
                </section>

                <!-- å¸¸è§é—®é¢˜ -->
                <section class="content-section">
                    <h2 class="section-title">â“ å¸¸è§é—®é¢˜</h2>

                    <h3 class="subsection-subtitle">Q1: Skills å’Œæ™®é€šå·¥å…·æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3>
                    <p>
                        <strong>æœ¬è´¨ç›¸åŒï¼Œç»„ç»‡æ–¹å¼ä¸åŒ</strong>ï¼š
                    </p>
                    <ul>
                        <li>Skills æ˜¯<strong>ç»„ç»‡åŒ–ã€å¯å¤ç”¨</strong>çš„å·¥å…·é›†åˆ</li>
                        <li>å¼ºè°ƒ<strong>è·¨ä»£ç†å…±äº«</strong>å’Œ<strong>é›†ä¸­ç®¡ç†</strong></li>
                        <li>æä¾›<strong>åˆ†ç±»ã€ç‰ˆæœ¬ç®¡ç†ã€æƒé™æ§åˆ¶</strong>ç­‰ä¼ä¸šçº§ç‰¹æ€§</li>
                    </ul>

                    <h3 class="subsection-subtitle">Q2: å¦‚ä½•å†³å®šå“ªäº›æŠ€èƒ½åº”è¯¥å…±äº«ï¼Ÿ</h3>
                    <p>
                        <strong>å…±äº«å†³ç­–æ ‡å‡†</strong>ï¼š
                    </p>
                    <ul>
                        <li><strong>é€šç”¨æ€§</strong>ï¼šå¤šä¸ªä»£ç†éƒ½éœ€è¦çš„èƒ½åŠ›ï¼ˆæœç´¢ã€é€šçŸ¥ï¼‰</li>
                        <li><strong>ä¸€è‡´æ€§è¦æ±‚</strong>ï¼šéœ€è¦ä¿è¯è¡Œä¸ºç»Ÿä¸€çš„æ“ä½œï¼ˆæ•°æ®æ ¼å¼åŒ–ï¼‰</li>
                        <li><strong>ç»´æŠ¤æ•ˆç‡</strong>ï¼šéœ€è¦é›†ä¸­ç»´æŠ¤çš„å¤æ‚é€»è¾‘ï¼ˆAPI è°ƒç”¨ï¼‰</li>
                        <li><strong>ä¸å…±äº«</strong>ï¼šé«˜åº¦ä¸“ä¸šåŒ–ã€ä»…å•ä¸ªä»£ç†ä½¿ç”¨çš„èƒ½åŠ›</li>
                    </ul>

                    <h3 class="subsection-subtitle">Q3: æŠ€èƒ½å¤ªå¤šä¼šå½±å“æ€§èƒ½å—ï¼Ÿ</h3>
                    <p>
                        <strong>å¯èƒ½ä¼šï¼Œä½†æœ‰ä¼˜åŒ–ç­–ç•¥</strong>ï¼š
                    </p>
                    <ul>
                        <li><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šä»…ä¸ºä»£ç†åŠ è½½å¿…éœ€çš„æŠ€èƒ½å­é›†</li>
                        <li><strong>åˆ†ç±»ç®¡ç†</strong>ï¼šä½¿ç”¨æŠ€èƒ½ç»„ï¼Œé¿å…å…¨é‡åŠ è½½</li>
                        <li><strong>æ‡’åŠ è½½</strong>ï¼šé¦–æ¬¡ä½¿ç”¨æ—¶æ‰åˆå§‹åŒ–æŠ€èƒ½</li>
                        <li><strong>æ¨¡å‹é€‰æ‹©</strong>ï¼šå·¥å…·å¤šæ—¶é€‰æ‹©ä¸Šä¸‹æ–‡çª—å£å¤§çš„æ¨¡å‹</li>
                    </ul>

                    <h3 class="subsection-subtitle">Q4: å¦‚ä½•å¤„ç†æŠ€èƒ½å†²çªï¼Ÿ</h3>
                    <p>
                        <strong>å†²çªè§£å†³ç­–ç•¥</strong>ï¼š
                    </p>
                    <ul>
                        <li><strong>å‘½åè§„èŒƒ</strong>ï¼šä½¿ç”¨æ¸…æ™°çš„å‘½åé¿å…æ­§ä¹‰ï¼ˆsearch_web vs search_dbï¼‰</li>
                        <li><strong>å‘½åç©ºé—´</strong>ï¼šä½¿ç”¨å‰ç¼€ï¼ˆresearch.search, data.searchï¼‰</li>
                        <li><strong>ç‰ˆæœ¬éš”ç¦»</strong>ï¼šä¸åŒç‰ˆæœ¬ä½¿ç”¨ä¸åŒåç§°ï¼ˆsearch_v1, search_v2ï¼‰</li>
                        <li><strong>ä¼˜å…ˆçº§</strong>ï¼šå®šä¹‰æŠ€èƒ½ä¼˜å…ˆçº§è§„åˆ™</li>
                    </ul>

                    <h3 class="subsection-subtitle">Q5: å¦‚ä½•å®ç°æŠ€èƒ½çš„æƒé™æ§åˆ¶ï¼Ÿ</h3>
                    <p>
                        <strong>æƒé™æ§åˆ¶æ–¹æ¡ˆ</strong>ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># æƒé™è£…é¥°å™¨
from functools import wraps

def require_permission(permission: str):
    """æŠ€èƒ½æƒé™è£…é¥°å™¨"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # æ£€æŸ¥æƒé™
            agent_permissions = kwargs.get("_permissions", [])
            if permission not in agent_permissions:
                raise PermissionError(f"éœ€è¦æƒé™: {permission}")
            return func(*args, **kwargs)
        wrapper.required_permission = permission
        return wrapper
    return decorator

@tool
@require_permission("admin")
def delete_data(data_id: str) -> bool:
    """åˆ é™¤æ•°æ®ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰"""
    # æ‰§è¡Œåˆ é™¤
    return True

# ä¸ºä»£ç†åˆ†é…æƒé™
researcher_permissions = ["search", "read"]
admin_permissions = ["search", "read", "write", "admin"]</code></pre>
                    </div>

                    <h3 class="subsection-subtitle">Q6: å¦‚ä½•åŠ¨æ€æ·»åŠ æŠ€èƒ½ï¼Ÿ</h3>
                    <p>
                        <strong>åŠ¨æ€æŠ€èƒ½ç®¡ç†</strong>ï¼š
                    </p>
                    <div class="code-block-wrapper">
                        <div class="code-block-header">
                            <span class="code-language">Python</span>
                            <button class="copy-button">å¤åˆ¶ä»£ç </button>
                        </div>
                        <pre><code class="language-python"># è¿è¡Œæ—¶åŠ¨æ€æ³¨å†ŒæŠ€èƒ½
class DynamicSkillRegistry(SkillRegistry):
    """æ”¯æŒåŠ¨æ€æ·»åŠ æŠ€èƒ½"""

    def add_skill_at_runtime(self, skill: BaseTool, category: str):
        """è¿è¡Œæ—¶æ·»åŠ æŠ€èƒ½"""
        self.register(skill, category)
        print(f"å·²æ·»åŠ æŠ€èƒ½: {skill.name} ({category})")

    def remove_skill(self, name: str):
        """ç§»é™¤æŠ€èƒ½"""
        if name in self._skills:
            del self._skills[name]
            print(f"å·²ç§»é™¤æŠ€èƒ½: {name}")

# ä½¿ç”¨
registry = DynamicSkillRegistry()

# åŠ¨æ€æ·»åŠ æ–°æŠ€èƒ½
@tool
def new_feature(param: str) -> str:
    """æ–°åŠŸèƒ½æŠ€èƒ½"""
    return f"å¤„ç†: {param}"

registry.add_skill_at_runtime(new_feature, "experimental")</code></pre>
                    </div>
                </section>

                <!-- å‚è€ƒèµ„æº -->
                <section class="content-section">
                    <h2 class="section-title">ğŸ“– å‚è€ƒèµ„æº</h2>
                    <ul>
                        <li>
                            <a href="https://docs.langchain.com/oss/python/langchain/multi-agent/skills" target="_blank">
                                Multi-Agent Skills å®˜æ–¹æ–‡æ¡£
                            </a>
                        </li>
                        <li>
                            <a href="05-tools.html">
                                å·¥å…·ç³»ç»Ÿ - @tool è£…é¥°å™¨è¯¦è§£
                            </a>
                        </li>
                        <li>
                            <a href="30-multi-agent-index.html">
                                Multi-Agent æ¦‚è¿°
                            </a>
                        </li>
                        <li>
                            <a href="31-multi-agent-subagents.html">
                                Multi-Agent å­ä»£ç†
                            </a>
                        </li>
                        <li>
                            <a href="32-multi-agent-handoffs.html">
                                Multi-Agent äº¤æ¥æœºåˆ¶
                            </a>
                        </li>
                        <li>
                            <a href="34-multi-agent-router.html">
                                Multi-Agent è·¯ç”±æœºåˆ¶
                            </a>
                        </li>
                    </ul>
                </section>

                <!-- é¡µé¢å¯¼èˆª -->
                <nav class="page-navigation">
                    <a href="32-multi-agent-handoffs.html" class="nav-button prev">
                        â† ä¸Šä¸€é¡µï¼šäº¤æ¥æœºåˆ¶
                    </a>
                    <a href="34-multi-agent-router.html" class="nav-button next">
                        ä¸‹ä¸€é¡µï¼šè·¯ç”±æœºåˆ¶ â†’
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" aria-label="è¿”å›é¡¶éƒ¨">â†‘</button>

    <!-- JavaScript -->
    <script src="assets/js/mermaid-init.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</body>
</html>
